!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(3),e.exports=n(2)},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}["interactive","complete"].indexOf(document.readyState)>=0?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function r(){document.addEventListener("mousemove",u),document.addEventListener("mousedown",u),document.addEventListener("mouseup",u),document.addEventListener("pointermove",u),document.addEventListener("pointerdown",u),document.addEventListener("pointerup",u),document.addEventListener("touchmove",u),document.addEventListener("touchstart",u),document.addEventListener("touchend",u)}function u(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",u),document.removeEventListener("pointermove",u),document.removeEventListener("pointerdown",u),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",u),document.removeEventListener("touchstart",u),document.removeEventListener("touchend",u))}document.addEventListener("keydown",function(t){i(document.activeElement)&&o(document.activeElement),e=!0},!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("focus",function(t){var n,a,r;i(t.target)&&((e||(n=t.target,a=n.type,"INPUT"==(r=n.tagName)&&s[a]&&!n.readOnly||"TEXTAREA"==r&&!n.readOnly||n.isContentEditable))&&o(t.target))},!0),document.addEventListener("blur",function(e){var s;i(e.target)&&((e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(s=e.target).hasAttribute("data-focus-visible-added")&&(s.classList.remove("focus-visible"),s.removeAttribute("data-focus-visible-added"))))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),r())},!0),r(),document.body.classList.add("js-focus-visible")})}()},function(e,t,n){},function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.canvas=document.querySelector(t.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(t.size,20),this.num_x=t.num_x,this.num_y=t.num_y,this.init_canvas())}var t,n,i;return t=e,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var e=Math.round(this.get_parent_width()/this.size/2),t=0;t<e;t++)this.squares.push({x:this.size*(2*t),y:0});this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop,s=t-t%this.size,i=n-n%this.size;i===this.canvas.height&&(i-=this.size),s===this.canvas.width&&(s-=this.size);var o=this.squares.findIndex(function(e){return e.x===s&e.y===i});o>-1?this.squares.splice(o,1):this.squares.push({x:s,y:i}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(e,t){return e||t}},{key:"prepare_canvas",value:function(){this.canvas.classList.add("square-canvas--visible"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var e=getComputedStyle(this.canvas.parentNode),t=this.canvas.parentNode.clientWidth;return t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}},{key:"parse_pattern",value:function(){for(var e=this.options.pattern.split(","),t=0;t<e.length;t++){var n=parseInt(e[t].trim()),s=Math.floor(t/this.num_x),i=(t+this.num_x)%this.num_x;"infinite"===this.num_x&&(s=0,i=t),n&&this.squares.push({x:this.size*i,y:this.size*s})}this.draw_squares()}},{key:"draw_squares",value:function(){this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var e=0;e<this.squares.length;e++){var t=this.squares[e];this.context.fillRect(t.x,t.y,this.size,this.size)}}}])&&s(t.prototype,n),i&&s(t,i),e}(),o=o||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},a=o;var r=function(){navigator.connection&&(navigator.connection.effectiveType.includes("2g")||navigator.connection.saveData)||a(function(){!function(){for(var e,t,n=document.querySelectorAll(".js-nav-main a"),s=0;s<n.length;s++)e=n[s].href,t=void 0,((t=document.createElement("link")).relList||{}).supports&&!t.relList.supports("prefetch")||(t.rel="prefetch",t.href=e,document.head.appendChild(t))}()})};n(1),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var u;new i({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new i({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new i({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new i({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new i({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"}),new i({canvas:".js-sq-site-header",num_x:"infinite",num_y:1,size:5,color:"#1d4e6d",fill:"even"});function c(e){var t=document.querySelector(".js-site-content");t.innerHTML="",t.classList.add("site__content--hidden");var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){var e=document.createElement("div");200===this.status&&(e.innerHTML=this.response,t.innerHTML=e.querySelector(".js-site-content").innerHTML,t.classList.remove("site__content--hidden"))},n.onerror=function(){page_content.innerHTML="For some reason I couldn't connect to the server, please try later again."},n.send()}document.querySelector(".js-random-emoji")&&(document.querySelector(".js-random-emoji").textContent=(u=["🤤","🐳","🍻","👊🏻","🍳"])[Math.round(Math.random()*(u.length-1))]),document.querySelector(".js-scroll-top")&&document.querySelector(".js-scroll-top").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".js-logo").focus()}),r(),history.pushState({theme:"home"},location.pathname,location.pathname),document.querySelector(".js-post-list")&&document.querySelector(".js-post-list").addEventListener("click",function(e){var t=e.target.closest("a");t.dataset.post&&(e.preventDefault(),document.documentElement.setAttribute("data-theme",t.dataset.post),history.pushState({theme:t.dataset.post},t.href,t.href),c(t.href))}),window.onpopstate=function(e){e.state&&(document.documentElement.setAttribute("data-theme",e.state.theme),c(location.pathname))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZvY3VzLXZpc2libGUvZGlzdC9mb2N1cy12aXNpYmxlLmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zY3JpcHRzL3NxdWFyZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvcmVxdWVzdC1pZGxlLWNhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zY3JpcHRzL3ByZWZldGNoLW5hdi5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImRvY3VtZW50IiwiY2FsbGJhY2siLCJsb2FkZWQiLCJsb2FkIiwiaW5kZXhPZiIsInJlYWR5U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93Iiwib25ET01SZWFkeSIsImhhZEtleWJvYXJkRXZlbnQiLCJoYWRGb2N1c1Zpc2libGVSZWNlbnRseSIsImhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCIsImlucHV0VHlwZXNXaGl0ZWxpc3QiLCJ0ZXh0Iiwic2VhcmNoIiwidXJsIiwidGVsIiwiZW1haWwiLCJwYXNzd29yZCIsIm51bWJlciIsImRhdGUiLCJtb250aCIsIndlZWsiLCJ0aW1lIiwiZGF0ZXRpbWUiLCJkYXRldGltZS1sb2NhbCIsImlzVmFsaWRGb2N1c1RhcmdldCIsImVsIiwibm9kZU5hbWUiLCJjbGFzc0xpc3QiLCJhZGRGb2N1c1Zpc2libGVDbGFzcyIsImNvbnRhaW5zIiwiYWRkIiwic2V0QXR0cmlidXRlIiwib25Qb2ludGVyRG93biIsImUiLCJhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMiLCJvbkluaXRpYWxQb2ludGVyTW92ZSIsInRhcmdldCIsInRvTG93ZXJDYXNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFjdGl2ZUVsZW1lbnQiLCJ0eXBlIiwidGFnTmFtZSIsInJlYWRPbmx5IiwiaXNDb250ZW50RWRpdGFibGUiLCJoYXNBdHRyaWJ1dGUiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwicmVtb3ZlQXR0cmlidXRlIiwidmlzaWJpbGl0eVN0YXRlIiwiYm9keSIsImZhY3RvcnkiLCJTcXVhcmVzIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJjYW52YXMiLCJxdWVyeVNlbGVjdG9yIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjb2xvciIsInNpemUiLCJwcm9wX3NldCIsIm51bV94IiwibnVtX3kiLCJpbml0X2NhbnZhcyIsInByZXBhcmVfY2FudmFzIiwiYXR0YWNoX2V2ZW50cyIsInBhdHRlcm4iLCJwYXJzZV9wYXR0ZXJuIiwiZmlsbCIsIm51bV9ib3hlcyIsIk1hdGgiLCJyb3VuZCIsImdldF9wYXJlbnRfd2lkdGgiLCJzcXVhcmVzIiwicHVzaCIsIngiLCJ5IiwiZHJhd19zcXVhcmVzIiwicGxhY2Vfc3F1YXJlIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJ4X3JhdyIsInBhZ2VYIiwib2Zmc2V0TGVmdCIsInlfcmF3IiwicGFnZVkiLCJvZmZzZXRUb3AiLCJpbmRleCIsImZpbmRJbmRleCIsInBvcyIsInNwbGljZSIsInByb3AiLCJwYXJlbnRfc3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcmVudE5vZGUiLCJwYXJlbnRfd2lkdGgiLCJjbGllbnRXaWR0aCIsInBhcnNlRmxvYXQiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsInNwbGl0IiwibGVuZ3RoIiwiYm94IiwicGFyc2VJbnQiLCJ0cmltIiwicm93IiwiZmxvb3IiLCJjb2wiLCJmaWxsU3R5bGUiLCJzcXVhcmUiLCJmaWxsUmVjdCIsInJlcXVlc3RJZGxlQ2FsbGJhY2siLCJjYiIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImRpZFRpbWVvdXQiLCJ0aW1lUmVtYWluaW5nIiwibWF4IiwicHJlZmV0Y2hOYXYiLCJuYXZpZ2F0b3IiLCJjb25uZWN0aW9uIiwiZWZmZWN0aXZlVHlwZSIsImluY2x1ZGVzIiwic2F2ZURhdGEiLCJsaW5rIiwibGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaHJlZiIsImNyZWF0ZUVsZW1lbnQiLCJyZWxMaXN0Iiwic3VwcG9ydHMiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJnZXRMaW5rcyIsInJlcXVpcmUiLCJFbGVtZW50IiwiY2xvc2VzdCIsImRvY3VtZW50RWxlbWVudCIsIm1hdGNoZXMiLCJwYXJlbnRFbGVtZW50Iiwibm9kZVR5cGUiLCJlbW9qaXMiLCJsb2FkUGFnZSIsIm1haW4iLCJpbm5lckhUTUwiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiY29udGFpbmVyIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvbmVycm9yIiwicGFnZV9jb250ZW50Iiwic2VuZCIsInRleHRDb250ZW50IiwicmFuZG9tIiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJ0aGVtZSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJkYXRhc2V0IiwicG9zdCIsIm9ucG9wc3RhdGUiLCJzdGF0ZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFB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QyxPQUNmekksRUFBRWlJLGlCQUNGcEssU0FBU2dKLGdCQUFnQi9HLGFBQWEsYUFBY2lHLEVBQUt5QyxRQUFRQyxNQUNqRU4sUUFBUUMsVUFBVSxDQUFFQyxNQUFPdEMsRUFBS3lDLFFBQVFDLE1BQVExQyxFQUFLRyxLQUFNSCxFQUFLRyxNQUVoRWdCLEVBQVNuQixFQUFLRyxTQUtwQjlILE9BQU9zSyxXQUFhLFNBQVMxSSxHQUN2QkEsRUFBRTJJLFFBQ0o5SyxTQUFTZ0osZ0JBQWdCL0csYUFBYSxhQUFjRSxFQUFFMkksTUFBTU4sT0FDNURuQixFQUFTb0IsU0FBU0MiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9mb2N1cy12aXNpYmxlXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBoYWRLZXlib2FyZEV2ZW50ID0gdHJ1ZTtcbiAgICB2YXIgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkgPSBmYWxzZTtcbiAgICB2YXIgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0ID0gbnVsbDtcblxuICAgIHZhciBpbnB1dFR5cGVzV2hpdGVsaXN0ID0ge1xuICAgICAgdGV4dDogdHJ1ZSxcbiAgICAgIHNlYXJjaDogdHJ1ZSxcbiAgICAgIHVybDogdHJ1ZSxcbiAgICAgIHRlbDogdHJ1ZSxcbiAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgcGFzc3dvcmQ6IHRydWUsXG4gICAgICBudW1iZXI6IHRydWUsXG4gICAgICBkYXRlOiB0cnVlLFxuICAgICAgbW9udGg6IHRydWUsXG4gICAgICB3ZWVrOiB0cnVlLFxuICAgICAgdGltZTogdHJ1ZSxcbiAgICAgIGRhdGV0aW1lOiB0cnVlLFxuICAgICAgJ2RhdGV0aW1lLWxvY2FsJzogdHJ1ZVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGxlZ2FjeSBicm93c2VycyBhbmQgaWZyYW1lcyB3aGljaCBzb21ldGltZXMgZm9jdXNcbiAgICAgKiBlbGVtZW50cyBsaWtlIGRvY3VtZW50LCBib2R5LCBhbmQgbm9uLWludGVyYWN0aXZlIFNWRy5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNWYWxpZEZvY3VzVGFyZ2V0KGVsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGVsICYmXG4gICAgICAgIGVsICE9PSBkb2N1bWVudCAmJlxuICAgICAgICBlbC5ub2RlTmFtZSAhPT0gJ0hUTUwnICYmXG4gICAgICAgIGVsLm5vZGVOYW1lICE9PSAnQk9EWScgJiZcbiAgICAgICAgJ2NsYXNzTGlzdCcgaW4gZWwgJiZcbiAgICAgICAgJ2NvbnRhaW5zJyBpbiBlbC5jbGFzc0xpc3RcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB3aGV0aGVyIHRoZSBnaXZlbiBlbGVtZW50IHNob3VsZCBhdXRvbWF0aWNhbGx5IHRyaWdnZXIgdGhlXG4gICAgICogYGZvY3VzLXZpc2libGVgIGNsYXNzIGJlaW5nIGFkZGVkLCBpLmUuIHdoZXRoZXIgaXQgc2hvdWxkIGFsd2F5cyBtYXRjaFxuICAgICAqIGA6Zm9jdXMtdmlzaWJsZWAgd2hlbiBmb2N1c2VkLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvY3VzVHJpZ2dlcnNLZXlib2FyZE1vZGFsaXR5KGVsKSB7XG4gICAgICB2YXIgdHlwZSA9IGVsLnR5cGU7XG4gICAgICB2YXIgdGFnTmFtZSA9IGVsLnRhZ05hbWU7XG5cbiAgICAgIGlmICh0YWdOYW1lID09ICdJTlBVVCcgJiYgaW5wdXRUeXBlc1doaXRlbGlzdFt0eXBlXSAmJiAhZWwucmVhZE9ubHkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YWdOYW1lID09ICdURVhUQVJFQScgJiYgIWVsLnJlYWRPbmx5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWwuaXNDb250ZW50RWRpdGFibGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyB0byB0aGUgZ2l2ZW4gZWxlbWVudCBpZiBpdCB3YXMgbm90IGFkZGVkIGJ5XG4gICAgICogdGhlIGF1dGhvci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkRm9jdXNWaXNpYmxlQ2xhc3MoZWwpIHtcbiAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvY3VzLXZpc2libGUnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmb2N1cy12aXNpYmxlJyk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcsICcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyBmcm9tIHRoZSBnaXZlbiBlbGVtZW50IGlmIGl0IHdhcyBub3RcbiAgICAgKiBvcmlnaW5hbGx5IGFkZGVkIGJ5IHRoZSBhdXRob3IuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUZvY3VzVmlzaWJsZUNsYXNzKGVsKSB7XG4gICAgICBpZiAoIWVsLmhhc0F0dHJpYnV0ZSgnZGF0YS1mb2N1cy12aXNpYmxlLWFkZGVkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMtdmlzaWJsZScpO1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmVhdCBga2V5ZG93bmAgYXMgYSBzaWduYWwgdGhhdCB0aGUgdXNlciBpcyBpbiBrZXlib2FyZCBtb2RhbGl0eS5cbiAgICAgKiBBcHBseSBgZm9jdXMtdmlzaWJsZWAgdG8gYW55IGN1cnJlbnQgYWN0aXZlIGVsZW1lbnQgYW5kIGtlZXAgdHJhY2tcbiAgICAgKiBvZiBvdXIga2V5Ym9hcmQgbW9kYWxpdHkgc3RhdGUgd2l0aCBgaGFkS2V5Ym9hcmRFdmVudGAuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICBpZiAoaXNWYWxpZEZvY3VzVGFyZ2V0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgIGFkZEZvY3VzVmlzaWJsZUNsYXNzKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBoYWRLZXlib2FyZEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiBhdCBhbnkgcG9pbnQgYSB1c2VyIGNsaWNrcyB3aXRoIGEgcG9pbnRpbmcgZGV2aWNlLCBlbnN1cmUgdGhhdCB3ZSBjaGFuZ2VcbiAgICAgKiB0aGUgbW9kYWxpdHkgYXdheSBmcm9tIGtleWJvYXJkLlxuICAgICAqIFRoaXMgYXZvaWRzIHRoZSBzaXR1YXRpb24gd2hlcmUgYSB1c2VyIHByZXNzZXMgYSBrZXkgb24gYW4gYWxyZWFkeSBmb2N1c2VkXG4gICAgICogZWxlbWVudCwgYW5kIHRoZW4gY2xpY2tzIG9uIGEgZGlmZmVyZW50IGVsZW1lbnQsIGZvY3VzaW5nIGl0IHdpdGggYVxuICAgICAqIHBvaW50aW5nIGRldmljZSwgd2hpbGUgd2Ugc3RpbGwgdGhpbmsgd2UncmUgaW4ga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZSkge1xuICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9uIGBmb2N1c2AsIGFkZCB0aGUgYGZvY3VzLXZpc2libGVgIGNsYXNzIHRvIHRoZSB0YXJnZXQgaWY6XG4gICAgICogLSB0aGUgdGFyZ2V0IHJlY2VpdmVkIGZvY3VzIGFzIGEgcmVzdWx0IG9mIGtleWJvYXJkIG5hdmlnYXRpb24sIG9yXG4gICAgICogLSB0aGUgZXZlbnQgdGFyZ2V0IGlzIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGxpa2VseSByZXF1aXJlIGludGVyYWN0aW9uXG4gICAgICogICB2aWEgdGhlIGtleWJvYXJkIChlLmcuIGEgdGV4dCBib3gpXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uRm9jdXMoZSkge1xuICAgICAgLy8gUHJldmVudCBJRSBmcm9tIGZvY3VzaW5nIHRoZSBkb2N1bWVudCBvciBIVE1MIGVsZW1lbnQuXG4gICAgICBpZiAoIWlzVmFsaWRGb2N1c1RhcmdldChlLnRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFkS2V5Ym9hcmRFdmVudCB8fCBmb2N1c1RyaWdnZXJzS2V5Ym9hcmRNb2RhbGl0eShlLnRhcmdldCkpIHtcbiAgICAgICAgYWRkRm9jdXNWaXNpYmxlQ2xhc3MoZS50YXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9uIGBibHVyYCwgcmVtb3ZlIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgZnJvbSB0aGUgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbkJsdXIoZSkge1xuICAgICAgaWYgKCFpc1ZhbGlkRm9jdXNUYXJnZXQoZS50YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvY3VzLXZpc2libGUnKSB8fFxuICAgICAgICBlLnRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcpXG4gICAgICApIHtcbiAgICAgICAgLy8gVG8gZGV0ZWN0IGEgdGFiL3dpbmRvdyBzd2l0Y2gsIHdlIGxvb2sgZm9yIGEgYmx1ciBldmVudCBmb2xsb3dlZFxuICAgICAgICAvLyByYXBpZGx5IGJ5IGEgdmlzaWJpbGl0eSBjaGFuZ2UuXG4gICAgICAgIC8vIElmIHdlIGRvbid0IHNlZSBhIHZpc2liaWxpdHkgY2hhbmdlIHdpdGhpbiAxMDBtcywgaXQncyBwcm9iYWJseSBhXG4gICAgICAgIC8vIHJlZ3VsYXIgZm9jdXMgY2hhbmdlLlxuICAgICAgICBoYWRGb2N1c1Zpc2libGVSZWNlbnRseSA9IHRydWU7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0KTtcbiAgICAgICAgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkgPSBmYWxzZTtcbiAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICAgIHJlbW92ZUZvY3VzVmlzaWJsZUNsYXNzKGUudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgdXNlciBjaGFuZ2VzIHRhYnMsIGtlZXAgdHJhY2sgb2Ygd2hldGhlciBvciBub3QgdGhlIHByZXZpb3VzbHlcbiAgICAgKiBmb2N1c2VkIGVsZW1lbnQgaGFkIC5mb2N1cy12aXNpYmxlLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvblZpc2liaWxpdHlDaGFuZ2UoZSkge1xuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PSAnaGlkZGVuJykge1xuICAgICAgICAvLyBJZiB0aGUgdGFiIGJlY29tZXMgYWN0aXZlIGFnYWluLCB0aGUgYnJvd3NlciB3aWxsIGhhbmRsZSBjYWxsaW5nIGZvY3VzXG4gICAgICAgIC8vIG9uIHRoZSBlbGVtZW50IChTYWZhcmkgYWN0dWFsbHkgY2FsbHMgaXQgdHdpY2UpLlxuICAgICAgICAvLyBJZiB0aGlzIHRhYiBjaGFuZ2UgY2F1c2VkIGEgYmx1ciBvbiBhbiBlbGVtZW50IHdpdGggZm9jdXMtdmlzaWJsZSxcbiAgICAgICAgLy8gcmUtYXBwbHkgdGhlIGNsYXNzIHdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgYmFjayB0byB0aGUgdGFiLlxuICAgICAgICBpZiAoaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkpIHtcbiAgICAgICAgICBoYWRLZXlib2FyZEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBncm91cCBvZiBsaXN0ZW5lcnMgdG8gZGV0ZWN0IHVzYWdlIG9mIGFueSBwb2ludGluZyBkZXZpY2VzLlxuICAgICAqIFRoZXNlIGxpc3RlbmVycyB3aWxsIGJlIGFkZGVkIHdoZW4gdGhlIHBvbHlmaWxsIGZpcnN0IGxvYWRzLCBhbmQgYW55dGltZVxuICAgICAqIHRoZSB3aW5kb3cgaXMgYmx1cnJlZCwgc28gdGhhdCB0aGV5IGFyZSBhY3RpdmUgd2hlbiB0aGUgd2luZG93IHJlZ2FpbnNcbiAgICAgKiBmb2N1cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBwb2xmeWlsbCBmaXJzdCBsb2FkcywgYXNzdW1lIHRoZSB1c2VyIGlzIGluIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIElmIGFueSBldmVudCBpcyByZWNlaXZlZCBmcm9tIGEgcG9pbnRpbmcgZGV2aWNlIChlLmcuIG1vdXNlLCBwb2ludGVyLFxuICAgICAqIHRvdWNoKSwgdHVybiBvZmYga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogVGhpcyBhY2NvdW50cyBmb3Igc2l0dWF0aW9ucyB3aGVyZSBmb2N1cyBlbnRlcnMgdGhlIHBhZ2UgZnJvbSB0aGUgVVJMIGJhci5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25Jbml0aWFsUG9pbnRlck1vdmUoZSkge1xuICAgICAgLy8gV29yayBhcm91bmQgYSBTYWZhcmkgcXVpcmsgdGhhdCBmaXJlcyBhIG1vdXNlbW92ZSBvbiA8aHRtbD4gd2hlbmV2ZXIgdGhlXG4gICAgICAvLyB3aW5kb3cgYmx1cnMsIGV2ZW4gaWYgeW91J3JlIHRhYmJpbmcgb3V0IG9mIHRoZSBwYWdlLiDCr1xcXyjjg4QpXy/Cr1xuICAgICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdodG1sJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGhhZEtleWJvYXJkRXZlbnQgPSBmYWxzZTtcbiAgICAgIHJlbW92ZUluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd24sIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgb25Gb2N1cywgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1ciwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSwgdHJ1ZSk7XG4gICAgYWRkSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2pzLWZvY3VzLXZpc2libGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpcHRpb24gd2hlbiB0aGUgRE9NIGlzIHJlYWR5XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBmdW5jdGlvbiBvbkRPTVJlYWR5KGNhbGxiYWNrKSB7XG4gICAgdmFyIGxvYWRlZDtcblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIHdyYXBwZXIgZm9yIGNoZWNrIGxvYWRlZCBzdGF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICBsb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnaW50ZXJhY3RpdmUnLCAnY29tcGxldGUnXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpID49IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWQsIGZhbHNlKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgbG9hZCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgb25ET01SZWFkeShpbml0KTtcbiAgfVxuXG59KSkpO1xuIiwiY2xhc3MgU3F1YXJlcyB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuY2FudmFzKTtcblxuICAgIGlmICghdGhpcy5jYW52YXMpIHJldHVybjtcblxuICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5jb2xvciA9J3JlZCc7XG5cbiAgICB0aGlzLnNpemUgPSB0aGlzLnByb3Bfc2V0KG9wdGlvbnMuc2l6ZSwgMjApO1xuXG4gICAgdGhpcy5udW1feCA9IG9wdGlvbnMubnVtX3g7XG4gICAgdGhpcy5udW1feSA9IG9wdGlvbnMubnVtX3k7XG5cbiAgICB0aGlzLmluaXRfY2FudmFzKCk7XG4gIH1cblxuICBpbml0X2NhbnZhcygpIHtcbiAgICB0aGlzLnByZXBhcmVfY2FudmFzKCk7XG4gICAgdGhpcy5hdHRhY2hfZXZlbnRzKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdHRlcm4pIHtcbiAgICAgIHRoaXMucGFyc2VfcGF0dGVybigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmlsbCkge1xuICAgICAgY29uc3QgbnVtX2JveGVzID0gTWF0aC5yb3VuZCh0aGlzLmdldF9wYXJlbnRfd2lkdGgoKSAvIHRoaXMuc2l6ZSAvIDIpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9ib3hlczsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogKDIgKiBpKSwgeTogMCB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmF3X3NxdWFyZXMoKTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hfZXZlbnRzKCkge1xuICAgIHRoaXMucGxhY2Vfc3F1YXJlID0gdGhpcy5wbGFjZV9zcXVhcmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucGxhY2Vfc3F1YXJlKTtcbiAgfVxuXG4gIHBsYWNlX3NxdWFyZShlKSB7XG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgY29uc3QgeF9yYXcgPSBlLnBhZ2VYIC0gZS50YXJnZXQub2Zmc2V0TGVmdDtcbiAgICAgIGNvbnN0IHlfcmF3ID0gZS5wYWdlWSAtIGUudGFyZ2V0Lm9mZnNldFRvcDtcblxuICAgICAgbGV0IHggPSB4X3JhdyAtIHhfcmF3ICUgdGhpcy5zaXplO1xuICAgICAgbGV0IHkgPSB5X3JhdyAtIHlfcmF3ICUgdGhpcy5zaXplO1xuXG4gICAgICBpZiAoeSA9PT0gdGhpcy5jYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgIHkgLT0gdGhpcy5zaXplO1xuICAgICAgfVxuICAgICAgaWYgKHggPT09IHRoaXMuY2FudmFzLndpZHRoKSB7XG4gICAgICAgIHggLT0gdGhpcy5zaXplO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuc3F1YXJlcy5maW5kSW5kZXgocG9zID0+IHBvcy54ID09PSB4ICYgcG9zLnkgPT09IHkpO1xuXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLnNxdWFyZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogeCwgeTogeX0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRyYXdfc3F1YXJlcyh0aGlzLmNvbnRleHQsIHRoaXMuc3F1YXJlcyk7XG4gIH1cblxuICBwcm9wX3NldChwcm9wLCB2YWx1ZSkge1xuICAgIHJldHVybiBwcm9wID8gcHJvcCA6IHZhbHVlO1xuICB9XG5cbiAgcHJlcGFyZV9jYW52YXMoKSB7XG4gICAgdGhpcy5jYW52YXMuY2xhc3NMaXN0LmFkZCgnc3F1YXJlLWNhbnZhcy0tdmlzaWJsZScpXG5cbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMubnVtX3ggKiB0aGlzLnNpemU7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5udW1feSAqIHRoaXMuc2l6ZTtcblxuICAgIGlmICh0aGlzLm51bV94ID09PSAnaW5maW5pdGUnKSB7ICBcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5nZXRfcGFyZW50X3dpZHRoKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zcXVhcmVzID0gW107XG4gIH1cblxuICBnZXRfcGFyZW50X3dpZHRoKCkge1xuICAgIGNvbnN0IHBhcmVudF9zdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY2FudmFzLnBhcmVudE5vZGUpO1xuICAgIGxldCBwYXJlbnRfd2lkdGggPSB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLmNsaWVudFdpZHRoO1xuICAgIHBhcmVudF93aWR0aCAtPSBwYXJzZUZsb2F0KHBhcmVudF9zdHlsZXMucGFkZGluZ0xlZnQpICsgcGFyc2VGbG9hdChwYXJlbnRfc3R5bGVzLnBhZGRpbmdSaWdodCk7XG5cbiAgICByZXR1cm4gcGFyZW50X3dpZHRoO1xuICB9XG5cbiAgcGFyc2VfcGF0dGVybigpIHtcbiAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5vcHRpb25zLnBhdHRlcm4uc3BsaXQoJywnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYm94ID0gcGFyc2VJbnQocGF0dGVybltpXS50cmltKCkpO1xuICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoaSAvIHRoaXMubnVtX3gpO1xuICAgICAgbGV0IGNvbCA9IChpICsgdGhpcy5udW1feCkgJSB0aGlzLm51bV94O1xuXG4gICAgICBpZiAodGhpcy5udW1feCA9PT0gJ2luZmluaXRlJykge1xuICAgICAgICByb3cgPSAwO1xuICAgICAgICBjb2wgPSBpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYm94KSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogY29sLCB5OiB0aGlzLnNpemUgKiByb3cgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3X3NxdWFyZXMoKTtcbiAgfVxuXG4gIGRyYXdfc3F1YXJlcygpIHtcbiAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5wcm9wX3NldCh0aGlzLm9wdGlvbnMuY29sb3IsICdyZ2JhKDUxLCA1MSwgNTEsIDAuOSknKTtcblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnNxdWFyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IHRoaXMuc3F1YXJlc1tpXTtcbiAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdChzcXVhcmUueCwgc3F1YXJlLnksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3F1YXJlcztcblxuXG4iLCJjb25zdCByZXF1ZXN0SWRsZUNhbGxiYWNrID0gcmVxdWVzdElkbGVDYWxsYmFjayB8fFxuICBmdW5jdGlvbiAoY2IpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgY2Ioe1xuICAgICAgICBkaWRUaW1lb3V0OiBmYWxzZSxcbiAgICAgICAgdGltZVJlbWFpbmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCA1MCAtIChEYXRlLm5vdygpIC0gc3RhcnQpKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sIDEpO1xuICB9O1xuXG5leHBvcnQgZGVmYXVsdCByZXF1ZXN0SWRsZUNhbGxiYWNrO1xuIiwiLyoqXG4gKiBJbnNwaXJlZCBieSBxdWlja2xpbmsuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lTGFicy9xdWlja2xpbmtcbiAqL1xuIFxuaW1wb3J0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgZnJvbSAnLi9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMnO1xuXG5mdW5jdGlvbiBjcmVhdGVQcmVmZXRjaExpbmsodXJsKSB7XG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cbiAgLy8gSWYgcHJlZmV0Y2ggc3VwcG9ydGVkICAgIFxuICBpZiAoKGxpbmsucmVsTGlzdCB8fCB7fSkuc3VwcG9ydHMgJiYgIWxpbmsucmVsTGlzdC5zdXBwb3J0cygncHJlZmV0Y2gnKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxpbmsucmVsID0gJ3ByZWZldGNoJztcbiAgbGluay5ocmVmID0gdXJsO1xuXG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG59XG5cbmZ1bmN0aW9uIGdldExpbmtzKCkge1xuICAvLyBHZXQgYWxsIGxpbmtzIGluIG1haW4gbmF2XG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW5hdi1tYWluIGEnKTtcblxuICBmb3IobGV0IGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICBjcmVhdGVQcmVmZXRjaExpbmsobGlua3NbaV0uaHJlZik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlZmV0Y2hOYXYoKSB7XG4gIC8vIGRvbid0IHByZWZldGNoIGlmIDJnIGNvbm5lY3Rpb24gb3IgZGF0YS1zYXZlciBlbmFibGVkXG4gIGlmIChuYXZpZ2F0b3IuY29ubmVjdGlvbikge1xuICAgIGlmIChuYXZpZ2F0b3IuY29ubmVjdGlvbi5lZmZlY3RpdmVUeXBlLmluY2x1ZGVzKCcyZycpIHx8IG5hdmlnYXRvci5jb25uZWN0aW9uLnNhdmVEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gc3RhcnQgYXMgc29vbiBhcyB0aGUgYnJvd3NlciBpc24ndCBidXN5IGFueW1vcmVcbiAgcmVxdWVzdElkbGVDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0TGlua3MoKTtcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJlZmV0Y2hOYXY7XG4iLCJpbXBvcnQgU3F1YXJlcyBmcm9tICcuL3NxdWFyZXMnO1xuaW1wb3J0IHByZWZldGNoTmF2IGZyb20gJy4vcHJlZmV0Y2gtbmF2JztcbnJlcXVpcmUoJ2ZvY3VzLXZpc2libGUnKTtcblxuaWYgKCFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0KSB7XG4gIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbihzKSB7XG4gICAgdmFyIGVsID0gdGhpcztcbiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsO1xuICAgIGRvIHtcbiAgICAgIGlmIChlbC5tYXRjaGVzKHMpKSByZXR1cm4gZWw7XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZTtcbiAgICB9IHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59XG5cbmNvbnN0IGhvbWVfdGwgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10bCcsXG4gIG51bV94OiAxLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEnLFxuICBjb2xvcjogJyMzNkIxQkYnXG59KTtcblxuY29uc3QgaG9tZV90ciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLXRyJyxcbiAgbnVtX3g6IDIsXG4gIG51bV95OiAxLFxuICBwYXR0ZXJuOiAnMSwxJyxcbiAgY29sb3I6ICcjMzZCMUJGJ1xufSk7XG5cbmNvbnN0IGhvbWVfYnIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1icicsXG4gIG51bV94OiAxLFxuICBudW1feTogMixcbiAgcGF0dGVybjogJzEsMScsXG4gIGNvbG9yOiAnI0YyM0M1MCdcbn0pO1xuXG5jb25zdCBob21lX2JsID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtYmwnLFxuICBudW1feDogMixcbiAgbnVtX3k6IDIsXG4gIHBhdHRlcm46ICcxLDAsMSwxJyxcbiAgY29sb3I6ICcjRjIzQzUwJ1xufSk7XG5cbmNvbnN0IGhvbWVfaW50cm8gPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1ob21lLWludHJvJyxcbiAgbnVtX3g6IDYsXG4gIG51bV95OiA1LFxuICBjb2xvcjogJyM1NjhiOGUnLFxuICBzaXplOiAxMCxcbiAgcGF0dGVybjogYDAsMCwxLDEsMCwxLFxuICAgIDAsMSwxLDAsMCwxLFxuICAgIDEsMSwwLDAsMCwxLFxuICAgIDAsMSwxLDAsMCwwLFxuICAgIDAsMCwxLDEsMCwxYFxufSk7XG5cbmNvbnN0IHNpdGVfaGVhZGVyID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3Etc2l0ZS1oZWFkZXInLFxuICBudW1feDogJ2luZmluaXRlJyxcbiAgbnVtX3k6IDEsXG4gIHNpemU6IDUsXG4gIGNvbG9yOiAnIzFkNGU2ZCcsXG4gIGZpbGw6ICdldmVuJ1xufSk7XG5cbi8qKlxuICogUmFuZG9tIGVtb2ppXG4gKi9cblxuZnVuY3Rpb24gZ2V0UmFuZG9tRW1vamkoKSB7XG4gIGNvbnN0IGVtb2ppcyA9IFsn8J+kpCcsICfwn5CzJywgJ/CfjbsnLCAn8J+RivCfj7snLCAn8J+NsyddO1xuXG4gIGNvbnN0IGVtb2ppID0gZW1vamlzW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChlbW9qaXMubGVuZ3RoIC0gMSkpXTtcbiAgcmV0dXJuIGVtb2ppO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXJhbmRvbS1lbW9qaScpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1yYW5kb20tZW1vamknKS50ZXh0Q29udGVudCA9IGdldFJhbmRvbUVtb2ppKCk7XG59XG5cbi8qKlxuICogU21vb3RobHkgc2Nyb2xsIHRvIHRvcFxuICovXG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2Nyb2xsLXRvcCcpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zY3JvbGwtdG9wJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWxvZ28nKS5mb2N1cygpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQcmVmZXRjaCBsaW5rcyBpbiBuYXYgZm9yIGJldHRlciBwZXJjZWl2ZWQgcGVyZm9ybWFuY2VcbiAqL1xuXG5wcmVmZXRjaE5hdigpO1xuXG5oaXN0b3J5LnB1c2hTdGF0ZSh7IHRoZW1lOiBcImhvbWVcIn0sIGxvY2F0aW9uLnBhdGhuYW1lLCBsb2NhdGlvbi5wYXRobmFtZSk7XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0JykpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvc3QtbGlzdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBsaW5rID0gZS50YXJnZXQuY2xvc2VzdCgnYScpO1xuICAgIGlmIChsaW5rLmRhdGFzZXQucG9zdCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIGxpbmsuZGF0YXNldC5wb3N0KTtcbiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHsgdGhlbWU6IGxpbmsuZGF0YXNldC5wb3N0IH0sIGxpbmsuaHJlZiwgbGluay5ocmVmKTtcblxuICAgICAgbG9hZFBhZ2UobGluay5ocmVmKTtcbiAgICB9XG4gIH0pO1xufVxuXG53aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUuc3RhdGUpIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgZS5zdGF0ZS50aGVtZSk7XG4gICAgbG9hZFBhZ2UobG9jYXRpb24ucGF0aG5hbWUpO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGxvYWRQYWdlKHVybCkge1xuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNpdGUtY29udGVudCcpO1xuICBtYWluLmlubmVySFRNTCA9ICcnO1xuICBtYWluLmNsYXNzTGlzdC5hZGQoJ3NpdGVfX2NvbnRlbnQtLWhpZGRlbicpO1xuXG4gIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMucmVzcG9uc2U7XG4gICAgICBtYWluLmlubmVySFRNTCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuanMtc2l0ZS1jb250ZW50JykuaW5uZXJIVE1MO1xuICAgICAgbWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdzaXRlX19jb250ZW50LS1oaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgcGFnZV9jb250ZW50LmlubmVySFRNTCA9ICdGb3Igc29tZSByZWFzb24gSSBjb3VsZG5cXCd0IGNvbm5lY3QgdG8gdGhlIHNlcnZlciwgcGxlYXNlIHRyeSBsYXRlciBhZ2Fpbi4nO1xuICB9O1xuXG4gIHJlcXVlc3Quc2VuZCgpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==