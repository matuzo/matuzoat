!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n(2),t.exports=n(1)},function(t,e,n){},function(t,e,n){"use strict";function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}n.r(e);var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.canvas=document.querySelector(e.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(e.size,20),this.num_x=e.num_x,this.num_y=e.num_y,this.init_canvas())}var e,n,i;return e=t,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var t=Math.round(this.get_parent_width()/this.size/2),e=0;e<t;e++)this.squares.push({x:this.size*(2*e),y:0});this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop,s=e-e%this.size,i=n-n%this.size;i===this.canvas.height&&(i-=this.size),s===this.canvas.width&&(s-=this.size);var r=this.squares.findIndex(function(t){return t.x===s&t.y===i});r>-1?this.squares.splice(r,1):this.squares.push({x:s,y:i}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(t,e){return t||e}},{key:"prepare_canvas",value:function(){this.canvas.removeAttribute("hidden"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var t=getComputedStyle(this.canvas.parentNode),e=this.canvas.parentNode.clientWidth;return e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}},{key:"parse_pattern",value:function(){for(var t=this.options.pattern.split(","),e=0;e<t.length;e++){var n=parseInt(t[e].trim()),s=Math.floor(e/this.num_x),i=(e+this.num_x)%this.num_x;"infinite"===this.num_x&&(s=0,i=e),n&&this.squares.push({x:this.size*i,y:this.size*s})}this.draw_squares()}},{key:"draw_squares",value:function(){this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var t=0;t<this.squares.length;t++){var e=this.squares[t];this.context.fillRect(e.x,e.y,this.size,this.size)}}}])&&s(e.prototype,n),i&&s(e,i),t}(),r=r||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},a=r;var o=function(){navigator.connection&&(navigator.connection.effectiveType.includes("2g")||navigator.connection.saveData)||a(function(){!function(){for(var t,e,n=document.querySelectorAll(".js-nav-main a"),s=0;s<n.length;s++)t=n[s].href,e=void 0,((e=document.createElement("link")).relList||{}).supports&&!e.relList.supports("prefetch")||(e.rel="prefetch",e.href=t,document.head.appendChild(e))}()})};Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var u;new i({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new i({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new i({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new i({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new i({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"}),new i({canvas:".js-sq-site-header",num_x:"infinite",num_y:1,size:5,color:"#1d4e6d",fill:"even"});function c(t){var e=document.querySelector(".js-site-content");e.innerHTML="",e.classList.add("site__content--hidden");var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){var t=document.createElement("div");200===this.status&&(t.innerHTML=this.response,e.innerHTML=t.querySelector(".js-site-content").innerHTML,e.classList.remove("site__content--hidden"))},n.onerror=function(){page_content.innerHTML="For some reason I couldn't connect to the server, please try later again."},n.send()}document.querySelector(".js-random-emoji")&&(document.querySelector(".js-random-emoji").textContent=(u=["ðŸ¤¤","ðŸ³","ðŸ»","ðŸ‘ŠðŸ»","ðŸ³"])[Math.round(Math.random()*(u.length-1))]),document.querySelector(".js-scroll-top")&&document.querySelector(".js-scroll-top").addEventListener("click",function(t){t.preventDefault(),document.querySelector(".js-logo").focus()}),o(),history.pushState({theme:"home"},location.pathname,location.pathname),document.querySelector(".js-post-list")&&document.querySelector(".js-post-list").addEventListener("click",function(t){t.preventDefault();var e=t.target.closest("a");e.dataset.post&&(document.documentElement.setAttribute("data-theme",e.dataset.post),history.pushState({theme:e.dataset.post},e.href,e.href),c(e.href))}),window.onpopstate=function(t){t.state&&(document.documentElement.setAttribute("data-theme",t.state.theme),c(location.pathname))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvc3F1YXJlcy5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc2NyaXB0cy9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvcHJlZmV0Y2gtbmF2LmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zY3JpcHRzL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3F1YXJlcyIsIm9wdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjb2xvciIsInNpemUiLCJwcm9wX3NldCIsIm51bV94IiwibnVtX3kiLCJpbml0X2NhbnZhcyIsInByZXBhcmVfY2FudmFzIiwiYXR0YWNoX2V2ZW50cyIsInBhdHRlcm4iLCJwYXJzZV9wYXR0ZXJuIiwiZmlsbCIsIm51bV9ib3hlcyIsIk1hdGgiLCJyb3VuZCIsImdldF9wYXJlbnRfd2lkdGgiLCJzcXVhcmVzIiwicHVzaCIsIngiLCJ5IiwiZHJhd19zcXVhcmVzIiwicGxhY2Vfc3F1YXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInhfcmF3IiwicGFnZVgiLCJ0YXJnZXQiLCJvZmZzZXRMZWZ0IiwieV9yYXciLCJwYWdlWSIsIm9mZnNldFRvcCIsImluZGV4IiwiZmluZEluZGV4IiwicG9zIiwic3BsaWNlIiwicHJvcCIsInJlbW92ZUF0dHJpYnV0ZSIsInBhcmVudF9zdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyZW50Tm9kZSIsInBhcmVudF93aWR0aCIsImNsaWVudFdpZHRoIiwicGFyc2VGbG9hdCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Iiwic3BsaXQiLCJsZW5ndGgiLCJib3giLCJwYXJzZUludCIsInRyaW0iLCJyb3ciLCJmbG9vciIsImNvbCIsImZpbGxTdHlsZSIsInNxdWFyZSIsImZpbGxSZWN0IiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNiIiwic3RhcnQiLCJEYXRlIiwibm93Iiwic2V0VGltZW91dCIsImRpZFRpbWVvdXQiLCJ0aW1lUmVtYWluaW5nIiwibWF4IiwicHJlZmV0Y2hOYXYiLCJuYXZpZ2F0b3IiLCJjb25uZWN0aW9uIiwiZWZmZWN0aXZlVHlwZSIsImluY2x1ZGVzIiwic2F2ZURhdGEiLCJ1cmwiLCJsaW5rIiwibGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaHJlZiIsImNyZWF0ZUVsZW1lbnQiLCJyZWxMaXN0Iiwic3VwcG9ydHMiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJnZXRMaW5rcyIsIkVsZW1lbnQiLCJjbG9zZXN0IiwiZWwiLCJkb2N1bWVudEVsZW1lbnQiLCJjb250YWlucyIsIm1hdGNoZXMiLCJwYXJlbnRFbGVtZW50Iiwibm9kZVR5cGUiLCJlbW9qaXMiLCJsb2FkUGFnZSIsIm1haW4iLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiY29udGFpbmVyIiwic3RhdHVzIiwicmVzcG9uc2UiLCJyZW1vdmUiLCJvbmVycm9yIiwicGFnZV9jb250ZW50Iiwic2VuZCIsInRleHRDb250ZW50IiwicmFuZG9tIiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJ0aGVtZSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJkYXRhc2V0IiwicG9zdCIsInNldEF0dHJpYnV0ZSIsIndpbmRvdyIsIm9ucG9wc3RhdGUiLCJzdGF0ZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FY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QVEsS0FFMUJaLEVBQUs2QyxRQUFRQyxPQUNmNUgsU0FBUzRGLGdCQUFnQmlDLGFBQWEsYUFBYy9DLEVBQUs2QyxRQUFRQyxNQUNqRU4sUUFBUUMsVUFBVSxDQUFFQyxNQUFPMUMsRUFBSzZDLFFBQVFDLE1BQVE5QyxFQUFLRyxLQUFNSCxFQUFLRyxNQUVoRWlCLEVBQVNwQixFQUFLRyxTQUtwQjZDLE9BQU9DLFdBQWEsU0FBU3JHLEdBQ3ZCQSxFQUFFc0csUUFDSmhJLFNBQVM0RixnQkFBZ0JpQyxhQUFhLGFBQWNuRyxFQUFFc0csTUFBTVIsT0FDNUR0QixFQUFTdUIsU0FBU0MiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjbGFzcyBTcXVhcmVzIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5jYW52YXMpO1xuXG4gICAgaWYgKCF0aGlzLmNhbnZhcykgcmV0dXJuO1xuXG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB0aGlzLmNvbG9yID0ncmVkJztcblxuICAgIHRoaXMuc2l6ZSA9IHRoaXMucHJvcF9zZXQob3B0aW9ucy5zaXplLCAyMCk7XG5cbiAgICB0aGlzLm51bV94ID0gb3B0aW9ucy5udW1feDtcbiAgICB0aGlzLm51bV95ID0gb3B0aW9ucy5udW1feTtcblxuICAgIHRoaXMuaW5pdF9jYW52YXMoKTtcbiAgfVxuXG4gIGluaXRfY2FudmFzKCkge1xuICAgIHRoaXMucHJlcGFyZV9jYW52YXMoKTtcbiAgICB0aGlzLmF0dGFjaF9ldmVudHMoKTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucGF0dGVybikge1xuICAgICAgdGhpcy5wYXJzZV9wYXR0ZXJuKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5maWxsKSB7XG4gICAgICBjb25zdCBudW1fYm94ZXMgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0X3BhcmVudF93aWR0aCgpIC8gdGhpcy5zaXplIC8gMik7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX2JveGVzOyBpKyspIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB0aGlzLnNpemUgKiAoMiAqIGkpLCB5OiAwIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRyYXdfc3F1YXJlcygpO1xuICAgIH1cbiAgfVxuXG4gIGF0dGFjaF9ldmVudHMoKSB7XG4gICAgdGhpcy5wbGFjZV9zcXVhcmUgPSB0aGlzLnBsYWNlX3NxdWFyZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wbGFjZV9zcXVhcmUpO1xuICB9XG5cbiAgcGxhY2Vfc3F1YXJlKGUpIHtcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICBjb25zdCB4X3JhdyA9IGUucGFnZVggLSBlLnRhcmdldC5vZmZzZXRMZWZ0O1xuICAgICAgY29uc3QgeV9yYXcgPSBlLnBhZ2VZIC0gZS50YXJnZXQub2Zmc2V0VG9wO1xuXG4gICAgICBsZXQgeCA9IHhfcmF3IC0geF9yYXcgJSB0aGlzLnNpemU7XG4gICAgICBsZXQgeSA9IHlfcmF3IC0geV9yYXcgJSB0aGlzLnNpemU7XG5cbiAgICAgIGlmICh5ID09PSB0aGlzLmNhbnZhcy5oZWlnaHQpIHtcbiAgICAgICAgeSAtPSB0aGlzLnNpemU7XG4gICAgICB9XG4gICAgICBpZiAoeCA9PT0gdGhpcy5jYW52YXMud2lkdGgpIHtcbiAgICAgICAgeCAtPSB0aGlzLnNpemU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zcXVhcmVzLmZpbmRJbmRleChwb3MgPT4gcG9zLnggPT09IHggJiBwb3MueSA9PT0geSk7XG5cbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB4LCB5OiB5fSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZHJhd19zcXVhcmVzKHRoaXMuY29udGV4dCwgdGhpcy5zcXVhcmVzKTtcbiAgfVxuXG4gIHByb3Bfc2V0KHByb3AsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHByb3AgPyBwcm9wIDogdmFsdWU7XG4gIH1cblxuICBwcmVwYXJlX2NhbnZhcygpIHtcbiAgICB0aGlzLmNhbnZhcy5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLm51bV94ICogdGhpcy5zaXplO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMubnVtX3kgKiB0aGlzLnNpemU7XG5cbiAgICBpZiAodGhpcy5udW1feCA9PT0gJ2luZmluaXRlJykgeyAgXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuZ2V0X3BhcmVudF93aWR0aCgpO1xuICAgIH1cblxuICAgIHRoaXMuc3F1YXJlcyA9IFtdO1xuICB9XG5cbiAgZ2V0X3BhcmVudF93aWR0aCgpIHtcbiAgICBjb25zdCBwYXJlbnRfc3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhbnZhcy5wYXJlbnROb2RlKTtcbiAgICBsZXQgcGFyZW50X3dpZHRoID0gdGhpcy5jYW52YXMucGFyZW50Tm9kZS5jbGllbnRXaWR0aDtcbiAgICBwYXJlbnRfd2lkdGggLT0gcGFyc2VGbG9hdChwYXJlbnRfc3R5bGVzLnBhZGRpbmdMZWZ0KSArIHBhcnNlRmxvYXQocGFyZW50X3N0eWxlcy5wYWRkaW5nUmlnaHQpO1xuXG4gICAgcmV0dXJuIHBhcmVudF93aWR0aDtcbiAgfVxuXG4gIHBhcnNlX3BhdHRlcm4oKSB7XG4gICAgY29uc3QgcGF0dGVybiA9IHRoaXMub3B0aW9ucy5wYXR0ZXJuLnNwbGl0KCcsJyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdHRlcm4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGJveCA9IHBhcnNlSW50KHBhdHRlcm5baV0udHJpbSgpKTtcbiAgICAgIGxldCByb3cgPSBNYXRoLmZsb29yKGkgLyB0aGlzLm51bV94KTtcbiAgICAgIGxldCBjb2wgPSAoaSArIHRoaXMubnVtX3gpICUgdGhpcy5udW1feDtcblxuICAgICAgaWYgKHRoaXMubnVtX3ggPT09ICdpbmZpbml0ZScpIHtcbiAgICAgICAgcm93ID0gMDtcbiAgICAgICAgY29sID0gaTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJveCkge1xuICAgICAgICB0aGlzLnNxdWFyZXMucHVzaCh7IHg6IHRoaXMuc2l6ZSAqIGNvbCwgeTogdGhpcy5zaXplICogcm93IH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZHJhd19zcXVhcmVzKCk7XG4gIH1cblxuICBkcmF3X3NxdWFyZXMoKSB7XG4gICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMucHJvcF9zZXQodGhpcy5vcHRpb25zLmNvbG9yLCAncmdiYSg1MSwgNTEsIDUxLCAwLjkpJyk7XG5cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zcXVhcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzcXVhcmUgPSB0aGlzLnNxdWFyZXNbaV07XG4gICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3Qoc3F1YXJlLngsIHNxdWFyZS55LCB0aGlzLnNpemUsIHRoaXMuc2l6ZSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNxdWFyZXM7XG5cblxuIiwiY29uc3QgcmVxdWVzdElkbGVDYWxsYmFjayA9IHJlcXVlc3RJZGxlQ2FsbGJhY2sgfHxcbiAgZnVuY3Rpb24gKGNiKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGNiKHtcbiAgICAgICAgZGlkVGltZW91dDogZmFsc2UsXG4gICAgICAgIHRpbWVSZW1haW5pbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgNTAgLSAoRGF0ZS5ub3coKSAtIHN0YXJ0KSk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9LCAxKTtcbiAgfTtcblxuZXhwb3J0IGRlZmF1bHQgcmVxdWVzdElkbGVDYWxsYmFjaztcbiIsIi8qKlxuICogSW5zcGlyZWQgYnkgcXVpY2tsaW5rLlxuICogaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZUxhYnMvcXVpY2tsaW5rXG4gKi9cbiBcbmltcG9ydCByZXF1ZXN0SWRsZUNhbGxiYWNrIGZyb20gJy4vcmVxdWVzdC1pZGxlLWNhbGxiYWNrLmpzJztcblxuZnVuY3Rpb24gY3JlYXRlUHJlZmV0Y2hMaW5rKHVybCkge1xuICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuXG4gIC8vIElmIHByZWZldGNoIHN1cHBvcnRlZCAgICBcbiAgaWYgKChsaW5rLnJlbExpc3QgfHwge30pLnN1cHBvcnRzICYmICFsaW5rLnJlbExpc3Quc3VwcG9ydHMoJ3ByZWZldGNoJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsaW5rLnJlbCA9ICdwcmVmZXRjaCc7XG4gIGxpbmsuaHJlZiA9IHVybDtcblxuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xufVxuXG5mdW5jdGlvbiBnZXRMaW5rcygpIHtcbiAgLy8gR2V0IGFsbCBsaW5rcyBpbiBtYWluIG5hdlxuICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1uYXYtbWFpbiBhJyk7XG5cbiAgZm9yKGxldCBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlUHJlZmV0Y2hMaW5rKGxpbmtzW2ldLmhyZWYpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByZWZldGNoTmF2KCkge1xuICAvLyBkb24ndCBwcmVmZXRjaCBpZiAyZyBjb25uZWN0aW9uIG9yIGRhdGEtc2F2ZXIgZW5hYmxlZFxuICBpZiAobmF2aWdhdG9yLmNvbm5lY3Rpb24pIHtcbiAgICBpZiAobmF2aWdhdG9yLmNvbm5lY3Rpb24uZWZmZWN0aXZlVHlwZS5pbmNsdWRlcygnMmcnKSB8fCBuYXZpZ2F0b3IuY29ubmVjdGlvbi5zYXZlRGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8vIHN0YXJ0IGFzIHNvb24gYXMgdGhlIGJyb3dzZXIgaXNuJ3QgYnVzeSBhbnltb3JlXG4gIHJlcXVlc3RJZGxlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdldExpbmtzKCk7XG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IHByZWZldGNoTmF2O1xuIiwiaW1wb3J0IFNxdWFyZXMgZnJvbSAnLi9zcXVhcmVzJztcbmltcG9ydCBwcmVmZXRjaE5hdiBmcm9tICcuL3ByZWZldGNoLW5hdic7XG5cbmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkge1xuICBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24ocykge1xuICAgIHZhciBlbCA9IHRoaXM7XG4gICAgaWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoZWwpKSByZXR1cm4gbnVsbDtcbiAgICBkbyB7XG4gICAgICBpZiAoZWwubWF0Y2hlcyhzKSkgcmV0dXJuIGVsO1xuICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50IHx8IGVsLnBhcmVudE5vZGU7XG4gICAgfSB3aGlsZSAoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDEpO1xuICAgIHJldHVybiBudWxsO1xuICB9O1xufVxuXG5jb25zdCBob21lX3RsID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtdGwnLFxuICBudW1feDogMSxcbiAgbnVtX3k6IDEsXG4gIHBhdHRlcm46ICcxJyxcbiAgY29sb3I6ICcjMzZCMUJGJ1xufSk7XG5cbmNvbnN0IGhvbWVfdHIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10cicsXG4gIG51bV94OiAyLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEsMScsXG4gIGNvbG9yOiAnIzM2QjFCRidcbn0pO1xuXG5jb25zdCBob21lX2JyID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtYnInLFxuICBudW1feDogMSxcbiAgbnVtX3k6IDIsXG4gIHBhdHRlcm46ICcxLDEnLFxuICBjb2xvcjogJyNGMjNDNTAnXG59KTtcblxuY29uc3QgaG9tZV9ibCA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLWJsJyxcbiAgbnVtX3g6IDIsXG4gIG51bV95OiAyLFxuICBwYXR0ZXJuOiAnMSwwLDEsMScsXG4gIGNvbG9yOiAnI0YyM0M1MCdcbn0pO1xuXG5jb25zdCBob21lX2ludHJvID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtaG9tZS1pbnRybycsXG4gIG51bV94OiA2LFxuICBudW1feTogNSxcbiAgY29sb3I6ICcjNTY4YjhlJyxcbiAgc2l6ZTogMTAsXG4gIHBhdHRlcm46IGAwLDAsMSwxLDAsMSxcbiAgICAwLDEsMSwwLDAsMSxcbiAgICAxLDEsMCwwLDAsMSxcbiAgICAwLDEsMSwwLDAsMCxcbiAgICAwLDAsMSwxLDAsMWBcbn0pO1xuXG5jb25zdCBzaXRlX2hlYWRlciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLXNpdGUtaGVhZGVyJyxcbiAgbnVtX3g6ICdpbmZpbml0ZScsXG4gIG51bV95OiAxLFxuICBzaXplOiA1LFxuICBjb2xvcjogJyMxZDRlNmQnLFxuICBmaWxsOiAnZXZlbidcbn0pO1xuXG4vKipcbiAqIFJhbmRvbSBlbW9qaVxuICovXG5cbmZ1bmN0aW9uIGdldFJhbmRvbUVtb2ppKCkge1xuICBjb25zdCBlbW9qaXMgPSBbJ/CfpKQnLCAn8J+QsycsICfwn427JywgJ/CfkYrwn4+7JywgJ/CfjbMnXTtcblxuICBjb25zdCBlbW9qaSA9IGVtb2ppc1tNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoZW1vamlzLmxlbmd0aCAtIDEpKV07XG4gIHJldHVybiBlbW9qaTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1yYW5kb20tZW1vamknKSkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcmFuZG9tLWVtb2ppJykudGV4dENvbnRlbnQgPSBnZXRSYW5kb21FbW9qaSgpO1xufVxuXG4vKipcbiAqIFNtb290aGx5IHNjcm9sbCB0byB0b3BcbiAqL1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNjcm9sbC10b3AnKSkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2Nyb2xsLXRvcCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1sb2dvJykuZm9jdXMoKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlZmV0Y2ggbGlua3MgaW4gbmF2IGZvciBiZXR0ZXIgcGVyY2VpdmVkIHBlcmZvcm1hbmNlXG4gKi9cblxucHJlZmV0Y2hOYXYoKTtcblxuaGlzdG9yeS5wdXNoU3RhdGUoeyB0aGVtZTogXCJob21lXCJ9LCBsb2NhdGlvbi5wYXRobmFtZSwgbG9jYXRpb24ucGF0aG5hbWUpO1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvc3QtbGlzdCcpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3N0LWxpc3QnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgbGluayA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcblxuICAgIGlmIChsaW5rLmRhdGFzZXQucG9zdCkge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIGxpbmsuZGF0YXNldC5wb3N0KTtcbiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHsgdGhlbWU6IGxpbmsuZGF0YXNldC5wb3N0IH0sIGxpbmsuaHJlZiwgbGluay5ocmVmKTtcblxuICAgICAgbG9hZFBhZ2UobGluay5ocmVmKTtcbiAgICB9XG4gIH0pO1xufVxuXG53aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUuc3RhdGUpIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgZS5zdGF0ZS50aGVtZSk7XG4gICAgbG9hZFBhZ2UobG9jYXRpb24ucGF0aG5hbWUpO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGxvYWRQYWdlKHVybCkge1xuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNpdGUtY29udGVudCcpO1xuICBtYWluLmlubmVySFRNTCA9ICcnO1xuICBtYWluLmNsYXNzTGlzdC5hZGQoJ3NpdGVfX2NvbnRlbnQtLWhpZGRlbicpO1xuXG4gIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMucmVzcG9uc2U7XG4gICAgICBtYWluLmlubmVySFRNTCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuanMtc2l0ZS1jb250ZW50JykuaW5uZXJIVE1MO1xuICAgICAgbWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdzaXRlX19jb250ZW50LS1oaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgcGFnZV9jb250ZW50LmlubmVySFRNTCA9ICdGb3Igc29tZSByZWFzb24gSSBjb3VsZG5cXCd0IGNvbm5lY3QgdG8gdGhlIHNlcnZlciwgcGxlYXNlIHRyeSBsYXRlciBhZ2Fpbi4nO1xuICB9O1xuXG4gIHJlcXVlc3Quc2VuZCgpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==