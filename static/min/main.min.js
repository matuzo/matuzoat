!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n(2),t.exports=n(1)},function(t,e,n){},function(t,e,n){"use strict";function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}n.r(e);var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.canvas=document.querySelector(e.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(e.size,20),this.num_x=e.num_x,this.num_y=e.num_y,this.init_canvas())}var e,n,i;return e=t,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var t=Math.round(this.get_parent_width()/this.size/2),e=0;e<t;e++)this.squares.push({x:this.size*(2*e),y:0});this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop,s=e-e%this.size,i=n-n%this.size;i===this.canvas.height&&(i-=this.size),s===this.canvas.width&&(s-=this.size);var r=this.squares.findIndex(function(t){return t.x===s&t.y===i});r>-1?this.squares.splice(r,1):this.squares.push({x:s,y:i}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(t,e){return t||e}},{key:"prepare_canvas",value:function(){this.canvas.removeAttribute("hidden"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var t=getComputedStyle(this.canvas.parentNode),e=this.canvas.parentNode.clientWidth;return e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}},{key:"parse_pattern",value:function(){for(var t=this.options.pattern.split(","),e=0;e<t.length;e++){var n=parseInt(t[e].trim()),s=Math.floor(e/this.num_x),i=(e+this.num_x)%this.num_x;"infinite"===this.num_x&&(s=0,i=e),n&&this.squares.push({x:this.size*i,y:this.size*s})}this.draw_squares()}},{key:"draw_squares",value:function(){this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var t=0;t<this.squares.length;t++){var e=this.squares[t];this.context.fillRect(e.x,e.y,this.size,this.size)}}}])&&s(e.prototype,n),i&&s(e,i),t}(),r=r||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},a=r;var o=function(){navigator.connection&&(navigator.connection.effectiveType.includes("2g")||navigator.connection.saveData)||a(function(){!function(){for(var t,e,n=document.querySelectorAll(".js-nav-main a"),s=0;s<n.length;s++)t=n[s].href,e=void 0,((e=document.createElement("link")).relList||{}).supports&&!e.relList.supports("prefetch")||(e.rel="prefetch",e.href=t,document.head.appendChild(e))}()})};Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var u;new i({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new i({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new i({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new i({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new i({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"}),new i({canvas:".js-sq-site-header",num_x:"infinite",num_y:1,size:5,color:"#1d4e6d",fill:"even"});function c(t){var e=document.querySelector(".js-site-content");e.innerHTML="",e.classList.add("site__content--hidden");var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){var t=document.createElement("div");200===this.status&&(t.innerHTML=this.response,e.innerHTML=t.querySelector(".js-site-content").innerHTML,e.classList.remove("site__content--hidden"))},n.onerror=function(){page_content.innerHTML="For some reason I couldn't connect to the server, please try later again."},n.send()}document.querySelector(".js-random-emoji")&&(document.querySelector(".js-random-emoji").textContent=(u=["🤤","🐳","🍻","👊🏻","🍳"])[Math.round(Math.random()*(u.length-1))]),document.querySelector(".js-scroll-top")&&document.querySelector(".js-scroll-top").addEventListener("click",function(t){t.preventDefault(),document.querySelector(".js-logo").focus()}),o(),history.pushState({theme:"home"},location.pathname,location.pathname),document.querySelector(".js-post-list")&&document.querySelector(".js-post-list").addEventListener("click",function(t){var e=t.target.closest("a");e.dataset.post&&(t.preventDefault(),document.documentElement.setAttribute("data-theme",e.dataset.post),history.pushState({theme:e.dataset.post},e.href,e.href),c(e.href))}),window.onpopstate=function(t){t.state&&(document.documentElement.setAttribute("data-theme",t.state.theme),c(location.pathname))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvc3F1YXJlcy5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc2NyaXB0cy9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvcHJlZmV0Y2gtbmF2LmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zY3JpcHRzL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3F1YXJlcyIsIm9wdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjb2xvciIsInNpemUiLCJwcm9wX3NldCIsIm51bV94IiwibnVtX3kiLCJpbml0X2NhbnZhcyIsInByZXBhcmVfY2FudmFzIiwiYXR0YWNoX2V2ZW50cyIsInBhdHRlcm4iLCJwYXJzZV9wYXR0ZXJuIiwiZmlsbCIsIm51bV9ib3hlcyIsIk1hdGgiLCJyb3VuZCIsImdldF9wYXJlbnRfd2lkdGgiLCJzcXVhcmVzIiwicHVzaCIsIngiLCJ5IiwiZHJhd19zcXVhcmVzIiwicGxhY2Vfc3F1YXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInhfcmF3IiwicGFnZVgiLCJ0YXJnZXQiLCJvZmZzZXRMZWZ0IiwieV9yYXciLCJwYWdlWSIsIm9mZnNldFRvcCIsImluZGV4IiwiZmluZEluZGV4IiwicG9zIiwic3BsaWNlIiwicHJvcCIsInJlbW92ZUF0dHJpYnV0ZSIsInBhcmVudF9zdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyZW50Tm9kZSIsInBhcmVudF93aWR0aCIsImNsaWVudFdpZHRoIiwicGFyc2VGbG9hdCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Iiwic3BsaXQiLCJsZW5ndGgiLCJib3giLCJwYXJzZUludCIsInRyaW0iLCJyb3ciLCJmbG9vciIsImNvbCIsImZpbGxTdHlsZSIsInNxdWFyZSIsImZpbGxSZWN0IiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNiIiwic3RhcnQiLCJEYXRlIiwibm93Iiwic2V0VGltZW91dCIsImRpZFRpbWVvdXQiLCJ0aW1lUmVtYWluaW5nIiwibWF4IiwicHJlZmV0Y2hOYXYiLCJuYXZpZ2F0b3IiLCJjb25uZWN0aW9uIiwiZWZmZWN0aXZlVHlwZSIsImluY2x1ZGVzIiwic2F2ZURhdGEiLCJ1cmwiLCJsaW5rIiwibGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaHJlZiIsImNyZWF0ZUVsZW1lbnQiLCJyZWxMaXN0Iiwic3VwcG9ydHMiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJnZXRMaW5rcyIsIkVsZW1lbnQiLCJjbG9zZXN0IiwiZWwiLCJkb2N1bWVudEVsZW1lbnQiLCJjb250YWlucyIsIm1hdGNoZXMiLCJwYXJlbnRFbGVtZW50Iiwibm9kZVR5cGUiLCJlbW9qaXMiLCJsb2FkUGFnZSIsIm1haW4iLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiY29udGFpbmVyIiwic3RhdHVzIiwicmVzcG9uc2UiLCJyZW1vdmUiLCJvbmVycm9yIiwicGFnZV9jb250ZW50Iiwic2VuZCIsInRleHRDb250ZW50IiwicmFuZG9tIiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJ0aGVtZSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJkYXRhc2V0IiwicG9zdCIsInNldEF0dHJpYnV0ZSIsIndpbmRvdyIsIm9ucG9wc3RhdGUiLCJzdGF0ZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FY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NkMsUUFBUUMsT0FDZmxHLEVBQUUwRixpQkFDRnBILFNBQVM0RixnQkFBZ0JpQyxhQUFhLGFBQWMvQyxFQUFLNkMsUUFBUUMsTUFDakVOLFFBQVFDLFVBQVUsQ0FBRUMsTUFBTzFDLEVBQUs2QyxRQUFRQyxNQUFROUMsRUFBS0csS0FBTUgsRUFBS0csTUFFaEVpQixFQUFTcEIsRUFBS0csU0FLcEI2QyxPQUFPQyxXQUFhLFNBQVNyRyxHQUN2QkEsRUFBRXNHLFFBQ0poSSxTQUFTNEYsZ0JBQWdCaUMsYUFBYSxhQUFjbkcsRUFBRXNHLE1BQU1SLE9BQzVEdEIsRUFBU3VCLFNBQVNDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY2xhc3MgU3F1YXJlcyB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuY2FudmFzKTtcblxuICAgIGlmICghdGhpcy5jYW52YXMpIHJldHVybjtcblxuICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5jb2xvciA9J3JlZCc7XG5cbiAgICB0aGlzLnNpemUgPSB0aGlzLnByb3Bfc2V0KG9wdGlvbnMuc2l6ZSwgMjApO1xuXG4gICAgdGhpcy5udW1feCA9IG9wdGlvbnMubnVtX3g7XG4gICAgdGhpcy5udW1feSA9IG9wdGlvbnMubnVtX3k7XG5cbiAgICB0aGlzLmluaXRfY2FudmFzKCk7XG4gIH1cblxuICBpbml0X2NhbnZhcygpIHtcbiAgICB0aGlzLnByZXBhcmVfY2FudmFzKCk7XG4gICAgdGhpcy5hdHRhY2hfZXZlbnRzKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdHRlcm4pIHtcbiAgICAgIHRoaXMucGFyc2VfcGF0dGVybigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmlsbCkge1xuICAgICAgY29uc3QgbnVtX2JveGVzID0gTWF0aC5yb3VuZCh0aGlzLmdldF9wYXJlbnRfd2lkdGgoKSAvIHRoaXMuc2l6ZSAvIDIpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9ib3hlczsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogKDIgKiBpKSwgeTogMCB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmF3X3NxdWFyZXMoKTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hfZXZlbnRzKCkge1xuICAgIHRoaXMucGxhY2Vfc3F1YXJlID0gdGhpcy5wbGFjZV9zcXVhcmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucGxhY2Vfc3F1YXJlKTtcbiAgfVxuXG4gIHBsYWNlX3NxdWFyZShlKSB7XG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgY29uc3QgeF9yYXcgPSBlLnBhZ2VYIC0gZS50YXJnZXQub2Zmc2V0TGVmdDtcbiAgICAgIGNvbnN0IHlfcmF3ID0gZS5wYWdlWSAtIGUudGFyZ2V0Lm9mZnNldFRvcDtcblxuICAgICAgbGV0IHggPSB4X3JhdyAtIHhfcmF3ICUgdGhpcy5zaXplO1xuICAgICAgbGV0IHkgPSB5X3JhdyAtIHlfcmF3ICUgdGhpcy5zaXplO1xuXG4gICAgICBpZiAoeSA9PT0gdGhpcy5jYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgIHkgLT0gdGhpcy5zaXplO1xuICAgICAgfVxuICAgICAgaWYgKHggPT09IHRoaXMuY2FudmFzLndpZHRoKSB7XG4gICAgICAgIHggLT0gdGhpcy5zaXplO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuc3F1YXJlcy5maW5kSW5kZXgocG9zID0+IHBvcy54ID09PSB4ICYgcG9zLnkgPT09IHkpO1xuXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLnNxdWFyZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogeCwgeTogeX0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRyYXdfc3F1YXJlcyh0aGlzLmNvbnRleHQsIHRoaXMuc3F1YXJlcyk7XG4gIH1cblxuICBwcm9wX3NldChwcm9wLCB2YWx1ZSkge1xuICAgIHJldHVybiBwcm9wID8gcHJvcCA6IHZhbHVlO1xuICB9XG5cbiAgcHJlcGFyZV9jYW52YXMoKSB7XG4gICAgdGhpcy5jYW52YXMucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcblxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5udW1feCAqIHRoaXMuc2l6ZTtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLm51bV95ICogdGhpcy5zaXplO1xuXG4gICAgaWYgKHRoaXMubnVtX3ggPT09ICdpbmZpbml0ZScpIHsgIFxuICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmdldF9wYXJlbnRfd2lkdGgoKTtcbiAgICB9XG5cbiAgICB0aGlzLnNxdWFyZXMgPSBbXTtcbiAgfVxuXG4gIGdldF9wYXJlbnRfd2lkdGgoKSB7XG4gICAgY29uc3QgcGFyZW50X3N0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5jYW52YXMucGFyZW50Tm9kZSk7XG4gICAgbGV0IHBhcmVudF93aWR0aCA9IHRoaXMuY2FudmFzLnBhcmVudE5vZGUuY2xpZW50V2lkdGg7XG4gICAgcGFyZW50X3dpZHRoIC09IHBhcnNlRmxvYXQocGFyZW50X3N0eWxlcy5wYWRkaW5nTGVmdCkgKyBwYXJzZUZsb2F0KHBhcmVudF9zdHlsZXMucGFkZGluZ1JpZ2h0KTtcblxuICAgIHJldHVybiBwYXJlbnRfd2lkdGg7XG4gIH1cblxuICBwYXJzZV9wYXR0ZXJuKCkge1xuICAgIGNvbnN0IHBhdHRlcm4gPSB0aGlzLm9wdGlvbnMucGF0dGVybi5zcGxpdCgnLCcpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXR0ZXJuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBib3ggPSBwYXJzZUludChwYXR0ZXJuW2ldLnRyaW0oKSk7XG4gICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihpIC8gdGhpcy5udW1feCk7XG4gICAgICBsZXQgY29sID0gKGkgKyB0aGlzLm51bV94KSAlIHRoaXMubnVtX3g7XG5cbiAgICAgIGlmICh0aGlzLm51bV94ID09PSAnaW5maW5pdGUnKSB7XG4gICAgICAgIHJvdyA9IDA7XG4gICAgICAgIGNvbCA9IGk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib3gpIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB0aGlzLnNpemUgKiBjb2wsIHk6IHRoaXMuc2l6ZSAqIHJvdyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmRyYXdfc3F1YXJlcygpO1xuICB9XG5cbiAgZHJhd19zcXVhcmVzKCkge1xuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnByb3Bfc2V0KHRoaXMub3B0aW9ucy5jb2xvciwgJ3JnYmEoNTEsIDUxLCA1MSwgMC45KScpO1xuXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3F1YXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc3F1YXJlID0gdGhpcy5zcXVhcmVzW2ldO1xuICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHNxdWFyZS54LCBzcXVhcmUueSwgdGhpcy5zaXplLCB0aGlzLnNpemUpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTcXVhcmVzO1xuXG5cbiIsImNvbnN0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgPSByZXF1ZXN0SWRsZUNhbGxiYWNrIHx8XG4gIGZ1bmN0aW9uIChjYikge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBjYih7XG4gICAgICAgIGRpZFRpbWVvdXQ6IGZhbHNlLFxuICAgICAgICB0aW1lUmVtYWluaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIDUwIC0gKERhdGUubm93KCkgLSBzdGFydCkpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSwgMSk7XG4gIH07XG5cbmV4cG9ydCBkZWZhdWx0IHJlcXVlc3RJZGxlQ2FsbGJhY2s7XG4iLCIvKipcbiAqIEluc3BpcmVkIGJ5IHF1aWNrbGluay5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWVMYWJzL3F1aWNrbGlua1xuICovXG4gXG5pbXBvcnQgcmVxdWVzdElkbGVDYWxsYmFjayBmcm9tICcuL3JlcXVlc3QtaWRsZS1jYWxsYmFjay5qcyc7XG5cbmZ1bmN0aW9uIGNyZWF0ZVByZWZldGNoTGluayh1cmwpIHtcbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcblxuICAvLyBJZiBwcmVmZXRjaCBzdXBwb3J0ZWQgICAgXG4gIGlmICgobGluay5yZWxMaXN0IHx8IHt9KS5zdXBwb3J0cyAmJiAhbGluay5yZWxMaXN0LnN1cHBvcnRzKCdwcmVmZXRjaCcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGluay5yZWwgPSAncHJlZmV0Y2gnO1xuICBsaW5rLmhyZWYgPSB1cmw7XG5cbiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbn1cblxuZnVuY3Rpb24gZ2V0TGlua3MoKSB7XG4gIC8vIEdldCBhbGwgbGlua3MgaW4gbWFpbiBuYXZcbiAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbmF2LW1haW4gYScpO1xuXG4gIGZvcihsZXQgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xuICAgIGNyZWF0ZVByZWZldGNoTGluayhsaW5rc1tpXS5ocmVmKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcmVmZXRjaE5hdigpIHtcbiAgLy8gZG9uJ3QgcHJlZmV0Y2ggaWYgMmcgY29ubmVjdGlvbiBvciBkYXRhLXNhdmVyIGVuYWJsZWRcbiAgaWYgKG5hdmlnYXRvci5jb25uZWN0aW9uKSB7XG4gICAgaWYgKG5hdmlnYXRvci5jb25uZWN0aW9uLmVmZmVjdGl2ZVR5cGUuaW5jbHVkZXMoJzJnJykgfHwgbmF2aWdhdG9yLmNvbm5lY3Rpb24uc2F2ZURhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvLyBzdGFydCBhcyBzb29uIGFzIHRoZSBicm93c2VyIGlzbid0IGJ1c3kgYW55bW9yZVxuICByZXF1ZXN0SWRsZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRMaW5rcygpO1xuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmZXRjaE5hdjtcbiIsImltcG9ydCBTcXVhcmVzIGZyb20gJy4vc3F1YXJlcyc7XG5pbXBvcnQgcHJlZmV0Y2hOYXYgZnJvbSAnLi9wcmVmZXRjaC1uYXYnO1xuXG5pZiAoIUVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QpIHtcbiAgRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgZWwgPSB0aGlzO1xuICAgIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGVsKSkgcmV0dXJuIG51bGw7XG4gICAgZG8ge1xuICAgICAgaWYgKGVsLm1hdGNoZXMocykpIHJldHVybiBlbDtcbiAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudCB8fCBlbC5wYXJlbnROb2RlO1xuICAgIH0gd2hpbGUgKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn1cblxuY29uc3QgaG9tZV90bCA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLXRsJyxcbiAgbnVtX3g6IDEsXG4gIG51bV95OiAxLFxuICBwYXR0ZXJuOiAnMScsXG4gIGNvbG9yOiAnIzM2QjFCRidcbn0pO1xuXG5jb25zdCBob21lX3RyID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtdHInLFxuICBudW1feDogMixcbiAgbnVtX3k6IDEsXG4gIHBhdHRlcm46ICcxLDEnLFxuICBjb2xvcjogJyMzNkIxQkYnXG59KTtcblxuY29uc3QgaG9tZV9iciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLWJyJyxcbiAgbnVtX3g6IDEsXG4gIG51bV95OiAyLFxuICBwYXR0ZXJuOiAnMSwxJyxcbiAgY29sb3I6ICcjRjIzQzUwJ1xufSk7XG5cbmNvbnN0IGhvbWVfYmwgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1ibCcsXG4gIG51bV94OiAyLFxuICBudW1feTogMixcbiAgcGF0dGVybjogJzEsMCwxLDEnLFxuICBjb2xvcjogJyNGMjNDNTAnXG59KTtcblxuY29uc3QgaG9tZV9pbnRybyA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLWhvbWUtaW50cm8nLFxuICBudW1feDogNixcbiAgbnVtX3k6IDUsXG4gIGNvbG9yOiAnIzU2OGI4ZScsXG4gIHNpemU6IDEwLFxuICBwYXR0ZXJuOiBgMCwwLDEsMSwwLDEsXG4gICAgMCwxLDEsMCwwLDEsXG4gICAgMSwxLDAsMCwwLDEsXG4gICAgMCwxLDEsMCwwLDAsXG4gICAgMCwwLDEsMSwwLDFgXG59KTtcblxuY29uc3Qgc2l0ZV9oZWFkZXIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1zaXRlLWhlYWRlcicsXG4gIG51bV94OiAnaW5maW5pdGUnLFxuICBudW1feTogMSxcbiAgc2l6ZTogNSxcbiAgY29sb3I6ICcjMWQ0ZTZkJyxcbiAgZmlsbDogJ2V2ZW4nXG59KTtcblxuLyoqXG4gKiBSYW5kb20gZW1vamlcbiAqL1xuXG5mdW5jdGlvbiBnZXRSYW5kb21FbW9qaSgpIHtcbiAgY29uc3QgZW1vamlzID0gWyfwn6SkJywgJ/CfkLMnLCAn8J+NuycsICfwn5GK8J+PuycsICfwn42zJ107XG5cbiAgY29uc3QgZW1vamkgPSBlbW9qaXNbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGVtb2ppcy5sZW5ndGggLSAxKSldO1xuICByZXR1cm4gZW1vamk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcmFuZG9tLWVtb2ppJykpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXJhbmRvbS1lbW9qaScpLnRleHRDb250ZW50ID0gZ2V0UmFuZG9tRW1vamkoKTtcbn1cblxuLyoqXG4gKiBTbW9vdGhseSBzY3JvbGwgdG8gdG9wXG4gKi9cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zY3JvbGwtdG9wJykpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNjcm9sbC10b3AnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbG9nbycpLmZvY3VzKCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFByZWZldGNoIGxpbmtzIGluIG5hdiBmb3IgYmV0dGVyIHBlcmNlaXZlZCBwZXJmb3JtYW5jZVxuICovXG5cbnByZWZldGNoTmF2KCk7XG5cbmhpc3RvcnkucHVzaFN0YXRlKHsgdGhlbWU6IFwiaG9tZVwifSwgbG9jYXRpb24ucGF0aG5hbWUsIGxvY2F0aW9uLnBhdGhuYW1lKTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3N0LWxpc3QnKSkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGxpbmsgPSBlLnRhcmdldC5jbG9zZXN0KCdhJyk7XG4gICAgaWYgKGxpbmsuZGF0YXNldC5wb3N0KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgbGluay5kYXRhc2V0LnBvc3QpO1xuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoeyB0aGVtZTogbGluay5kYXRhc2V0LnBvc3QgfSwgbGluay5ocmVmLCBsaW5rLmhyZWYpO1xuXG4gICAgICBsb2FkUGFnZShsaW5rLmhyZWYpO1xuICAgIH1cbiAgfSk7XG59XG5cbndpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZS5zdGF0ZSkge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCBlLnN0YXRlLnRoZW1lKTtcbiAgICBsb2FkUGFnZShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH1cbn07XG5cblxuZnVuY3Rpb24gbG9hZFBhZ2UodXJsKSB7XG4gIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2l0ZS1jb250ZW50Jyk7XG4gIG1haW4uaW5uZXJIVE1MID0gJyc7XG4gIG1haW4uY2xhc3NMaXN0LmFkZCgnc2l0ZV9fY29udGVudC0taGlkZGVuJyk7XG5cbiAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG5cbiAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIG1haW4uaW5uZXJIVE1MID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaXRlLWNvbnRlbnQnKS5pbm5lckhUTUw7XG4gICAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoJ3NpdGVfX2NvbnRlbnQtLWhpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICBwYWdlX2NvbnRlbnQuaW5uZXJIVE1MID0gJ0ZvciBzb21lIHJlYXNvbiBJIGNvdWxkblxcJ3QgY29ubmVjdCB0byB0aGUgc2VydmVyLCBwbGVhc2UgdHJ5IGxhdGVyIGFnYWluLic7XG4gIH07XG5cbiAgcmVxdWVzdC5zZW5kKCk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9