!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(2),e.exports=n(1)},function(e,t,n){},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.canvas=document.querySelector(t.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(t.size,20),this.num_x=t.num_x,this.num_y=t.num_y,this.init_canvas())}var t,n,o;return t=e,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var e=Math.round(this.get_parent_width()/this.size/2),t=0;t<e;t++)this.squares.push({x:this.size*(2*t),y:0});this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop,i=t-t%this.size,o=n-n%this.size;o===this.canvas.height&&(o-=this.size),i===this.canvas.width&&(i-=this.size);var s=this.squares.findIndex(function(e){return e.x===i&e.y===o});s>-1?this.squares.splice(s,1):this.squares.push({x:i,y:o}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(e,t){return e||t}},{key:"prepare_canvas",value:function(){this.canvas.removeAttribute("hidden"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var e=getComputedStyle(this.canvas.parentNode),t=this.canvas.parentNode.clientWidth;return t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}},{key:"parse_pattern",value:function(){for(var e=this.options.pattern.split(","),t=0;t<e.length;t++){var n=parseInt(e[t].trim()),i=Math.floor(t/this.num_x),o=(t+this.num_x)%this.num_x;"infinite"===this.num_x&&(i=0,o=t),n&&this.squares.push({x:this.size*o,y:this.size*i})}this.draw_squares()}},{key:"draw_squares",value:function(){this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var e=0;e<this.squares.length;e++){var t=this.squares[e];this.context.fillRect(t.x,t.y,this.size,this.size)}}}])&&i(t.prototype,n),o&&i(t,o),e}(),s=s||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},a=s;var r=function(){navigator.connection&&(navigator.connection.effectiveType.includes("2g")||navigator.connection.saveData)||a(function(){!function(){for(var e,t,n=document.querySelectorAll(".js-nav-main a"),i=0;i<n.length;i++)e=n[i].href,t=void 0,((t=document.createElement("link")).relList||{}).supports&&!t.relList.supports("prefetch")||(t.rel="prefetch",t.href=e,document.head.appendChild(t))}()})};n(3),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var u;new o({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new o({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new o({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new o({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new o({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"}),new o({canvas:".js-sq-site-header",num_x:"infinite",num_y:1,size:5,color:"#1d4e6d",fill:"even"});function c(e){var t=document.querySelector(".js-site-content");t.innerHTML="",t.classList.add("site__content--hidden");var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){var e=document.createElement("div");200===this.status&&(e.innerHTML=this.response,t.innerHTML=e.querySelector(".js-site-content").innerHTML,t.classList.remove("site__content--hidden"))},n.onerror=function(){page_content.innerHTML="For some reason I couldn't connect to the server, please try later again."},n.send()}document.querySelector(".js-random-emoji")&&(document.querySelector(".js-random-emoji").textContent=(u=["ðŸ¤¤","ðŸ³","ðŸ»","ðŸ‘ŠðŸ»","ðŸ³"])[Math.round(Math.random()*(u.length-1))]),document.querySelector(".js-scroll-top")&&document.querySelector(".js-scroll-top").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".js-logo").focus()}),r(),history.pushState({theme:"home"},location.pathname,location.pathname),document.querySelector(".js-post-list")&&document.querySelector(".js-post-list").addEventListener("click",function(e){var t=e.target.closest("a");t.dataset.post&&(e.preventDefault(),document.documentElement.setAttribute("data-theme",t.dataset.post),history.pushState({theme:t.dataset.post},t.href,t.href),c(t.href))}),window.onpopstate=function(e){e.state&&(document.documentElement.setAttribute("data-theme",e.state.theme),c(location.pathname))}},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}["interactive","complete"].indexOf(document.readyState)>=0?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function o(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function s(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function r(){document.addEventListener("mousemove",u),document.addEventListener("mousedown",u),document.addEventListener("mouseup",u),document.addEventListener("pointermove",u),document.addEventListener("pointerdown",u),document.addEventListener("pointerup",u),document.addEventListener("touchmove",u),document.addEventListener("touchstart",u),document.addEventListener("touchend",u)}function u(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",u),document.removeEventListener("pointermove",u),document.removeEventListener("pointerdown",u),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",u),document.removeEventListener("touchstart",u),document.removeEventListener("touchend",u))}document.addEventListener("keydown",function(t){o(document.activeElement)&&s(document.activeElement),e=!0},!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("focus",function(t){var n,a,r;o(t.target)&&((e||(n=t.target,a=n.type,"INPUT"==(r=n.tagName)&&i[a]&&!n.readOnly||"TEXTAREA"==r&&!n.readOnly||n.isContentEditable))&&s(t.target))},!0),document.addEventListener("blur",function(e){var i;o(e.target)&&((e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(i=e.target).hasAttribute("data-focus-visible-added")&&(i.classList.remove("focus-visible"),i.removeAttribute("data-focus-visible-added"))))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),r())},!0),r(),document.body.classList.add("js-focus-visible")})}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvc3F1YXJlcy5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc2NyaXB0cy9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvcHJlZmV0Y2gtbmF2LmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zY3JpcHRzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9mb2N1cy12aXNpYmxlL2Rpc3QvZm9jdXMtdmlzaWJsZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNxdWFyZXMiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiY29sb3IiLCJzaXplIiwicHJvcF9zZXQiLCJudW1feCIsIm51bV95IiwiaW5pdF9jYW52YXMiLCJwcmVwYXJlX2NhbnZhcyIsImF0dGFjaF9ldmVudHMiLCJwYXR0ZXJuIiwicGFyc2VfcGF0dGVybiIsImZpbGwiLCJudW1fYm94ZXMiLCJNYXRoIiwicm91bmQiLCJnZXRfcGFyZW50X3dpZHRoIiwic3F1YXJlcyIsInB1c2giLCJ4IiwieSIsImRyYXdfc3F1YXJlcyIsInBsYWNlX3NxdWFyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJ4X3JhdyIsInBhZ2VYIiwidGFyZ2V0Iiwib2Zmc2V0TGVmdCIsInlfcmF3IiwicGFnZVkiLCJvZmZzZXRUb3AiLCJpbmRleCIsImZpbmRJbmRleCIsInBvcyIsInNwbGljZSIsInByb3AiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXJlbnRfc3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcmVudE5vZGUiLCJwYXJlbnRfd2lkdGgiLCJjbGllbnRXaWR0aCIsInBhcnNlRmxvYXQiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsInNwbGl0IiwibGVuZ3RoIiwiYm94IiwicGFyc2VJbnQiLCJ0cmltIiwicm93IiwiZmxvb3IiLCJjb2wiLCJmaWxsU3R5bGUiLCJzcXVhcmUiLCJmaWxsUmVjdCIsInJlcXVlc3RJZGxlQ2FsbGJhY2siLCJjYiIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsInNldFRpbWVvdXQiLCJkaWRUaW1lb3V0IiwidGltZVJlbWFpbmluZyIsIm1heCIsInByZWZldGNoTmF2IiwibmF2aWdhdG9yIiwiY29ubmVjdGlvbiIsImVmZmVjdGl2ZVR5cGUiLCJpbmNsdWRlcyIsInNhdmVEYXRhIiwidXJsIiwibGluayIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImhyZWYiLCJjcmVhdGVFbGVtZW50IiwicmVsTGlzdCIsInN1cHBvcnRzIiwicmVsIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiZ2V0TGlua3MiLCJyZXF1aXJlIiwiRWxlbWVudCIsImNsb3Nlc3QiLCJlbCIsImRvY3VtZW50RWxlbWVudCIsImNvbnRhaW5zIiwibWF0Y2hlcyIsInBhcmVudEVsZW1lbnQiLCJub2RlVHlwZSIsImVtb2ppcyIsImxvYWRQYWdlIiwibWFpbiIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJjb250YWluZXIiLCJzdGF0dXMiLCJyZXNwb25zZSIsInJlbW92ZSIsIm9uZXJyb3IiLCJwYWdlX2NvbnRlbnQiLCJzZW5kIiwidGV4dENvbnRlbnQiLCJyYW5kb20iLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInRoZW1lIiwibG9jYXRpb24iLCJwYXRobmFtZSIsImRhdGFzZXQiLCJwb3N0Iiwic2V0QXR0cmlidXRlIiwid2luZG93Iiwib25wb3BzdGF0ZSIsInN0YXRlIiwiY2FsbGJhY2siLCJsb2FkZWQiLCJsb2FkIiwiaW5kZXhPZiIsInJlYWR5U3RhdGUiLCJvbkRPTVJlYWR5IiwiaGFkS2V5Ym9hcmRFdmVudCIsImhhZEZvY3VzVmlzaWJsZVJlY2VudGx5IiwiaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0IiwiaW5wdXRUeXBlc1doaXRlbGlzdCIsInRleHQiLCJzZWFyY2giLCJ0ZWwiLCJlbWFpbCIsInBhc3N3b3JkIiwibnVtYmVyIiwiZGF0ZSIsIm1vbnRoIiwid2VlayIsInRpbWUiLCJkYXRldGltZSIsImRhdGV0aW1lLWxvY2FsIiwiaXNWYWxpZEZvY3VzVGFyZ2V0Iiwibm9kZU5hbWUiLCJhZGRGb2N1c1Zpc2libGVDbGFzcyIsIm9uUG9pbnRlckRvd24iLCJhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMiLCJvbkluaXRpYWxQb2ludGVyTW92ZSIsInRvTG93ZXJDYXNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFjdGl2ZUVsZW1lbnQiLCJ0eXBlIiwidGFnTmFtZSIsInJlYWRPbmx5IiwiaXNDb250ZW50RWRpdGFibGUiLCJoYXNBdHRyaWJ1dGUiLCJjbGVhclRpbWVvdXQiLCJ2aXNpYmlsaXR5U3RhdGUiLCJib2R5IiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUEsMFFDNENlQyxhQTdIYixTQUFBQSxFQUFZQyxnR0FBU0MsQ0FBQUMsS0FBQUgsR0FDbkJHLEtBQUtGLFFBQVVBLEVBRWZFLEtBQUtDLE9BQVNDLFNBQVNDLGNBQWNMLEVBQVFHLFFBRXhDRCxLQUFLQyxTQUVWRCxLQUFLSSxRQUFVSixLQUFLQyxPQUFPSSxXQUFXLE1BQ3RDTCxLQUFLTSxNQUFPLE1BRVpOLEtBQUtPLEtBQU9QLEtBQUtRLFNBQVNWLEVBQVFTLEtBQU0sSUFFeENQLEtBQUtTLE1BQVFYLEVBQVFXLE1BQ3JCVCxLQUFLVSxNQUFRWixFQUFRWSxNQUVyQlYsS0FBS1csNEVBV0wsR0FQQVgsS0FBS1ksaUJBQ0xaLEtBQUthLGdCQUVEYixLQUFLRixRQUFRZ0IsU0FDZmQsS0FBS2UsZ0JBR0hmLEtBQUtGLFFBQVFrQixLQUFNLENBR3JCLElBRkEsSUFBTUMsRUFBWUMsS0FBS0MsTUFBTW5CLEtBQUtvQixtQkFBcUJwQixLQUFLTyxLQUFPLEdBRTFEMUMsRUFBSSxFQUFHQSxFQUFJb0QsRUFBV3BELElBQzdCbUMsS0FBS3FCLFFBQVFDLEtBQUssQ0FBRUMsRUFBR3ZCLEtBQUtPLE1BQVEsRUFBSTFDLEdBQUkyRCxFQUFHLElBR2pEeEIsS0FBS3lCLHdEQUtQekIsS0FBSzBCLGFBQWUxQixLQUFLMEIsYUFBYXJDLEtBQUtXLE1BQzNDQSxLQUFLQyxPQUFPMEIsaUJBQWlCLFFBQVMzQixLQUFLMEIsbURBR2hDRSxHQUNYNUIsS0FBS0ksUUFBUXlCLFVBQVUsRUFBRyxFQUFHN0IsS0FBS0MsT0FBTzZCLE1BQU85QixLQUFLQyxPQUFPOEIsUUFFMUQsSUFBTUMsRUFBUUosRUFBRUssTUFBUUwsRUFBRU0sT0FBT0MsV0FDM0JDLEVBQVFSLEVBQUVTLE1BQVFULEVBQUVNLE9BQU9JLFVBRTdCZixFQUFJUyxFQUFRQSxFQUFRaEMsS0FBS08sS0FDekJpQixFQUFJWSxFQUFRQSxFQUFRcEMsS0FBS08sS0FFekJpQixJQUFNeEIsS0FBS0MsT0FBTzhCLFNBQ3BCUCxHQUFLeEIsS0FBS08sTUFFUmdCLElBQU12QixLQUFLQyxPQUFPNkIsUUFDcEJQLEdBQUt2QixLQUFLTyxNQUdaLElBQU1nQyxFQUFRdkMsS0FBS3FCLFFBQVFtQixVQUFVLFNBQUFDLEdBQUcsT0FBSUEsRUFBSWxCLElBQU1BLEVBQUlrQixFQUFJakIsSUFBTUEsSUFFaEVlLEdBQVMsRUFDWHZDLEtBQUtxQixRQUFRcUIsT0FBT0gsRUFBTyxHQUUzQnZDLEtBQUtxQixRQUFRQyxLQUFLLENBQUVDLEVBQUdBLEVBQUdDLEVBQUdBLElBRy9CeEIsS0FBS3lCLGFBQWF6QixLQUFLSSxRQUFTSixLQUFLcUIsMENBR2hDc0IsRUFBTTdELEdBQ2IsT0FBTzZELEdBQWM3RCwyQ0FJckJrQixLQUFLQyxPQUFPMkMsZ0JBQWdCLFVBRTVCNUMsS0FBS0MsT0FBTzZCLE1BQVE5QixLQUFLUyxNQUFRVCxLQUFLTyxLQUN0Q1AsS0FBS0MsT0FBTzhCLE9BQVMvQixLQUFLVSxNQUFRVixLQUFLTyxLQUVwQixhQUFmUCxLQUFLUyxRQUNQVCxLQUFLQyxPQUFPNkIsTUFBUTlCLEtBQUtvQixvQkFHM0JwQixLQUFLcUIsUUFBVSw4Q0FJZixJQUFNd0IsRUFBZ0JDLGlCQUFpQjlDLEtBQUtDLE9BQU84QyxZQUMvQ0MsRUFBZWhELEtBQUtDLE9BQU84QyxXQUFXRSxZQUcxQyxPQUZBRCxHQUFnQkUsV0FBV0wsRUFBY00sYUFBZUQsV0FBV0wsRUFBY08sc0RBUWpGLElBRkEsSUFBTXRDLEVBQVVkLEtBQUtGLFFBQVFnQixRQUFRdUMsTUFBTSxLQUVsQ3hGLEVBQUksRUFBR0EsRUFBSWlELEVBQVF3QyxPQUFRekYsSUFBSyxDQUN2QyxJQUFNMEYsRUFBTUMsU0FBUzFDLEVBQVFqRCxHQUFHNEYsUUFDNUJDLEVBQU14QyxLQUFLeUMsTUFBTTlGLEVBQUltQyxLQUFLUyxPQUMxQm1ELEdBQU8vRixFQUFJbUMsS0FBS1MsT0FBU1QsS0FBS1MsTUFFZixhQUFmVCxLQUFLUyxRQUNQaUQsRUFBTSxFQUNORSxFQUFNL0YsR0FHSjBGLEdBQ0Z2RCxLQUFLcUIsUUFBUUMsS0FBSyxDQUFFQyxFQUFHdkIsS0FBS08sS0FBT3FELEVBQUtwQyxFQUFHeEIsS0FBS08sS0FBT21ELElBSTNEMUQsS0FBS3lCLHNEQUlMekIsS0FBS0ksUUFBUXlELFVBQVk3RCxLQUFLUSxTQUFTUixLQUFLRixRQUFRUSxNQUFPLHlCQUUzRCxJQUFJLElBQUl6QyxFQUFJLEVBQUdBLEVBQUltQyxLQUFLcUIsUUFBUWlDLE9BQVF6RixJQUFLLENBQzNDLElBQU1pRyxFQUFTOUQsS0FBS3FCLFFBQVF4RCxHQUM1Qm1DLEtBQUtJLFFBQVEyRCxTQUFTRCxFQUFPdkMsRUFBR3VDLEVBQU90QyxFQUFHeEIsS0FBS08sS0FBTVAsS0FBS08sNENDekgxRHlELEVBQXNCQSxHQUMxQixTQUFVQyxHQUNSLElBQU1DLEVBQVFDLEtBQUtDLE1BQ25CLE9BQU9DLFdBQVcsV0FDaEJKLEVBQUcsQ0FDREssWUFBWSxFQUNaQyxjQUFlLFdBQ2IsT0FBT3JELEtBQUtzRCxJQUFJLEVBQUcsSUFBTUwsS0FBS0MsTUFBUUYsUUFHekMsSUFHUUYsSUMrQkFTLE1BZGYsV0FFTUMsVUFBVUMsYUFDUkQsVUFBVUMsV0FBV0MsY0FBY0MsU0FBUyxPQUFTSCxVQUFVQyxXQUFXRyxXQU1oRmQsRUFBb0IsWUFsQnRCLFdBSUUsSUFGQSxJQWhCMEJlLEVBQ3BCQyxFQWVBQyxFQUFRL0UsU0FBU2dGLGlCQUFpQixrQkFFaENySCxFQUFJLEVBQUdBLEVBQUlvSCxFQUFNM0IsT0FBUXpGLElBbEJQa0gsRUFtQkxFLEVBQU1wSCxHQUFHc0gsS0FsQnhCSCxhQUFPOUUsU0FBU2tGLGNBQWMsU0FHMUJDLFNBQVcsSUFBSUMsV0FBYU4sRUFBS0ssUUFBUUMsU0FBUyxjQUk1RE4sRUFBS08sSUFBTSxXQUNYUCxFQUFLRyxLQUFPSixFQUVaN0UsU0FBU3NGLEtBQUtDLFlBQVlULElBc0J4QlUsTUN0Q0pDLEVBQVEsR0FFSEMsUUFBUW5HLFVBQVVvRyxVQUNyQkQsUUFBUW5HLFVBQVVvRyxRQUFVLFNBQVNqRyxHQUNuQyxJQUFJa0csRUFBSzlGLEtBQ1QsSUFBS0UsU0FBUzZGLGdCQUFnQkMsU0FBU0YsR0FBSyxPQUFPLEtBQ25ELEVBQUcsQ0FDRCxHQUFJQSxFQUFHRyxRQUFRckcsR0FBSSxPQUFPa0csRUFDMUJBLEVBQUtBLEVBQUdJLGVBQWlCSixFQUFHL0MsaUJBQ2QsT0FBUCtDLEdBQStCLElBQWhCQSxFQUFHSyxVQUMzQixPQUFPLE9BSVgsSUEyRFFDLEVBM0RRLElBQUl2RyxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLElBQ1RSLE1BQU8sWUFHTyxJQUFJVCxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLE1BQ1RSLE1BQU8sWUFHTyxJQUFJVCxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLE1BQ1RSLE1BQU8sWUFHTyxJQUFJVCxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLFVBQ1RSLE1BQU8sWUFHVSxJQUFJVCxFQUFRLENBQzdCSSxPQUFRLG9CQUNSUSxNQUFPLEVBQ1BDLE1BQU8sRUFDUEosTUFBTyxVQUNQQyxLQUFNLEdBQ05PLFFBQU8sd0ZBT1csSUFBSWpCLEVBQVEsQ0FDOUJJLE9BQVEscUJBQ1JRLE1BQU8sV0FDUEMsTUFBTyxFQUNQSCxLQUFNLEVBQ05ELE1BQU8sVUFDUFUsS0FBTSxTQTBEUixTQUFTcUYsRUFBU3RCLEdBQ2hCLElBQU11QixFQUFPcEcsU0FBU0MsY0FBYyxvQkFDcENtRyxFQUFLQyxVQUFZLEdBQ2pCRCxFQUFLRSxVQUFVQyxJQUFJLHlCQUVuQixJQUFJQyxFQUFVLElBQUlDLGVBRWxCRCxFQUFRRSxLQUFLLE1BQU83QixHQUFLLEdBRXpCMkIsRUFBUUcsT0FBUyxXQUNmLElBQU1DLEVBQVk1RyxTQUFTa0YsY0FBYyxPQUVyQixNQUFoQnBGLEtBQUsrRyxTQUNQRCxFQUFVUCxVQUFZdkcsS0FBS2dILFNBQzNCVixFQUFLQyxVQUFZTyxFQUFVM0csY0FBYyxvQkFBb0JvRyxVQUM3REQsRUFBS0UsVUFBVVMsT0FBTywyQkFJMUJQLEVBQVFRLFFBQVUsV0FDaEJDLGFBQWFaLFVBQVksNkVBRzNCRyxFQUFRVSxPQW5FTmxILFNBQVNDLGNBQWMsc0JBQ3pCRCxTQUFTQyxjQUFjLG9CQUFvQmtILGFBUHJDakIsRUFBUyxDQUFDLEtBQU0sS0FBTSxLQUFNLE9BQVEsT0FFckJsRixLQUFLQyxNQUFNRCxLQUFLb0csVUFBWWxCLEVBQU85QyxPQUFTLE1BWS9EcEQsU0FBU0MsY0FBYyxtQkFDekJELFNBQVNDLGNBQWMsa0JBQWtCd0IsaUJBQWlCLFFBQVMsU0FBQUMsR0FDakVBLEVBQUUyRixpQkFDRnJILFNBQVNDLGNBQWMsWUFBWXFILFVBUXZDL0MsSUFFQWdELFFBQVFDLFVBQVUsQ0FBRUMsTUFBTyxRQUFTQyxTQUFTQyxTQUFVRCxTQUFTQyxVQUU1RDNILFNBQVNDLGNBQWMsa0JBQ3pCRCxTQUFTQyxjQUFjLGlCQUFpQndCLGlCQUFpQixRQUFTLFNBQUNDLEdBQ2pFLElBQU1vRCxFQUFPcEQsRUFBRU0sT0FBTzJELFFBQVEsS0FDMUJiLEVBQUs4QyxRQUFRQyxPQUNmbkcsRUFBRTJGLGlCQUNGckgsU0FBUzZGLGdCQUFnQmlDLGFBQWEsYUFBY2hELEVBQUs4QyxRQUFRQyxNQUNqRU4sUUFBUUMsVUFBVSxDQUFFQyxNQUFPM0MsRUFBSzhDLFFBQVFDLE1BQVEvQyxFQUFLRyxLQUFNSCxFQUFLRyxNQUVoRWtCLEVBQVNyQixFQUFLRyxTQUtwQjhDLE9BQU9DLFdBQWEsU0FBU3RHLEdBQ3ZCQSxFQUFFdUcsUUFDSmpJLFNBQVM2RixnQkFBZ0JpQyxhQUFhLGFBQWNwRyxFQUFFdUcsTUFBTVIsT0FDNUR0QixFQUFTdUIsU0FBU0MsOEJDcEhyQixXQUFxQixhQWlSdEIsb0JBQUEzSCxVQXZCQSxTQUFBa0ksR0FDQSxJQUFBQyxFQUtBLFNBQUFDLElBQ0FELElBQ0FBLEdBQUEsRUFFQUQsS0FJQSwyQkFBQUcsUUFBQXJJLFNBQUFzSSxhQUFBLEVBQ0FKLEtBRUFDLEdBQUEsRUFDQW5JLFNBQUF5QixpQkFBQSxtQkFBQTJHLEdBQUEsR0FDQUwsT0FBQXRHLGlCQUFBLE9BQUEyRyxHQUFBLElBS0FHLENBN1FBLFdBQ0EsSUFBQUMsR0FBQSxFQUNBQyxHQUFBLEVBQ0FDLEVBQUEsS0FFQUMsRUFBQSxDQUNBQyxNQUFBLEVBQ0FDLFFBQUEsRUFDQWhFLEtBQUEsRUFDQWlFLEtBQUEsRUFDQUMsT0FBQSxFQUNBQyxVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsTUFBQSxFQUNBQyxPQUFBLEVBQ0FDLE1BQUEsRUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLGtCQUFBLEdBUUEsU0FBQUMsRUFBQTVELEdBQ0EsU0FDQUEsR0FDQUEsSUFBQTVGLFVBQ0EsU0FBQTRGLEVBQUE2RCxVQUNBLFNBQUE3RCxFQUFBNkQsVUFDQSxjQUFBN0QsR0FDQSxhQUFBQSxFQUFBVSxXQXNDQSxTQUFBb0QsRUFBQTlELEdBQ0FBLEVBQUFVLFVBQUFSLFNBQUEsbUJBR0FGLEVBQUFVLFVBQUFDLElBQUEsaUJBQ0FYLEVBQUFrQyxhQUFBLGdDQXNDQSxTQUFBNkIsRUFBQWpJLEdBQ0E4RyxHQUFBLEVBd0VBLFNBQUFvQixJQUNBNUosU0FBQXlCLGlCQUFBLFlBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLFlBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLFVBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLGNBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLGNBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLFlBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLFlBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLGFBQUFvSSxHQUNBN0osU0FBQXlCLGlCQUFBLFdBQUFvSSxHQXNCQSxTQUFBQSxFQUFBbkksR0FHQSxTQUFBQSxFQUFBTSxPQUFBeUgsU0FBQUssZ0JBSUF0QixHQUFBLEVBekJBeEksU0FBQStKLG9CQUFBLFlBQUFGLEdBQ0E3SixTQUFBK0osb0JBQUEsWUFBQUYsR0FDQTdKLFNBQUErSixvQkFBQSxVQUFBRixHQUNBN0osU0FBQStKLG9CQUFBLGNBQUFGLEdBQ0E3SixTQUFBK0osb0JBQUEsY0FBQUYsR0FDQTdKLFNBQUErSixvQkFBQSxZQUFBRixHQUNBN0osU0FBQStKLG9CQUFBLFlBQUFGLEdBQ0E3SixTQUFBK0osb0JBQUEsYUFBQUYsR0FDQTdKLFNBQUErSixvQkFBQSxXQUFBRixJQXFCQTdKLFNBQUF5QixpQkFBQSxVQW5JQSxTQUFBQyxHQUNBOEgsRUFBQXhKLFNBQUFnSyxnQkFDQU4sRUFBQTFKLFNBQUFnSyxlQUdBeEIsR0FBQSxJQThIQSxHQUNBeEksU0FBQXlCLGlCQUFBLFlBQUFrSSxHQUFBLEdBQ0EzSixTQUFBeUIsaUJBQUEsY0FBQWtJLEdBQUEsR0FDQTNKLFNBQUF5QixpQkFBQSxhQUFBa0ksR0FBQSxHQUNBM0osU0FBQXlCLGlCQUFBLFFBNUdBLFNBQUFDLEdBOUVBLElBQUFrRSxFQUNBcUUsRUFDQUMsRUE4RUFWLEVBQUE5SCxFQUFBTSxXQUlBd0csSUFwRkE1QyxFQW9GQWxFLEVBQUFNLE9BbkZBaUksRUFBQXJFLEVBQUFxRSxLQUdBLFVBRkFDLEVBQUF0RSxFQUFBc0UsVUFFQXZCLEVBQUFzQixLQUFBckUsRUFBQXVFLFVBSUEsWUFBQUQsSUFBQXRFLEVBQUF1RSxVQUlBdkUsRUFBQXdFLHFCQXlFQVYsRUFBQWhJLEVBQUFNLFdBcUdBLEdBQ0FoQyxTQUFBeUIsaUJBQUEsT0E5RkEsU0FBQUMsR0F4REEsSUFBQWtFLEVBeURBNEQsRUFBQTlILEVBQUFNLFdBS0FOLEVBQUFNLE9BQUFzRSxVQUFBUixTQUFBLGtCQUNBcEUsRUFBQU0sT0FBQXFJLGFBQUEsK0JBTUE1QixHQUFBLEVBQ0FWLE9BQUF1QyxhQUFBNUIsR0FDQUEsRUFBQVgsT0FBQTVELFdBQUEsV0FDQXNFLEdBQUEsRUFDQVYsT0FBQXVDLGFBQUE1QixJQUNTLE1BMUVUOUMsRUEyRUFsRSxFQUFBTSxRQTFFQXFJLGFBQUEsOEJBR0F6RSxFQUFBVSxVQUFBUyxPQUFBLGlCQUNBbkIsRUFBQWxELGdCQUFBLGlDQWlKQSxHQUNBMUMsU0FBQXlCLGlCQUFBLG1CQW5FQSxTQUFBQyxHQUNBLFVBQUExQixTQUFBdUssa0JBS0E5QixJQUNBRCxHQUFBLEdBRUFvQixPQTBEQSxHQUNBQSxJQUVBNUosU0FBQXdLLEtBQUFsRSxVQUFBQyxJQUFBLHNCQXRQOERrRSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNsYXNzIFNxdWFyZXMge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmNhbnZhcyk7XG5cbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm47XG5cbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHRoaXMuY29sb3IgPSdyZWQnO1xuXG4gICAgdGhpcy5zaXplID0gdGhpcy5wcm9wX3NldChvcHRpb25zLnNpemUsIDIwKTtcblxuICAgIHRoaXMubnVtX3ggPSBvcHRpb25zLm51bV94O1xuICAgIHRoaXMubnVtX3kgPSBvcHRpb25zLm51bV95O1xuXG4gICAgdGhpcy5pbml0X2NhbnZhcygpO1xuICB9XG5cbiAgaW5pdF9jYW52YXMoKSB7XG4gICAgdGhpcy5wcmVwYXJlX2NhbnZhcygpO1xuICAgIHRoaXMuYXR0YWNoX2V2ZW50cygpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5wYXR0ZXJuKSB7XG4gICAgICB0aGlzLnBhcnNlX3BhdHRlcm4oKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmZpbGwpIHtcbiAgICAgIGNvbnN0IG51bV9ib3hlcyA9IE1hdGgucm91bmQodGhpcy5nZXRfcGFyZW50X3dpZHRoKCkgLyB0aGlzLnNpemUgLyAyKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1fYm94ZXM7IGkrKykge1xuICAgICAgICB0aGlzLnNxdWFyZXMucHVzaCh7IHg6IHRoaXMuc2l6ZSAqICgyICogaSksIHk6IDAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZHJhd19zcXVhcmVzKCk7XG4gICAgfVxuICB9XG5cbiAgYXR0YWNoX2V2ZW50cygpIHtcbiAgICB0aGlzLnBsYWNlX3NxdWFyZSA9IHRoaXMucGxhY2Vfc3F1YXJlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnBsYWNlX3NxdWFyZSk7XG4gIH1cblxuICBwbGFjZV9zcXVhcmUoZSkge1xuICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cbiAgICAgIGNvbnN0IHhfcmF3ID0gZS5wYWdlWCAtIGUudGFyZ2V0Lm9mZnNldExlZnQ7XG4gICAgICBjb25zdCB5X3JhdyA9IGUucGFnZVkgLSBlLnRhcmdldC5vZmZzZXRUb3A7XG5cbiAgICAgIGxldCB4ID0geF9yYXcgLSB4X3JhdyAlIHRoaXMuc2l6ZTtcbiAgICAgIGxldCB5ID0geV9yYXcgLSB5X3JhdyAlIHRoaXMuc2l6ZTtcblxuICAgICAgaWYgKHkgPT09IHRoaXMuY2FudmFzLmhlaWdodCkge1xuICAgICAgICB5IC09IHRoaXMuc2l6ZTtcbiAgICAgIH1cbiAgICAgIGlmICh4ID09PSB0aGlzLmNhbnZhcy53aWR0aCkge1xuICAgICAgICB4IC09IHRoaXMuc2l6ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNxdWFyZXMuZmluZEluZGV4KHBvcyA9PiBwb3MueCA9PT0geCAmIHBvcy55ID09PSB5KTtcblxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNxdWFyZXMucHVzaCh7IHg6IHgsIHk6IHl9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmF3X3NxdWFyZXModGhpcy5jb250ZXh0LCB0aGlzLnNxdWFyZXMpO1xuICB9XG5cbiAgcHJvcF9zZXQocHJvcCwgdmFsdWUpIHtcbiAgICByZXR1cm4gcHJvcCA/IHByb3AgOiB2YWx1ZTtcbiAgfVxuXG4gIHByZXBhcmVfY2FudmFzKCkge1xuICAgIHRoaXMuY2FudmFzLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMubnVtX3ggKiB0aGlzLnNpemU7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5udW1feSAqIHRoaXMuc2l6ZTtcblxuICAgIGlmICh0aGlzLm51bV94ID09PSAnaW5maW5pdGUnKSB7ICBcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5nZXRfcGFyZW50X3dpZHRoKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zcXVhcmVzID0gW107XG4gIH1cblxuICBnZXRfcGFyZW50X3dpZHRoKCkge1xuICAgIGNvbnN0IHBhcmVudF9zdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY2FudmFzLnBhcmVudE5vZGUpO1xuICAgIGxldCBwYXJlbnRfd2lkdGggPSB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLmNsaWVudFdpZHRoO1xuICAgIHBhcmVudF93aWR0aCAtPSBwYXJzZUZsb2F0KHBhcmVudF9zdHlsZXMucGFkZGluZ0xlZnQpICsgcGFyc2VGbG9hdChwYXJlbnRfc3R5bGVzLnBhZGRpbmdSaWdodCk7XG5cbiAgICByZXR1cm4gcGFyZW50X3dpZHRoO1xuICB9XG5cbiAgcGFyc2VfcGF0dGVybigpIHtcbiAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5vcHRpb25zLnBhdHRlcm4uc3BsaXQoJywnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYm94ID0gcGFyc2VJbnQocGF0dGVybltpXS50cmltKCkpO1xuICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoaSAvIHRoaXMubnVtX3gpO1xuICAgICAgbGV0IGNvbCA9IChpICsgdGhpcy5udW1feCkgJSB0aGlzLm51bV94O1xuXG4gICAgICBpZiAodGhpcy5udW1feCA9PT0gJ2luZmluaXRlJykge1xuICAgICAgICByb3cgPSAwO1xuICAgICAgICBjb2wgPSBpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYm94KSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogY29sLCB5OiB0aGlzLnNpemUgKiByb3cgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3X3NxdWFyZXMoKTtcbiAgfVxuXG4gIGRyYXdfc3F1YXJlcygpIHtcbiAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5wcm9wX3NldCh0aGlzLm9wdGlvbnMuY29sb3IsICdyZ2JhKDUxLCA1MSwgNTEsIDAuOSknKTtcblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnNxdWFyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IHRoaXMuc3F1YXJlc1tpXTtcbiAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdChzcXVhcmUueCwgc3F1YXJlLnksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3F1YXJlcztcblxuXG4iLCJjb25zdCByZXF1ZXN0SWRsZUNhbGxiYWNrID0gcmVxdWVzdElkbGVDYWxsYmFjayB8fFxuICBmdW5jdGlvbiAoY2IpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgY2Ioe1xuICAgICAgICBkaWRUaW1lb3V0OiBmYWxzZSxcbiAgICAgICAgdGltZVJlbWFpbmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCA1MCAtIChEYXRlLm5vdygpIC0gc3RhcnQpKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sIDEpO1xuICB9O1xuXG5leHBvcnQgZGVmYXVsdCByZXF1ZXN0SWRsZUNhbGxiYWNrO1xuIiwiLyoqXG4gKiBJbnNwaXJlZCBieSBxdWlja2xpbmsuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lTGFicy9xdWlja2xpbmtcbiAqL1xuIFxuaW1wb3J0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgZnJvbSAnLi9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMnO1xuXG5mdW5jdGlvbiBjcmVhdGVQcmVmZXRjaExpbmsodXJsKSB7XG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cbiAgLy8gSWYgcHJlZmV0Y2ggc3VwcG9ydGVkICAgIFxuICBpZiAoKGxpbmsucmVsTGlzdCB8fCB7fSkuc3VwcG9ydHMgJiYgIWxpbmsucmVsTGlzdC5zdXBwb3J0cygncHJlZmV0Y2gnKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxpbmsucmVsID0gJ3ByZWZldGNoJztcbiAgbGluay5ocmVmID0gdXJsO1xuXG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG59XG5cbmZ1bmN0aW9uIGdldExpbmtzKCkge1xuICAvLyBHZXQgYWxsIGxpbmtzIGluIG1haW4gbmF2XG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW5hdi1tYWluIGEnKTtcblxuICBmb3IobGV0IGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICBjcmVhdGVQcmVmZXRjaExpbmsobGlua3NbaV0uaHJlZik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlZmV0Y2hOYXYoKSB7XG4gIC8vIGRvbid0IHByZWZldGNoIGlmIDJnIGNvbm5lY3Rpb24gb3IgZGF0YS1zYXZlciBlbmFibGVkXG4gIGlmIChuYXZpZ2F0b3IuY29ubmVjdGlvbikge1xuICAgIGlmIChuYXZpZ2F0b3IuY29ubmVjdGlvbi5lZmZlY3RpdmVUeXBlLmluY2x1ZGVzKCcyZycpIHx8IG5hdmlnYXRvci5jb25uZWN0aW9uLnNhdmVEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gc3RhcnQgYXMgc29vbiBhcyB0aGUgYnJvd3NlciBpc24ndCBidXN5IGFueW1vcmVcbiAgcmVxdWVzdElkbGVDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0TGlua3MoKTtcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJlZmV0Y2hOYXY7XG4iLCJpbXBvcnQgU3F1YXJlcyBmcm9tICcuL3NxdWFyZXMnO1xuaW1wb3J0IHByZWZldGNoTmF2IGZyb20gJy4vcHJlZmV0Y2gtbmF2JztcbnJlcXVpcmUoJ2ZvY3VzLXZpc2libGUnKTtcblxuaWYgKCFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0KSB7XG4gIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbihzKSB7XG4gICAgdmFyIGVsID0gdGhpcztcbiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsO1xuICAgIGRvIHtcbiAgICAgIGlmIChlbC5tYXRjaGVzKHMpKSByZXR1cm4gZWw7XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZTtcbiAgICB9IHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59XG5cbmNvbnN0IGhvbWVfdGwgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10bCcsXG4gIG51bV94OiAxLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEnLFxuICBjb2xvcjogJyMzNkIxQkYnXG59KTtcblxuY29uc3QgaG9tZV90ciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLXRyJyxcbiAgbnVtX3g6IDIsXG4gIG51bV95OiAxLFxuICBwYXR0ZXJuOiAnMSwxJyxcbiAgY29sb3I6ICcjMzZCMUJGJ1xufSk7XG5cbmNvbnN0IGhvbWVfYnIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1icicsXG4gIG51bV94OiAxLFxuICBudW1feTogMixcbiAgcGF0dGVybjogJzEsMScsXG4gIGNvbG9yOiAnI0YyM0M1MCdcbn0pO1xuXG5jb25zdCBob21lX2JsID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtYmwnLFxuICBudW1feDogMixcbiAgbnVtX3k6IDIsXG4gIHBhdHRlcm46ICcxLDAsMSwxJyxcbiAgY29sb3I6ICcjRjIzQzUwJ1xufSk7XG5cbmNvbnN0IGhvbWVfaW50cm8gPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1ob21lLWludHJvJyxcbiAgbnVtX3g6IDYsXG4gIG51bV95OiA1LFxuICBjb2xvcjogJyM1NjhiOGUnLFxuICBzaXplOiAxMCxcbiAgcGF0dGVybjogYDAsMCwxLDEsMCwxLFxuICAgIDAsMSwxLDAsMCwxLFxuICAgIDEsMSwwLDAsMCwxLFxuICAgIDAsMSwxLDAsMCwwLFxuICAgIDAsMCwxLDEsMCwxYFxufSk7XG5cbmNvbnN0IHNpdGVfaGVhZGVyID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3Etc2l0ZS1oZWFkZXInLFxuICBudW1feDogJ2luZmluaXRlJyxcbiAgbnVtX3k6IDEsXG4gIHNpemU6IDUsXG4gIGNvbG9yOiAnIzFkNGU2ZCcsXG4gIGZpbGw6ICdldmVuJ1xufSk7XG5cbi8qKlxuICogUmFuZG9tIGVtb2ppXG4gKi9cblxuZnVuY3Rpb24gZ2V0UmFuZG9tRW1vamkoKSB7XG4gIGNvbnN0IGVtb2ppcyA9IFsn8J+kpCcsICfwn5CzJywgJ/CfjbsnLCAn8J+RivCfj7snLCAn8J+NsyddO1xuXG4gIGNvbnN0IGVtb2ppID0gZW1vamlzW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChlbW9qaXMubGVuZ3RoIC0gMSkpXTtcbiAgcmV0dXJuIGVtb2ppO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXJhbmRvbS1lbW9qaScpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1yYW5kb20tZW1vamknKS50ZXh0Q29udGVudCA9IGdldFJhbmRvbUVtb2ppKCk7XG59XG5cbi8qKlxuICogU21vb3RobHkgc2Nyb2xsIHRvIHRvcFxuICovXG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2Nyb2xsLXRvcCcpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zY3JvbGwtdG9wJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWxvZ28nKS5mb2N1cygpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQcmVmZXRjaCBsaW5rcyBpbiBuYXYgZm9yIGJldHRlciBwZXJjZWl2ZWQgcGVyZm9ybWFuY2VcbiAqL1xuXG5wcmVmZXRjaE5hdigpO1xuXG5oaXN0b3J5LnB1c2hTdGF0ZSh7IHRoZW1lOiBcImhvbWVcIn0sIGxvY2F0aW9uLnBhdGhuYW1lLCBsb2NhdGlvbi5wYXRobmFtZSk7XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0JykpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvc3QtbGlzdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBsaW5rID0gZS50YXJnZXQuY2xvc2VzdCgnYScpO1xuICAgIGlmIChsaW5rLmRhdGFzZXQucG9zdCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIGxpbmsuZGF0YXNldC5wb3N0KTtcbiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHsgdGhlbWU6IGxpbmsuZGF0YXNldC5wb3N0IH0sIGxpbmsuaHJlZiwgbGluay5ocmVmKTtcblxuICAgICAgbG9hZFBhZ2UobGluay5ocmVmKTtcbiAgICB9XG4gIH0pO1xufVxuXG53aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUuc3RhdGUpIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgZS5zdGF0ZS50aGVtZSk7XG4gICAgbG9hZFBhZ2UobG9jYXRpb24ucGF0aG5hbWUpO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGxvYWRQYWdlKHVybCkge1xuICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNpdGUtY29udGVudCcpO1xuICBtYWluLmlubmVySFRNTCA9ICcnO1xuICBtYWluLmNsYXNzTGlzdC5hZGQoJ3NpdGVfX2NvbnRlbnQtLWhpZGRlbicpO1xuXG4gIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMucmVzcG9uc2U7XG4gICAgICBtYWluLmlubmVySFRNTCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuanMtc2l0ZS1jb250ZW50JykuaW5uZXJIVE1MO1xuICAgICAgbWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdzaXRlX19jb250ZW50LS1oaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgcGFnZV9jb250ZW50LmlubmVySFRNTCA9ICdGb3Igc29tZSByZWFzb24gSSBjb3VsZG5cXCd0IGNvbm5lY3QgdG8gdGhlIHNlcnZlciwgcGxlYXNlIHRyeSBsYXRlciBhZ2Fpbi4nO1xuICB9O1xuXG4gIHJlcXVlc3Quc2VuZCgpO1xufVxuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvZm9jdXMtdmlzaWJsZVxuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgdmFyIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5ID0gZmFsc2U7XG4gICAgdmFyIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCA9IG51bGw7XG5cbiAgICB2YXIgaW5wdXRUeXBlc1doaXRlbGlzdCA9IHtcbiAgICAgIHRleHQ6IHRydWUsXG4gICAgICBzZWFyY2g6IHRydWUsXG4gICAgICB1cmw6IHRydWUsXG4gICAgICB0ZWw6IHRydWUsXG4gICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgIHBhc3N3b3JkOiB0cnVlLFxuICAgICAgbnVtYmVyOiB0cnVlLFxuICAgICAgZGF0ZTogdHJ1ZSxcbiAgICAgIG1vbnRoOiB0cnVlLFxuICAgICAgd2VlazogdHJ1ZSxcbiAgICAgIHRpbWU6IHRydWUsXG4gICAgICBkYXRldGltZTogdHJ1ZSxcbiAgICAgICdkYXRldGltZS1sb2NhbCc6IHRydWVcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBsZWdhY3kgYnJvd3NlcnMgYW5kIGlmcmFtZXMgd2hpY2ggc29tZXRpbWVzIGZvY3VzXG4gICAgICogZWxlbWVudHMgbGlrZSBkb2N1bWVudCwgYm9keSwgYW5kIG5vbi1pbnRlcmFjdGl2ZSBTVkcuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRGb2N1c1RhcmdldChlbCkge1xuICAgICAgaWYgKFxuICAgICAgICBlbCAmJlxuICAgICAgICBlbCAhPT0gZG9jdW1lbnQgJiZcbiAgICAgICAgZWwubm9kZU5hbWUgIT09ICdIVE1MJyAmJlxuICAgICAgICBlbC5ub2RlTmFtZSAhPT0gJ0JPRFknICYmXG4gICAgICAgICdjbGFzc0xpc3QnIGluIGVsICYmXG4gICAgICAgICdjb250YWlucycgaW4gZWwuY2xhc3NMaXN0XG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgd2hldGhlciB0aGUgZ2l2ZW4gZWxlbWVudCBzaG91bGQgYXV0b21hdGljYWxseSB0cmlnZ2VyIHRoZVxuICAgICAqIGBmb2N1cy12aXNpYmxlYCBjbGFzcyBiZWluZyBhZGRlZCwgaS5lLiB3aGV0aGVyIGl0IHNob3VsZCBhbHdheXMgbWF0Y2hcbiAgICAgKiBgOmZvY3VzLXZpc2libGVgIHdoZW4gZm9jdXNlZC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb2N1c1RyaWdnZXJzS2V5Ym9hcmRNb2RhbGl0eShlbCkge1xuICAgICAgdmFyIHR5cGUgPSBlbC50eXBlO1xuICAgICAgdmFyIHRhZ05hbWUgPSBlbC50YWdOYW1lO1xuXG4gICAgICBpZiAodGFnTmFtZSA9PSAnSU5QVVQnICYmIGlucHV0VHlwZXNXaGl0ZWxpc3RbdHlwZV0gJiYgIWVsLnJlYWRPbmx5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFnTmFtZSA9PSAnVEVYVEFSRUEnICYmICFlbC5yZWFkT25seSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsLmlzQ29udGVudEVkaXRhYmxlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgdG8gdGhlIGdpdmVuIGVsZW1lbnQgaWYgaXQgd2FzIG5vdCBhZGRlZCBieVxuICAgICAqIHRoZSBhdXRob3IuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEZvY3VzVmlzaWJsZUNsYXNzKGVsKSB7XG4gICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb2N1cy12aXNpYmxlJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZm9jdXMtdmlzaWJsZScpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnLCAnJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudCBpZiBpdCB3YXMgbm90XG4gICAgICogb3JpZ2luYWxseSBhZGRlZCBieSB0aGUgYXV0aG9yLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVGb2N1c1Zpc2libGVDbGFzcyhlbCkge1xuICAgICAgaWYgKCFlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzLXZpc2libGUnKTtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1mb2N1cy12aXNpYmxlLWFkZGVkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJlYXQgYGtleWRvd25gIGFzIGEgc2lnbmFsIHRoYXQgdGhlIHVzZXIgaXMgaW4ga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogQXBwbHkgYGZvY3VzLXZpc2libGVgIHRvIGFueSBjdXJyZW50IGFjdGl2ZSBlbGVtZW50IGFuZCBrZWVwIHRyYWNrXG4gICAgICogb2Ygb3VyIGtleWJvYXJkIG1vZGFsaXR5IHN0YXRlIHdpdGggYGhhZEtleWJvYXJkRXZlbnRgLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgaWYgKGlzVmFsaWRGb2N1c1RhcmdldChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICBhZGRGb2N1c1Zpc2libGVDbGFzcyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgYXQgYW55IHBvaW50IGEgdXNlciBjbGlja3Mgd2l0aCBhIHBvaW50aW5nIGRldmljZSwgZW5zdXJlIHRoYXQgd2UgY2hhbmdlXG4gICAgICogdGhlIG1vZGFsaXR5IGF3YXkgZnJvbSBrZXlib2FyZC5cbiAgICAgKiBUaGlzIGF2b2lkcyB0aGUgc2l0dWF0aW9uIHdoZXJlIGEgdXNlciBwcmVzc2VzIGEga2V5IG9uIGFuIGFscmVhZHkgZm9jdXNlZFxuICAgICAqIGVsZW1lbnQsIGFuZCB0aGVuIGNsaWNrcyBvbiBhIGRpZmZlcmVudCBlbGVtZW50LCBmb2N1c2luZyBpdCB3aXRoIGFcbiAgICAgKiBwb2ludGluZyBkZXZpY2UsIHdoaWxlIHdlIHN0aWxsIHRoaW5rIHdlJ3JlIGluIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvblBvaW50ZXJEb3duKGUpIHtcbiAgICAgIGhhZEtleWJvYXJkRXZlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbiBgZm9jdXNgLCBhZGQgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyB0byB0aGUgdGFyZ2V0IGlmOlxuICAgICAqIC0gdGhlIHRhcmdldCByZWNlaXZlZCBmb2N1cyBhcyBhIHJlc3VsdCBvZiBrZXlib2FyZCBuYXZpZ2F0aW9uLCBvclxuICAgICAqIC0gdGhlIGV2ZW50IHRhcmdldCBpcyBhbiBlbGVtZW50IHRoYXQgd2lsbCBsaWtlbHkgcmVxdWlyZSBpbnRlcmFjdGlvblxuICAgICAqICAgdmlhIHRoZSBrZXlib2FyZCAoZS5nLiBhIHRleHQgYm94KVxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbkZvY3VzKGUpIHtcbiAgICAgIC8vIFByZXZlbnQgSUUgZnJvbSBmb2N1c2luZyB0aGUgZG9jdW1lbnQgb3IgSFRNTCBlbGVtZW50LlxuICAgICAgaWYgKCFpc1ZhbGlkRm9jdXNUYXJnZXQoZS50YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhZEtleWJvYXJkRXZlbnQgfHwgZm9jdXNUcmlnZ2Vyc0tleWJvYXJkTW9kYWxpdHkoZS50YXJnZXQpKSB7XG4gICAgICAgIGFkZEZvY3VzVmlzaWJsZUNsYXNzKGUudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbiBgYmx1cmAsIHJlbW92ZSB0aGUgYGZvY3VzLXZpc2libGVgIGNsYXNzIGZyb20gdGhlIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25CbHVyKGUpIHtcbiAgICAgIGlmICghaXNWYWxpZEZvY3VzVGFyZ2V0KGUudGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb2N1cy12aXNpYmxlJykgfHxcbiAgICAgICAgZS50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnKVxuICAgICAgKSB7XG4gICAgICAgIC8vIFRvIGRldGVjdCBhIHRhYi93aW5kb3cgc3dpdGNoLCB3ZSBsb29rIGZvciBhIGJsdXIgZXZlbnQgZm9sbG93ZWRcbiAgICAgICAgLy8gcmFwaWRseSBieSBhIHZpc2liaWxpdHkgY2hhbmdlLlxuICAgICAgICAvLyBJZiB3ZSBkb24ndCBzZWUgYSB2aXNpYmlsaXR5IGNoYW5nZSB3aXRoaW4gMTAwbXMsIGl0J3MgcHJvYmFibHkgYVxuICAgICAgICAvLyByZWd1bGFyIGZvY3VzIGNoYW5nZS5cbiAgICAgICAgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkgPSB0cnVlO1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCk7XG4gICAgICAgIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5ID0gZmFsc2U7XG4gICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChoYWRGb2N1c1Zpc2libGVSZWNlbnRseVRpbWVvdXQpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgICByZW1vdmVGb2N1c1Zpc2libGVDbGFzcyhlLnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIHVzZXIgY2hhbmdlcyB0YWJzLCBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgb3Igbm90IHRoZSBwcmV2aW91c2x5XG4gICAgICogZm9jdXNlZCBlbGVtZW50IGhhZCAuZm9jdXMtdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25WaXNpYmlsaXR5Q2hhbmdlKGUpIHtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHRhYiBiZWNvbWVzIGFjdGl2ZSBhZ2FpbiwgdGhlIGJyb3dzZXIgd2lsbCBoYW5kbGUgY2FsbGluZyBmb2N1c1xuICAgICAgICAvLyBvbiB0aGUgZWxlbWVudCAoU2FmYXJpIGFjdHVhbGx5IGNhbGxzIGl0IHR3aWNlKS5cbiAgICAgICAgLy8gSWYgdGhpcyB0YWIgY2hhbmdlIGNhdXNlZCBhIGJsdXIgb24gYW4gZWxlbWVudCB3aXRoIGZvY3VzLXZpc2libGUsXG4gICAgICAgIC8vIHJlLWFwcGx5IHRoZSBjbGFzcyB3aGVuIHRoZSB1c2VyIHN3aXRjaGVzIGJhY2sgdG8gdGhlIHRhYi5cbiAgICAgICAgaWYgKGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5KSB7XG4gICAgICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYWRkSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgZ3JvdXAgb2YgbGlzdGVuZXJzIHRvIGRldGVjdCB1c2FnZSBvZiBhbnkgcG9pbnRpbmcgZGV2aWNlcy5cbiAgICAgKiBUaGVzZSBsaXN0ZW5lcnMgd2lsbCBiZSBhZGRlZCB3aGVuIHRoZSBwb2x5ZmlsbCBmaXJzdCBsb2FkcywgYW5kIGFueXRpbWVcbiAgICAgKiB0aGUgd2luZG93IGlzIGJsdXJyZWQsIHNvIHRoYXQgdGhleSBhcmUgYWN0aXZlIHdoZW4gdGhlIHdpbmRvdyByZWdhaW5zXG4gICAgICogZm9jdXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgcG9sZnlpbGwgZmlyc3QgbG9hZHMsIGFzc3VtZSB0aGUgdXNlciBpcyBpbiBrZXlib2FyZCBtb2RhbGl0eS5cbiAgICAgKiBJZiBhbnkgZXZlbnQgaXMgcmVjZWl2ZWQgZnJvbSBhIHBvaW50aW5nIGRldmljZSAoZS5nLiBtb3VzZSwgcG9pbnRlcixcbiAgICAgKiB0b3VjaCksIHR1cm4gb2ZmIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIFRoaXMgYWNjb3VudHMgZm9yIHNpdHVhdGlvbnMgd2hlcmUgZm9jdXMgZW50ZXJzIHRoZSBwYWdlIGZyb20gdGhlIFVSTCBiYXIuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKGUpIHtcbiAgICAgIC8vIFdvcmsgYXJvdW5kIGEgU2FmYXJpIHF1aXJrIHRoYXQgZmlyZXMgYSBtb3VzZW1vdmUgb24gPGh0bWw+IHdoZW5ldmVyIHRoZVxuICAgICAgLy8gd2luZG93IGJsdXJzLCBldmVuIGlmIHlvdSdyZSB0YWJiaW5nIG91dCBvZiB0aGUgcGFnZS4gwq9cXF8o44OEKV8vwq9cbiAgICAgIGlmIChlLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaHRtbCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBoYWRLZXlib2FyZEV2ZW50ID0gZmFsc2U7XG4gICAgICByZW1vdmVJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIG9uRm9jdXMsIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkJsdXIsIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UsIHRydWUpO1xuICAgIGFkZEluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdqcy1mb2N1cy12aXNpYmxlJyk7XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaXB0aW9uIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgZnVuY3Rpb24gb25ET01SZWFkeShjYWxsYmFjaykge1xuICAgIHZhciBsb2FkZWQ7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayB3cmFwcGVyIGZvciBjaGVjayBsb2FkZWQgc3RhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgbG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChbJ2ludGVyYWN0aXZlJywgJ2NvbXBsZXRlJ10uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKSA+PSAwKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkZWQgPSBmYWxzZTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBsb2FkLCBmYWxzZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWQsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIG9uRE9NUmVhZHkoaW5pdCk7XG4gIH1cblxufSkpKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=