!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n(2),t.exports=n(1)},function(t,e){},function(t,e,n){"use strict";function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}n.r(e);var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.canvas=document.querySelector(e.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(e.size,20),this.num_x=e.num_x,this.num_y=e.num_y,this.init_canvas())}var e,n,i;return e=t,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var t=Math.round(this.get_parent_width()/this.size/2),e=0;e<t;e++)this.squares.push({x:this.size*(2*e),y:0});console.log(this.squares),console.log("fill it"),console.log(),this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop,s=e-e%this.size,i=n-n%this.size;i===this.canvas.height&&(i-=this.size),s===this.canvas.width&&(s-=this.size);var a=this.squares.findIndex(function(t){return t.x===s&t.y===i});a>-1?this.squares.splice(a,1):this.squares.push({x:s,y:i}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(t,e){return t||e}},{key:"prepare_canvas",value:function(){this.canvas.removeAttribute("hidden"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var t=getComputedStyle(this.canvas.parentNode),e=this.canvas.parentNode.clientWidth;return e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}},{key:"parse_pattern",value:function(){console.log("parse");for(var t=this.options.pattern.split(","),e=0;e<t.length;e++){var n=parseInt(t[e].trim()),s=Math.floor(e/this.num_x),i=(e+this.num_x)%this.num_x;"infinite"===this.num_x&&(s=0,i=e),n&&this.squares.push({x:this.size*i,y:this.size*s}),console.log(this.squares)}this.draw_squares()}},{key:"draw_squares",value:function(){console.log("draw"),this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var t=0;t<this.squares.length;t++){var e=this.squares[t];console.log(e),this.context.fillRect(e.x,e.y,this.size,this.size)}}}])&&s(e.prototype,n),i&&s(e,i),t}();new i({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new i({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new i({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new i({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new i({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"}),new i({canvas:".js-sq-site-header",num_x:"infinite",num_y:1,size:5,color:"#1d4e6d",fill:"even"})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NjcmlwdHMvc3F1YXJlcy5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNxdWFyZXMiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiY29sb3IiLCJzaXplIiwicHJvcF9zZXQiLCJudW1feCIsIm51bV95IiwiaW5pdF9jYW52YXMiLCJwcmVwYXJlX2NhbnZhcyIsImF0dGFjaF9ldmVudHMiLCJwYXR0ZXJuIiwicGFyc2VfcGF0dGVybiIsImZpbGwiLCJudW1fYm94ZXMiLCJNYXRoIiwicm91bmQiLCJnZXRfcGFyZW50X3dpZHRoIiwic3F1YXJlcyIsInB1c2giLCJ4IiwieSIsImNvbnNvbGUiLCJsb2ciLCJkcmF3X3NxdWFyZXMiLCJwbGFjZV9zcXVhcmUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwieF9yYXciLCJwYWdlWCIsInRhcmdldCIsIm9mZnNldExlZnQiLCJ5X3JhdyIsInBhZ2VZIiwib2Zmc2V0VG9wIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJwb3MiLCJzcGxpY2UiLCJwcm9wIiwicmVtb3ZlQXR0cmlidXRlIiwicGFyZW50X3N0eWxlcyIsImdldENvbXB1dGVkU3R5bGUiLCJwYXJlbnROb2RlIiwicGFyZW50X3dpZHRoIiwiY2xpZW50V2lkdGgiLCJwYXJzZUZsb2F0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJzcGxpdCIsImxlbmd0aCIsImJveCIsInBhcnNlSW50IiwidHJpbSIsInJvdyIsImZsb29yIiwiY29sIiwiZmlsbFN0eWxlIiwic3F1YXJlIiwiZmlsbFJlY3QiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNB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RUFBR3lDLEVBQU94QyxFQUFHeEIsS0FBS08sS0FBTVAsS0FBS08sNENDbkloRCxJQUFJVixFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLElBQ1RSLE1BQU8sWUFHTyxJQUFJVCxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLE1BQ1RSLE1BQU8sWUFHTyxJQUFJVCxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLE1BQ1RSLE1BQU8sWUFHTyxJQUFJVCxFQUFRLENBQzFCSSxPQUFRLFlBQ1JRLE1BQU8sRUFDUEMsTUFBTyxFQUNQSSxRQUFTLFVBQ1RSLE1BQU8sWUFHVSxJQUFJVCxFQUFRLENBQzdCSSxPQUFRLG9CQUNSUSxNQUFPLEVBQ1BDLE1BQU8sRUFDUEosTUFBTyxVQUNQQyxLQUFNLEdBQ05PLFFBQU8sd0ZBUVcsSUFBSWpCLEVBQVEsQ0FDOUJJLE9BQVEscUJBQ1JRLE1BQU8sV0FDUEMsTUFBTyxFQUNQSCxLQUFNLEVBQ05ELE1BQU8sVUFDUFUsS0FBTSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY2xhc3MgU3F1YXJlcyB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuY2FudmFzKTtcblxuICAgIGlmICghdGhpcy5jYW52YXMpIHJldHVybjtcblxuICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5jb2xvciA9J3JlZCc7XG5cbiAgICB0aGlzLnNpemUgPSB0aGlzLnByb3Bfc2V0KG9wdGlvbnMuc2l6ZSwgMjApO1xuXG4gICAgdGhpcy5udW1feCA9IG9wdGlvbnMubnVtX3g7XG4gICAgdGhpcy5udW1feSA9IG9wdGlvbnMubnVtX3k7XG5cbiAgICB0aGlzLmluaXRfY2FudmFzKCk7XG4gIH1cblxuICBpbml0X2NhbnZhcygpIHtcbiAgICB0aGlzLnByZXBhcmVfY2FudmFzKCk7XG4gICAgdGhpcy5hdHRhY2hfZXZlbnRzKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdHRlcm4pIHtcbiAgICAgIHRoaXMucGFyc2VfcGF0dGVybigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmlsbCkge1xuICAgICAgY29uc3QgbnVtX2JveGVzID0gTWF0aC5yb3VuZCh0aGlzLmdldF9wYXJlbnRfd2lkdGgoKSAvIHRoaXMuc2l6ZSAvIDIpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9ib3hlczsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogKDIgKiBpKSwgeTogMCB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2codGhpcy5zcXVhcmVzKVxuXG5cbiAgICAgIGNvbnNvbGUubG9nKCdmaWxsIGl0Jyk7XG4gICAgICBjb25zb2xlLmxvZygpO1xuXG4gICAgICB0aGlzLmRyYXdfc3F1YXJlcygpO1xuICAgIH1cbiAgfVxuXG4gIGF0dGFjaF9ldmVudHMoKSB7XG4gICAgdGhpcy5wbGFjZV9zcXVhcmUgPSB0aGlzLnBsYWNlX3NxdWFyZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wbGFjZV9zcXVhcmUpO1xuICB9XG5cbiAgcGxhY2Vfc3F1YXJlKGUpIHtcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICBjb25zdCB4X3JhdyA9IGUucGFnZVggLSBlLnRhcmdldC5vZmZzZXRMZWZ0O1xuICAgICAgY29uc3QgeV9yYXcgPSBlLnBhZ2VZIC0gZS50YXJnZXQub2Zmc2V0VG9wO1xuXG4gICAgICBsZXQgeCA9IHhfcmF3IC0geF9yYXcgJSB0aGlzLnNpemU7XG4gICAgICBsZXQgeSA9IHlfcmF3IC0geV9yYXcgJSB0aGlzLnNpemU7XG5cbiAgICAgIGlmICh5ID09PSB0aGlzLmNhbnZhcy5oZWlnaHQpIHtcbiAgICAgICAgeSAtPSB0aGlzLnNpemU7XG4gICAgICB9XG4gICAgICBpZiAoeCA9PT0gdGhpcy5jYW52YXMud2lkdGgpIHtcbiAgICAgICAgeCAtPSB0aGlzLnNpemU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zcXVhcmVzLmZpbmRJbmRleChwb3MgPT4gcG9zLnggPT09IHggJiBwb3MueSA9PT0geSk7XG5cbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB4LCB5OiB5fSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZHJhd19zcXVhcmVzKHRoaXMuY29udGV4dCwgdGhpcy5zcXVhcmVzKTtcbiAgfVxuXG4gIHByb3Bfc2V0KHByb3AsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHByb3AgPyBwcm9wIDogdmFsdWU7XG4gIH1cblxuICBwcmVwYXJlX2NhbnZhcygpIHtcbiAgICB0aGlzLmNhbnZhcy5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLm51bV94ICogdGhpcy5zaXplO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMubnVtX3kgKiB0aGlzLnNpemU7XG5cbiAgICBpZiAodGhpcy5udW1feCA9PT0gJ2luZmluaXRlJykgeyAgXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuZ2V0X3BhcmVudF93aWR0aCgpO1xuICAgIH1cblxuICAgIHRoaXMuc3F1YXJlcyA9IFtdO1xuICB9XG5cbiAgZ2V0X3BhcmVudF93aWR0aCgpIHtcbiAgICBjb25zdCBwYXJlbnRfc3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhbnZhcy5wYXJlbnROb2RlKTtcbiAgICBsZXQgcGFyZW50X3dpZHRoID0gdGhpcy5jYW52YXMucGFyZW50Tm9kZS5jbGllbnRXaWR0aDtcbiAgICBwYXJlbnRfd2lkdGggLT0gcGFyc2VGbG9hdChwYXJlbnRfc3R5bGVzLnBhZGRpbmdMZWZ0KSArIHBhcnNlRmxvYXQocGFyZW50X3N0eWxlcy5wYWRkaW5nUmlnaHQpO1xuXG4gICAgcmV0dXJuIHBhcmVudF93aWR0aDtcbiAgfVxuXG4gIHBhcnNlX3BhdHRlcm4oKSB7XG4gICAgY29uc29sZS5sb2coJ3BhcnNlJylcblxuICAgIGNvbnN0IHBhdHRlcm4gPSB0aGlzLm9wdGlvbnMucGF0dGVybi5zcGxpdCgnLCcpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXR0ZXJuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBib3ggPSBwYXJzZUludChwYXR0ZXJuW2ldLnRyaW0oKSk7XG4gICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihpIC8gdGhpcy5udW1feCk7XG4gICAgICBsZXQgY29sID0gKGkgKyB0aGlzLm51bV94KSAlIHRoaXMubnVtX3g7XG5cbiAgICAgIGlmICh0aGlzLm51bV94ID09PSAnaW5maW5pdGUnKSB7XG4gICAgICAgIHJvdyA9IDA7XG4gICAgICAgIGNvbCA9IGk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib3gpIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB0aGlzLnNpemUgKiBjb2wsIHk6IHRoaXMuc2l6ZSAqIHJvdyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2codGhpcy5zcXVhcmVzKVxuICAgIH1cblxuICAgIHRoaXMuZHJhd19zcXVhcmVzKCk7XG4gIH1cblxuICBkcmF3X3NxdWFyZXMoKSB7XG4gICAgY29uc29sZS5sb2coJ2RyYXcnKVxuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnByb3Bfc2V0KHRoaXMub3B0aW9ucy5jb2xvciwgJ3JnYmEoNTEsIDUxLCA1MSwgMC45KScpO1xuXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3F1YXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc3F1YXJlID0gdGhpcy5zcXVhcmVzW2ldO1xuICAgICAgY29uc29sZS5sb2coc3F1YXJlKVxuICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHNxdWFyZS54LCBzcXVhcmUueSwgdGhpcy5zaXplLCB0aGlzLnNpemUpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTcXVhcmVzO1xuXG5cbiIsImltcG9ydCBTcXVhcmVzIGZyb20gJy4vc3F1YXJlcyc7XG5cbmNvbnN0IGhvbWVfdGwgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10bCcsXG4gIG51bV94OiAxLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEnLFxuICBjb2xvcjogJyMzNkIxQkYnLFxufSk7XG5cbmNvbnN0IGhvbWVfdHIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10cicsXG4gIG51bV94OiAyLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEsMScsXG4gIGNvbG9yOiAnIzM2QjFCRicsXG59KTtcblxuY29uc3QgaG9tZV9iciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLWJyJyxcbiAgbnVtX3g6IDEsXG4gIG51bV95OiAyLFxuICBwYXR0ZXJuOiAnMSwxJyxcbiAgY29sb3I6ICcjRjIzQzUwJyxcbn0pO1xuXG5jb25zdCBob21lX2JsID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtYmwnLFxuICBudW1feDogMixcbiAgbnVtX3k6IDIsXG4gIHBhdHRlcm46ICcxLDAsMSwxJyxcbiAgY29sb3I6ICcjRjIzQzUwJyxcbn0pO1xuXG5jb25zdCBob21lX2ludHJvID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtaG9tZS1pbnRybycsXG4gIG51bV94OiA2LFxuICBudW1feTogNSxcbiAgY29sb3I6ICcjNTY4YjhlJyxcbiAgc2l6ZTogMTAsXG4gIHBhdHRlcm46IFxuICAgYDAsMCwxLDEsMCwxLFxuICAgIDAsMSwxLDAsMCwxLFxuICAgIDEsMSwwLDAsMCwxLFxuICAgIDAsMSwxLDAsMCwwLFxuICAgIDAsMCwxLDEsMCwxYCxcbn0pO1xuXG5jb25zdCBzaXRlX2hlYWRlciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLXNpdGUtaGVhZGVyJyxcbiAgbnVtX3g6ICdpbmZpbml0ZScsXG4gIG51bV95OiAxLFxuICBzaXplOiA1LFxuICBjb2xvcjogJyMxZDRlNmQnLFxuICBmaWxsOiAnZXZlbicsXG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=