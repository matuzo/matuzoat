!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(3),e.exports=n(2)},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}["interactive","complete"].indexOf(document.readyState)>=0?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function r(){document.addEventListener("mousemove",c),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c),document.addEventListener("pointermove",c),document.addEventListener("pointerdown",c),document.addEventListener("pointerup",c),document.addEventListener("touchmove",c),document.addEventListener("touchstart",c),document.addEventListener("touchend",c)}function c(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",c),document.removeEventListener("pointermove",c),document.removeEventListener("pointerdown",c),document.removeEventListener("pointerup",c),document.removeEventListener("touchmove",c),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",c))}document.addEventListener("keydown",function(t){i(document.activeElement)&&o(document.activeElement),e=!0},!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("focus",function(t){var n,a,r;i(t.target)&&((e||(n=t.target,a=n.type,"INPUT"==(r=n.tagName)&&s[a]&&!n.readOnly||"TEXTAREA"==r&&!n.readOnly||n.isContentEditable))&&o(t.target))},!0),document.addEventListener("blur",function(e){var s;i(e.target)&&((e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(s=e.target).hasAttribute("data-focus-visible-added")&&(s.classList.remove("focus-visible"),s.removeAttribute("data-focus-visible-added"))))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),r())},!0),r(),document.body.classList.add("js-focus-visible")})}()},function(e,t,n){},function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.canvas=document.querySelector(t.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(t.size,20),this.num_x=t.num_x,this.num_y=t.num_y,this.init_canvas())}var t,n,i;return t=e,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var e=Math.round(this.get_parent_width()/this.size/2),t=0;t<e;t++)this.squares.push({x:this.size*(2*t),y:0});this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop,s=t-t%this.size,i=n-n%this.size;i===this.canvas.height&&(i-=this.size),s===this.canvas.width&&(s-=this.size);var o=this.squares.findIndex(function(e){return e.x===s&e.y===i});o>-1?this.squares.splice(o,1):this.squares.push({x:s,y:i}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(e,t){return e||t}},{key:"prepare_canvas",value:function(){this.canvas.classList.add("square-canvas--visible"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var e=getComputedStyle(this.canvas.parentNode),t=this.canvas.parentNode.clientWidth;return t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}},{key:"parse_pattern",value:function(){for(var e=this.options.pattern.split(","),t=0;t<e.length;t++){var n=parseInt(e[t].trim()),s=Math.floor(t/this.num_x),i=(t+this.num_x)%this.num_x;"infinite"===this.num_x&&(s=0,i=t),n&&this.squares.push({x:this.size*i,y:this.size*s})}this.draw_squares()}},{key:"draw_squares",value:function(){this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var e=0;e<this.squares.length;e++){var t=this.squares[e];this.context.fillRect(t.x,t.y,this.size,this.size)}}}])&&s(t.prototype,n),i&&s(t,i),e}(),o=o||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},a=o;var r,c=function(){navigator.connection&&navigator.connection.saveData&&(navigator.connection.effectiveType.includes("2g")||navigator.connection.saveData)||a(function(){!function(){for(var e,t,n=document.querySelectorAll(".js-nav-main a"),s=0;s<n.length;s++)e=n[s].href,t=void 0,((t=document.createElement("link")).relList||{}).supports&&!t.relList.supports("prefetch")||(t.rel="prefetch",t.href=e,document.head.appendChild(t))}()})};function u(e){var t,n=e.dataset.src;return(t=n,new Promise(function(e,n){var s=new Image;t&&(s.src=t),s.onload=e,s.onerror=n})).then(function(){e.classList.add("lazyloaded"),e.src=n,e.removeAttribute("data-src")})}function d(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.intersectionRatio>0){var s=n.target;u(s),s.classList.remove("lazy"),r.unobserve(s)}}}var l,v=function(e){if(e.length){r=new IntersectionObserver(d,{rootMargin:"100px 0px"});for(var t=0;t<e.length;t++){var n=e[t];n.classList.contains("lazyloaded")||r.observe(n)}}},m=document.querySelectorAll(".js-demo");function h(e){var t=document.createElement("div");t.classList.add("demo__controls");var n=document.createElement("button"),s=document.createElement("span");s.classList.add("btn__inner"),s.textContent="Replay animation",n.appendChild(s),n.classList.add("btn"),n.classList.add("demo__btn"),n.addEventListener("click",function(){e.classList.remove("demo--playing"),setTimeout(function(){e.classList.add("demo--playing")},600)}),t.appendChild(n),e.appendChild(t)}function f(e){for(var t=function(t){var n=e[t];1===n.intersectionRatio&&setTimeout(function(){n.target.classList.add("demo--playing"),l.unobserve(n.target)},400)},n=0;n<e.length;n++)t(n)}var p=function(){if(m.length)for(var e=0;e<m.length;e++){var t=m[e];h(t),l=new IntersectionObserver(f,{threshold:[1]}),t.classList.contains("demo--playing")||l.observe(t)}};n(1),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var y;new i({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new i({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new i({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new i({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new i({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"});document.querySelector(".js-random-emoji")&&(document.querySelector(".js-random-emoji").textContent=(y=["ðŸ¤¤","ðŸ³","ðŸ»","ðŸ‘ŠðŸ»","ðŸ³"])[Math.round(Math.random()*(y.length-1))]),document.querySelector(".js-scroll-top")&&document.querySelector(".js-scroll-top").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".js-logo").focus()}),c(),v(document.querySelectorAll(".lazy")),p();for(var g=document.querySelectorAll(".js-a-focus-demo"),L=[],b=function(e){L.push(0),function(){var t,n=g[e],s=n.querySelectorAll("a, button"),i=!1,o=document.createElement("button"),a=document.createElement("span");o.classList.add("btn"),a.classList.add("btn__inner"),o.appendChild(a);var r="Play animation";function c(e){a.textContent=e}function u(){L[e]<s.length-1?L[e]++:L[e]=0,n.querySelector(".focus").classList.remove("focus"),s[L[e]].classList.add("focus")}n.hasAttribute("data-button")&&(r=n.getAttribute("data-button")),c(r),n.insertBefore(o,n.firstChild),o.addEventListener("click",function(){i?(clearInterval(t),a.textContent=r):(s[L[e]].classList.add("focus"),t=window.setInterval(u,700),c("Stop animation")),i=!i})}()},_=0;_<g.length;_++)b(_);!function(){var e=document.querySelectorAll(".js-lighthouse-test");if(0!==e.length)for(var t=function(t){var n=e[t],s=n.querySelector(".js-run-lighthouse-test");s.addEventListener("click",function(e){s.querySelector("span").textContent="Running testsâ€¦",n.querySelector(".js-lighthouse-status").textContent="Running testsâ€¦",setTimeout(function(){n.classList.add("lighthouse-test--finished"),n.querySelector(".js-lighthouse-status").textContent="Tests finished. Accessibility score: 100."},1e3)})},n=0;n<e.length;n++)t(n)}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZvY3VzLXZpc2libGUvZGlzdC9mb2N1cy12aXNpYmxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0aWMvc2NyaXB0cy9zcXVhcmVzLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0aWMvc2NyaXB0cy9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpYy9zY3JpcHRzL3ByZWZldGNoLW5hdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGljL3NjcmlwdHMvbGF6eWxvYWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpYy9zY3JpcHRzL2RlbW8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpYy9zY3JpcHRzL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZG9jdW1lbnQiLCJjYWxsYmFjayIsImxvYWRlZCIsImxvYWQiLCJpbmRleE9mIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJvbkRPTVJlYWR5IiwiaGFkS2V5Ym9hcmRFdmVudCIsImhhZEZvY3VzVmlzaWJsZVJlY2VudGx5IiwiaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0IiwiaW5wdXRUeXBlc1doaXRlbGlzdCIsInRleHQiLCJzZWFyY2giLCJ1cmwiLCJ0ZWwiLCJlbWFpbCIsInBhc3N3b3JkIiwibnVtYmVyIiwiZGF0ZSIsIm1vbnRoIiwid2VlayIsInRpbWUiLCJkYXRldGltZSIsImRhdGV0aW1lLWxvY2FsIiwiaXNWYWxpZEZvY3VzVGFyZ2V0IiwiZWwiLCJub2RlTmFtZSIsImNsYXNzTGlzdCIsImFkZEZvY3VzVmlzaWJsZUNsYXNzIiwiY29udGFpbnMiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJvblBvaW50ZXJEb3duIiwiZSIsImFkZEluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycyIsIm9uSW5pdGlhbFBvaW50ZXJNb3ZlIiwidGFyZ2V0IiwidG9Mb3dlckNhc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWN0aXZlRWxlbWVudCIsInR5cGUiLCJ0YWdOYW1lIiwicmVhZE9ubHkiLCJpc0NvbnRlbnRFZGl0YWJsZSIsImhhc0F0dHJpYnV0ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ2aXNpYmlsaXR5U3RhdGUiLCJib2R5IiwiZmFjdG9yeSIsIlNxdWFyZXMiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNhbnZhcyIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImNvbG9yIiwic2l6ZSIsInByb3Bfc2V0IiwibnVtX3giLCJudW1feSIsImluaXRfY2FudmFzIiwicHJlcGFyZV9jYW52YXMiLCJhdHRhY2hfZXZlbnRzIiwicGF0dGVybiIsInBhcnNlX3BhdHRlcm4iLCJmaWxsIiwibnVtX2JveGVzIiwiTWF0aCIsInJvdW5kIiwiZ2V0X3BhcmVudF93aWR0aCIsInNxdWFyZXMiLCJwdXNoIiwieCIsInkiLCJkcmF3X3NxdWFyZXMiLCJwbGFjZV9zcXVhcmUiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInhfcmF3IiwicGFnZVgiLCJvZmZzZXRMZWZ0IiwieV9yYXciLCJwYWdlWSIsIm9mZnNldFRvcCIsImluZGV4IiwiZmluZEluZGV4IiwicG9zIiwic3BsaWNlIiwicHJvcCIsInBhcmVudF9zdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyZW50Tm9kZSIsInBhcmVudF93aWR0aCIsImNsaWVudFdpZHRoIiwicGFyc2VGbG9hdCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Iiwic3BsaXQiLCJsZW5ndGgiLCJib3giLCJwYXJzZUludCIsInRyaW0iLCJyb3ciLCJmbG9vciIsImNvbCIsImZpbGxTdHlsZSIsInNxdWFyZSIsImZpbGxSZWN0IiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNiIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZGlkVGltZW91dCIsInRpbWVSZW1haW5pbmciLCJtYXgiLCJwcmVmZXRjaE5hdiIsIm9ic2VydmVyIiwibmF2aWdhdG9yIiwiY29ubmVjdGlvbiIsInNhdmVEYXRhIiwiZWZmZWN0aXZlVHlwZSIsImluY2x1ZGVzIiwibGluayIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImhyZWYiLCJjcmVhdGVFbGVtZW50IiwicmVsTGlzdCIsInN1cHBvcnRzIiwicmVsIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiZ2V0TGlua3MiLCJsb2FkSW1hZ2UiLCJpbWFnZSIsInNyYyIsImRhdGFzZXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsInRoZW4iLCJpbWFnZVZpc2libGUiLCJlbnRyaWVzIiwiZW50cnkiLCJpbnRlcnNlY3Rpb25SYXRpbyIsInVub2JzZXJ2ZSIsImxhenlMb2FkIiwiZGVtb09ic2VydmVyIiwiaW1hZ2VzIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJyb290TWFyZ2luIiwib2JzZXJ2ZSIsImRlbW9zIiwiZGVtb0FkZEJ1dHRvbiIsImRlbW8iLCJjb250cm9scyIsImJ1dHRvbiIsImJ1dHRvbl9pbm5lciIsInRleHRDb250ZW50IiwiZGVtb1Zpc2libGUiLCJfbG9vcCIsImVuaGFuY2VEZW1vcyIsInRocmVzaG9sZCIsInJlcXVpcmUiLCJFbGVtZW50IiwiY2xvc2VzdCIsImRvY3VtZW50RWxlbWVudCIsIm1hdGNoZXMiLCJwYXJlbnRFbGVtZW50Iiwibm9kZVR5cGUiLCJlbW9qaXMiLCJyYW5kb20iLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwiYWN0aXZlTGluayIsImZvY3VzSW50ZXJ2YWwiLCJhbmltYXRpbmciLCJwbGF5cGF1c2UiLCJwbGF5cGF1c2VfaW5uZXIiLCJidXR0b25UZXh0SW5hY3RpdmUiLCJzZXRCdXR0b25UZXh0IiwiZm9jdXNOZXh0IiwiZ2V0QXR0cmlidXRlIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImxpZ2h0aG91c2VUZXN0cyIsIl9sb29wMiIsImxpZ2h0aG91c2VUZXN0IiwiYWRkRGVtb0xpZ2h0aG91c2VUZXN0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FB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LDZDQUNuRSxRQVZFMU0sRUFBSSxFQUFHQSxFQUFJdU8sRUFBZ0I3RixPQUFRMUksSUFBS3dPLEVBQXhDeE8sR0FnQlgwTyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gIChmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2ZvY3VzLXZpc2libGVcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGhhZEtleWJvYXJkRXZlbnQgPSB0cnVlO1xuICAgIHZhciBoYWRGb2N1c1Zpc2libGVSZWNlbnRseSA9IGZhbHNlO1xuICAgIHZhciBoYWRGb2N1c1Zpc2libGVSZWNlbnRseVRpbWVvdXQgPSBudWxsO1xuXG4gICAgdmFyIGlucHV0VHlwZXNXaGl0ZWxpc3QgPSB7XG4gICAgICB0ZXh0OiB0cnVlLFxuICAgICAgc2VhcmNoOiB0cnVlLFxuICAgICAgdXJsOiB0cnVlLFxuICAgICAgdGVsOiB0cnVlLFxuICAgICAgZW1haWw6IHRydWUsXG4gICAgICBwYXNzd29yZDogdHJ1ZSxcbiAgICAgIG51bWJlcjogdHJ1ZSxcbiAgICAgIGRhdGU6IHRydWUsXG4gICAgICBtb250aDogdHJ1ZSxcbiAgICAgIHdlZWs6IHRydWUsXG4gICAgICB0aW1lOiB0cnVlLFxuICAgICAgZGF0ZXRpbWU6IHRydWUsXG4gICAgICAnZGF0ZXRpbWUtbG9jYWwnOiB0cnVlXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgbGVnYWN5IGJyb3dzZXJzIGFuZCBpZnJhbWVzIHdoaWNoIHNvbWV0aW1lcyBmb2N1c1xuICAgICAqIGVsZW1lbnRzIGxpa2UgZG9jdW1lbnQsIGJvZHksIGFuZCBub24taW50ZXJhY3RpdmUgU1ZHLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1ZhbGlkRm9jdXNUYXJnZXQoZWwpIHtcbiAgICAgIGlmIChcbiAgICAgICAgZWwgJiZcbiAgICAgICAgZWwgIT09IGRvY3VtZW50ICYmXG4gICAgICAgIGVsLm5vZGVOYW1lICE9PSAnSFRNTCcgJiZcbiAgICAgICAgZWwubm9kZU5hbWUgIT09ICdCT0RZJyAmJlxuICAgICAgICAnY2xhc3NMaXN0JyBpbiBlbCAmJlxuICAgICAgICAnY29udGFpbnMnIGluIGVsLmNsYXNzTGlzdFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHdoZXRoZXIgdGhlIGdpdmVuIGVsZW1lbnQgc2hvdWxkIGF1dG9tYXRpY2FsbHkgdHJpZ2dlciB0aGVcbiAgICAgKiBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgYmVpbmcgYWRkZWQsIGkuZS4gd2hldGhlciBpdCBzaG91bGQgYWx3YXlzIG1hdGNoXG4gICAgICogYDpmb2N1cy12aXNpYmxlYCB3aGVuIGZvY3VzZWQuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9jdXNUcmlnZ2Vyc0tleWJvYXJkTW9kYWxpdHkoZWwpIHtcbiAgICAgIHZhciB0eXBlID0gZWwudHlwZTtcbiAgICAgIHZhciB0YWdOYW1lID0gZWwudGFnTmFtZTtcblxuICAgICAgaWYgKHRhZ05hbWUgPT0gJ0lOUFVUJyAmJiBpbnB1dFR5cGVzV2hpdGVsaXN0W3R5cGVdICYmICFlbC5yZWFkT25seSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhZ05hbWUgPT0gJ1RFWFRBUkVBJyAmJiAhZWwucmVhZE9ubHkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbC5pc0NvbnRlbnRFZGl0YWJsZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgYGZvY3VzLXZpc2libGVgIGNsYXNzIHRvIHRoZSBnaXZlbiBlbGVtZW50IGlmIGl0IHdhcyBub3QgYWRkZWQgYnlcbiAgICAgKiB0aGUgYXV0aG9yLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRGb2N1c1Zpc2libGVDbGFzcyhlbCkge1xuICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZm9jdXMtdmlzaWJsZScpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2ZvY3VzLXZpc2libGUnKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1mb2N1cy12aXNpYmxlLWFkZGVkJywgJycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgYGZvY3VzLXZpc2libGVgIGNsYXNzIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQgaWYgaXQgd2FzIG5vdFxuICAgICAqIG9yaWdpbmFsbHkgYWRkZWQgYnkgdGhlIGF1dGhvci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlRm9jdXNWaXNpYmxlQ2xhc3MoZWwpIHtcbiAgICAgIGlmICghZWwuaGFzQXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1cy12aXNpYmxlJyk7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyZWF0IGBrZXlkb3duYCBhcyBhIHNpZ25hbCB0aGF0IHRoZSB1c2VyIGlzIGluIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIEFwcGx5IGBmb2N1cy12aXNpYmxlYCB0byBhbnkgY3VycmVudCBhY3RpdmUgZWxlbWVudCBhbmQga2VlcCB0cmFja1xuICAgICAqIG9mIG91ciBrZXlib2FyZCBtb2RhbGl0eSBzdGF0ZSB3aXRoIGBoYWRLZXlib2FyZEV2ZW50YC5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICAgIGlmIChpc1ZhbGlkRm9jdXNUYXJnZXQoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgYWRkRm9jdXNWaXNpYmxlQ2xhc3MoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIGhhZEtleWJvYXJkRXZlbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIGF0IGFueSBwb2ludCBhIHVzZXIgY2xpY2tzIHdpdGggYSBwb2ludGluZyBkZXZpY2UsIGVuc3VyZSB0aGF0IHdlIGNoYW5nZVxuICAgICAqIHRoZSBtb2RhbGl0eSBhd2F5IGZyb20ga2V5Ym9hcmQuXG4gICAgICogVGhpcyBhdm9pZHMgdGhlIHNpdHVhdGlvbiB3aGVyZSBhIHVzZXIgcHJlc3NlcyBhIGtleSBvbiBhbiBhbHJlYWR5IGZvY3VzZWRcbiAgICAgKiBlbGVtZW50LCBhbmQgdGhlbiBjbGlja3Mgb24gYSBkaWZmZXJlbnQgZWxlbWVudCwgZm9jdXNpbmcgaXQgd2l0aCBhXG4gICAgICogcG9pbnRpbmcgZGV2aWNlLCB3aGlsZSB3ZSBzdGlsbCB0aGluayB3ZSdyZSBpbiBrZXlib2FyZCBtb2RhbGl0eS5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25Qb2ludGVyRG93bihlKSB7XG4gICAgICBoYWRLZXlib2FyZEV2ZW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT24gYGZvY3VzYCwgYWRkIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgdG8gdGhlIHRhcmdldCBpZjpcbiAgICAgKiAtIHRoZSB0YXJnZXQgcmVjZWl2ZWQgZm9jdXMgYXMgYSByZXN1bHQgb2Yga2V5Ym9hcmQgbmF2aWdhdGlvbiwgb3JcbiAgICAgKiAtIHRoZSBldmVudCB0YXJnZXQgaXMgYW4gZWxlbWVudCB0aGF0IHdpbGwgbGlrZWx5IHJlcXVpcmUgaW50ZXJhY3Rpb25cbiAgICAgKiAgIHZpYSB0aGUga2V5Ym9hcmQgKGUuZy4gYSB0ZXh0IGJveClcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25Gb2N1cyhlKSB7XG4gICAgICAvLyBQcmV2ZW50IElFIGZyb20gZm9jdXNpbmcgdGhlIGRvY3VtZW50IG9yIEhUTUwgZWxlbWVudC5cbiAgICAgIGlmICghaXNWYWxpZEZvY3VzVGFyZ2V0KGUudGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChoYWRLZXlib2FyZEV2ZW50IHx8IGZvY3VzVHJpZ2dlcnNLZXlib2FyZE1vZGFsaXR5KGUudGFyZ2V0KSkge1xuICAgICAgICBhZGRGb2N1c1Zpc2libGVDbGFzcyhlLnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT24gYGJsdXJgLCByZW1vdmUgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyBmcm9tIHRoZSB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uQmx1cihlKSB7XG4gICAgICBpZiAoIWlzVmFsaWRGb2N1c1RhcmdldChlLnRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZm9jdXMtdmlzaWJsZScpIHx8XG4gICAgICAgIGUudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1mb2N1cy12aXNpYmxlLWFkZGVkJylcbiAgICAgICkge1xuICAgICAgICAvLyBUbyBkZXRlY3QgYSB0YWIvd2luZG93IHN3aXRjaCwgd2UgbG9vayBmb3IgYSBibHVyIGV2ZW50IGZvbGxvd2VkXG4gICAgICAgIC8vIHJhcGlkbHkgYnkgYSB2aXNpYmlsaXR5IGNoYW5nZS5cbiAgICAgICAgLy8gSWYgd2UgZG9uJ3Qgc2VlIGEgdmlzaWJpbGl0eSBjaGFuZ2Ugd2l0aGluIDEwMG1zLCBpdCdzIHByb2JhYmx5IGFcbiAgICAgICAgLy8gcmVndWxhciBmb2N1cyBjaGFuZ2UuXG4gICAgICAgIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5ID0gdHJ1ZTtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChoYWRGb2N1c1Zpc2libGVSZWNlbnRseVRpbWVvdXQpO1xuICAgICAgICBoYWRGb2N1c1Zpc2libGVSZWNlbnRseVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBoYWRGb2N1c1Zpc2libGVSZWNlbnRseSA9IGZhbHNlO1xuICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0KTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgcmVtb3ZlRm9jdXNWaXNpYmxlQ2xhc3MoZS50YXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRoZSB1c2VyIGNoYW5nZXMgdGFicywga2VlcCB0cmFjayBvZiB3aGV0aGVyIG9yIG5vdCB0aGUgcHJldmlvdXNseVxuICAgICAqIGZvY3VzZWQgZWxlbWVudCBoYWQgLmZvY3VzLXZpc2libGUuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uVmlzaWJpbGl0eUNoYW5nZShlKSB7XG4gICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09ICdoaWRkZW4nKSB7XG4gICAgICAgIC8vIElmIHRoZSB0YWIgYmVjb21lcyBhY3RpdmUgYWdhaW4sIHRoZSBicm93c2VyIHdpbGwgaGFuZGxlIGNhbGxpbmcgZm9jdXNcbiAgICAgICAgLy8gb24gdGhlIGVsZW1lbnQgKFNhZmFyaSBhY3R1YWxseSBjYWxscyBpdCB0d2ljZSkuXG4gICAgICAgIC8vIElmIHRoaXMgdGFiIGNoYW5nZSBjYXVzZWQgYSBibHVyIG9uIGFuIGVsZW1lbnQgd2l0aCBmb2N1cy12aXNpYmxlLFxuICAgICAgICAvLyByZS1hcHBseSB0aGUgY2xhc3Mgd2hlbiB0aGUgdXNlciBzd2l0Y2hlcyBiYWNrIHRvIHRoZSB0YWIuXG4gICAgICAgIGlmIChoYWRGb2N1c1Zpc2libGVSZWNlbnRseSkge1xuICAgICAgICAgIGhhZEtleWJvYXJkRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGFkZEluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGdyb3VwIG9mIGxpc3RlbmVycyB0byBkZXRlY3QgdXNhZ2Ugb2YgYW55IHBvaW50aW5nIGRldmljZXMuXG4gICAgICogVGhlc2UgbGlzdGVuZXJzIHdpbGwgYmUgYWRkZWQgd2hlbiB0aGUgcG9seWZpbGwgZmlyc3QgbG9hZHMsIGFuZCBhbnl0aW1lXG4gICAgICogdGhlIHdpbmRvdyBpcyBibHVycmVkLCBzbyB0aGF0IHRoZXkgYXJlIGFjdGl2ZSB3aGVuIHRoZSB3aW5kb3cgcmVnYWluc1xuICAgICAqIGZvY3VzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIHBvbGZ5aWxsIGZpcnN0IGxvYWRzLCBhc3N1bWUgdGhlIHVzZXIgaXMgaW4ga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogSWYgYW55IGV2ZW50IGlzIHJlY2VpdmVkIGZyb20gYSBwb2ludGluZyBkZXZpY2UgKGUuZy4gbW91c2UsIHBvaW50ZXIsXG4gICAgICogdG91Y2gpLCB0dXJuIG9mZiBrZXlib2FyZCBtb2RhbGl0eS5cbiAgICAgKiBUaGlzIGFjY291bnRzIGZvciBzaXR1YXRpb25zIHdoZXJlIGZvY3VzIGVudGVycyB0aGUgcGFnZSBmcm9tIHRoZSBVUkwgYmFyLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbkluaXRpYWxQb2ludGVyTW92ZShlKSB7XG4gICAgICAvLyBXb3JrIGFyb3VuZCBhIFNhZmFyaSBxdWlyayB0aGF0IGZpcmVzIGEgbW91c2Vtb3ZlIG9uIDxodG1sPiB3aGVuZXZlciB0aGVcbiAgICAgIC8vIHdpbmRvdyBibHVycywgZXZlbiBpZiB5b3UncmUgdGFiYmluZyBvdXQgb2YgdGhlIHBhZ2UuIMKvXFxfKOODhClfL8KvXG4gICAgICBpZiAoZS50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2h0bWwnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IGZhbHNlO1xuICAgICAgcmVtb3ZlSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBvbkZvY3VzLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25CbHVyLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5Q2hhbmdlLCB0cnVlKTtcbiAgICBhZGRJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKTtcblxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnanMtZm9jdXMtdmlzaWJsZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmlwdGlvbiB3aGVuIHRoZSBET00gaXMgcmVhZHlcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIGZ1bmN0aW9uIG9uRE9NUmVhZHkoY2FsbGJhY2spIHtcbiAgICB2YXIgbG9hZGVkO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgd3JhcHBlciBmb3IgY2hlY2sgbG9hZGVkIHN0YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgIGlmICghbG9hZGVkKSB7XG4gICAgICAgIGxvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydpbnRlcmFjdGl2ZScsICdjb21wbGV0ZSddLmluZGV4T2YoZG9jdW1lbnQucmVhZHlTdGF0ZSkgPj0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZGVkID0gZmFsc2U7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbG9hZCwgZmFsc2UpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsb2FkLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBvbkRPTVJlYWR5KGluaXQpO1xuICB9XG5cbn0pKSk7XG4iLCJjbGFzcyBTcXVhcmVzIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5jYW52YXMpO1xuXG4gICAgaWYgKCF0aGlzLmNhbnZhcykgcmV0dXJuO1xuXG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB0aGlzLmNvbG9yID0gJ3JlZCc7XG5cbiAgICB0aGlzLnNpemUgPSB0aGlzLnByb3Bfc2V0KG9wdGlvbnMuc2l6ZSwgMjApO1xuXG4gICAgdGhpcy5udW1feCA9IG9wdGlvbnMubnVtX3g7XG4gICAgdGhpcy5udW1feSA9IG9wdGlvbnMubnVtX3k7XG5cbiAgICB0aGlzLmluaXRfY2FudmFzKCk7XG4gIH1cblxuICBpbml0X2NhbnZhcygpIHtcbiAgICB0aGlzLnByZXBhcmVfY2FudmFzKCk7XG4gICAgdGhpcy5hdHRhY2hfZXZlbnRzKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdHRlcm4pIHtcbiAgICAgIHRoaXMucGFyc2VfcGF0dGVybigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmlsbCkge1xuICAgICAgY29uc3QgbnVtX2JveGVzID0gTWF0aC5yb3VuZCh0aGlzLmdldF9wYXJlbnRfd2lkdGgoKSAvIHRoaXMuc2l6ZSAvIDIpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9ib3hlczsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogKDIgKiBpKSwgeTogMCB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmF3X3NxdWFyZXMoKTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hfZXZlbnRzKCkge1xuICAgIHRoaXMucGxhY2Vfc3F1YXJlID0gdGhpcy5wbGFjZV9zcXVhcmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucGxhY2Vfc3F1YXJlKTtcbiAgfVxuXG4gIHBsYWNlX3NxdWFyZShlKSB7XG4gICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgIGNvbnN0IHhfcmF3ID0gZS5wYWdlWCAtIGUudGFyZ2V0Lm9mZnNldExlZnQ7XG4gICAgY29uc3QgeV9yYXcgPSBlLnBhZ2VZIC0gZS50YXJnZXQub2Zmc2V0VG9wO1xuXG4gICAgbGV0IHggPSB4X3JhdyAtICh4X3JhdyAlIHRoaXMuc2l6ZSk7XG4gICAgbGV0IHkgPSB5X3JhdyAtICh5X3JhdyAlIHRoaXMuc2l6ZSk7XG5cbiAgICBpZiAoeSA9PT0gdGhpcy5jYW52YXMuaGVpZ2h0KSB7XG4gICAgICB5IC09IHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgaWYgKHggPT09IHRoaXMuY2FudmFzLndpZHRoKSB7XG4gICAgICB4IC09IHRoaXMuc2l6ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc3F1YXJlcy5maW5kSW5kZXgocG9zID0+IChwb3MueCA9PT0geCkgJiAocG9zLnkgPT09IHkpKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLnNxdWFyZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB4LCB5OiB5IH0pO1xuICAgIH1cblxuICAgIHRoaXMuZHJhd19zcXVhcmVzKHRoaXMuY29udGV4dCwgdGhpcy5zcXVhcmVzKTtcbiAgfVxuXG4gIHByb3Bfc2V0KHByb3AsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHByb3AgPyBwcm9wIDogdmFsdWU7XG4gIH1cblxuICBwcmVwYXJlX2NhbnZhcygpIHtcbiAgICB0aGlzLmNhbnZhcy5jbGFzc0xpc3QuYWRkKCdzcXVhcmUtY2FudmFzLS12aXNpYmxlJyk7XG5cbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMubnVtX3ggKiB0aGlzLnNpemU7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5udW1feSAqIHRoaXMuc2l6ZTtcblxuICAgIGlmICh0aGlzLm51bV94ID09PSAnaW5maW5pdGUnKSB7XG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuZ2V0X3BhcmVudF93aWR0aCgpO1xuICAgIH1cblxuICAgIHRoaXMuc3F1YXJlcyA9IFtdO1xuICB9XG5cbiAgZ2V0X3BhcmVudF93aWR0aCgpIHtcbiAgICBjb25zdCBwYXJlbnRfc3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhbnZhcy5wYXJlbnROb2RlKTtcbiAgICBsZXQgcGFyZW50X3dpZHRoID0gdGhpcy5jYW52YXMucGFyZW50Tm9kZS5jbGllbnRXaWR0aDtcbiAgICBwYXJlbnRfd2lkdGggLT1cbiAgICAgIHBhcnNlRmxvYXQocGFyZW50X3N0eWxlcy5wYWRkaW5nTGVmdCkgK1xuICAgICAgcGFyc2VGbG9hdChwYXJlbnRfc3R5bGVzLnBhZGRpbmdSaWdodCk7XG5cbiAgICByZXR1cm4gcGFyZW50X3dpZHRoO1xuICB9XG5cbiAgcGFyc2VfcGF0dGVybigpIHtcbiAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5vcHRpb25zLnBhdHRlcm4uc3BsaXQoJywnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYm94ID0gcGFyc2VJbnQocGF0dGVybltpXS50cmltKCkpO1xuICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoaSAvIHRoaXMubnVtX3gpO1xuICAgICAgbGV0IGNvbCA9IChpICsgdGhpcy5udW1feCkgJSB0aGlzLm51bV94O1xuXG4gICAgICBpZiAodGhpcy5udW1feCA9PT0gJ2luZmluaXRlJykge1xuICAgICAgICByb3cgPSAwO1xuICAgICAgICBjb2wgPSBpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYm94KSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcy5wdXNoKHsgeDogdGhpcy5zaXplICogY29sLCB5OiB0aGlzLnNpemUgKiByb3cgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3X3NxdWFyZXMoKTtcbiAgfVxuXG4gIGRyYXdfc3F1YXJlcygpIHtcbiAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5wcm9wX3NldChcbiAgICAgIHRoaXMub3B0aW9ucy5jb2xvcixcbiAgICAgICdyZ2JhKDUxLCA1MSwgNTEsIDAuOSknXG4gICAgKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zcXVhcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzcXVhcmUgPSB0aGlzLnNxdWFyZXNbaV07XG4gICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3Qoc3F1YXJlLngsIHNxdWFyZS55LCB0aGlzLnNpemUsIHRoaXMuc2l6ZSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNxdWFyZXM7XG4iLCJjb25zdCByZXF1ZXN0SWRsZUNhbGxiYWNrID1cbiAgcmVxdWVzdElkbGVDYWxsYmFjayB8fFxuICBmdW5jdGlvbihjYikge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNiKHtcbiAgICAgICAgZGlkVGltZW91dDogZmFsc2UsXG4gICAgICAgIHRpbWVSZW1haW5pbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCA1MCAtIChEYXRlLm5vdygpIC0gc3RhcnQpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgMSk7XG4gIH07XG5cbmV4cG9ydCBkZWZhdWx0IHJlcXVlc3RJZGxlQ2FsbGJhY2s7XG4iLCIvKipcbiAqIEluc3BpcmVkIGJ5IHF1aWNrbGluay5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWVMYWJzL3F1aWNrbGlua1xuICovXG5cbmltcG9ydCByZXF1ZXN0SWRsZUNhbGxiYWNrIGZyb20gJy4vcmVxdWVzdC1pZGxlLWNhbGxiYWNrLmpzJztcblxuZnVuY3Rpb24gY3JlYXRlUHJlZmV0Y2hMaW5rKHVybCkge1xuICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuXG4gIC8vIElmIHByZWZldGNoIHN1cHBvcnRlZFxuICBpZiAoKGxpbmsucmVsTGlzdCB8fCB7fSkuc3VwcG9ydHMgJiYgIWxpbmsucmVsTGlzdC5zdXBwb3J0cygncHJlZmV0Y2gnKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxpbmsucmVsID0gJ3ByZWZldGNoJztcbiAgbGluay5ocmVmID0gdXJsO1xuXG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG59XG5cbmZ1bmN0aW9uIGdldExpbmtzKCkge1xuICAvLyBHZXQgYWxsIGxpbmtzIGluIG1haW4gbmF2XG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW5hdi1tYWluIGEnKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlUHJlZmV0Y2hMaW5rKGxpbmtzW2ldLmhyZWYpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByZWZldGNoTmF2KCkge1xuICAvLyBkb24ndCBwcmVmZXRjaCBpZiAyZyBjb25uZWN0aW9uIG9yIGRhdGEtc2F2ZXIgZW5hYmxlZFxuICBpZiAobmF2aWdhdG9yLmNvbm5lY3Rpb24gJiYgbmF2aWdhdG9yLmNvbm5lY3Rpb24uc2F2ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBuYXZpZ2F0b3IuY29ubmVjdGlvbi5lZmZlY3RpdmVUeXBlLmluY2x1ZGVzKCcyZycpIHx8XG4gICAgICBuYXZpZ2F0b3IuY29ubmVjdGlvbi5zYXZlRGF0YVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8vIHN0YXJ0IGFzIHNvb24gYXMgdGhlIGJyb3dzZXIgaXNuJ3QgYnVzeSBhbnltb3JlXG4gIHJlcXVlc3RJZGxlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdldExpbmtzKCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmZXRjaE5hdjtcbiIsImxldCBvYnNlcnZlcjtcblxuZnVuY3Rpb24gbG9hZEltYWdlKGltYWdlKSB7XG4gIGNvbnN0IHNyYyA9IGltYWdlLmRhdGFzZXQuc3JjO1xuICByZXR1cm4gZmV0Y2hJbWFnZShzcmMpLnRoZW4oKCkgPT4ge1xuICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoJ2xhenlsb2FkZWQnKTtcbiAgICBpbWFnZS5zcmMgPSBzcmM7XG4gICAgaW1hZ2UucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNyYycpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZmV0Y2hJbWFnZSh1cmwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGlmICh1cmwpIHtcbiAgICAgIGltYWdlLnNyYyA9IHVybDtcbiAgICB9XG4gICAgaW1hZ2Uub25sb2FkID0gcmVzb2x2ZTtcbiAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW1hZ2VWaXNpYmxlKGVudHJpZXMpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGVudHJ5ID0gZW50cmllc1tpXTtcbiAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwKSB7XG4gICAgICBjb25zdCBpbWFnZSA9IGVudHJ5LnRhcmdldDtcbiAgICAgIGxvYWRJbWFnZShpbWFnZSk7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKCdsYXp5Jyk7XG5cbiAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShpbWFnZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxhenlMb2FkKGltYWdlcykge1xuICBpZiAoaW1hZ2VzLmxlbmd0aCkge1xuICAgIG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGltYWdlVmlzaWJsZSwge1xuICAgICAgcm9vdE1hcmdpbjogJzEwMHB4IDBweCdcbiAgICB9KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW1hZ2UgPSBpbWFnZXNbaV07XG4gICAgICBpZiAoaW1hZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdsYXp5bG9hZGVkJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG9ic2VydmVyLm9ic2VydmUoaW1hZ2UpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBsYXp5TG9hZDtcbiIsIi8vIERlbW9zXG5cbmNvbnN0IGRlbW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWRlbW8nKTtcbmxldCBkZW1vT2JzZXJ2ZXI7XG5cbmZ1bmN0aW9uIGRlbW9BZGRCdXR0b24oZGVtbykge1xuICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250cm9scy5jbGFzc0xpc3QuYWRkKCdkZW1vX19jb250cm9scycpO1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY29uc3QgYnV0dG9uX2lubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBidXR0b25faW5uZXIuY2xhc3NMaXN0LmFkZCgnYnRuX19pbm5lcicpO1xuICBidXR0b25faW5uZXIudGV4dENvbnRlbnQgPSAnUmVwbGF5IGFuaW1hdGlvbic7XG4gIGJ1dHRvbi5hcHBlbmRDaGlsZChidXR0b25faW5uZXIpO1xuXG4gIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4nKTtcbiAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RlbW9fX2J0bicpO1xuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGRlbW8uY2xhc3NMaXN0LnJlbW92ZSgnZGVtby0tcGxheWluZycpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGVtby5jbGFzc0xpc3QuYWRkKCdkZW1vLS1wbGF5aW5nJyk7XG4gICAgfSwgNjAwKTtcbiAgfSk7XG5cbiAgY29udHJvbHMuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgZGVtby5hcHBlbmRDaGlsZChjb250cm9scyk7XG59XG5cbmZ1bmN0aW9uIGRlbW9WaXNpYmxlKGVudHJpZXMpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGVudHJ5ID0gZW50cmllc1tpXTtcbiAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPT09IDEpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZGVtby0tcGxheWluZycpO1xuXG4gICAgICAgIGRlbW9PYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcbiAgICAgIH0sIDQwMCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGVuaGFuY2VEZW1vcygpIHtcbiAgaWYgKGRlbW9zLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVtb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRlbW8gPSBkZW1vc1tpXTtcbiAgICAgIGRlbW9BZGRCdXR0b24oZGVtbyk7XG5cbiAgICAgIGRlbW9PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihkZW1vVmlzaWJsZSwge1xuICAgICAgICB0aHJlc2hvbGQ6IFsxXVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChkZW1vLmNsYXNzTGlzdC5jb250YWlucygnZGVtby0tcGxheWluZycpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBkZW1vT2JzZXJ2ZXIub2JzZXJ2ZShkZW1vKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZW5oYW5jZURlbW9zO1xuIiwiaW1wb3J0IFNxdWFyZXMgZnJvbSAnLi9zcXVhcmVzJztcbmltcG9ydCBwcmVmZXRjaE5hdiBmcm9tICcuL3ByZWZldGNoLW5hdic7XG5pbXBvcnQgbGF6eUxvYWQgZnJvbSAnLi9sYXp5bG9hZCc7XG5pbXBvcnQgZW5oYW5jZURlbW9zIGZyb20gJy4vZGVtbyc7XG5yZXF1aXJlKCdmb2N1cy12aXNpYmxlJyk7XG5cbmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkge1xuICBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24ocykge1xuICAgIHZhciBlbCA9IHRoaXM7XG4gICAgaWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoZWwpKSByZXR1cm4gbnVsbDtcbiAgICBkbyB7XG4gICAgICBpZiAoZWwubWF0Y2hlcyhzKSkgcmV0dXJuIGVsO1xuICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50IHx8IGVsLnBhcmVudE5vZGU7XG4gICAgfSB3aGlsZSAoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDEpO1xuICAgIHJldHVybiBudWxsO1xuICB9O1xufVxuXG5jb25zdCBob21lX3RsID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtdGwnLFxuICBudW1feDogMSxcbiAgbnVtX3k6IDEsXG4gIHBhdHRlcm46ICcxJyxcbiAgY29sb3I6ICcjMzZCMUJGJ1xufSk7XG5cbmNvbnN0IGhvbWVfdHIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10cicsXG4gIG51bV94OiAyLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEsMScsXG4gIGNvbG9yOiAnIzM2QjFCRidcbn0pO1xuXG5jb25zdCBob21lX2JyID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtYnInLFxuICBudW1feDogMSxcbiAgbnVtX3k6IDIsXG4gIHBhdHRlcm46ICcxLDEnLFxuICBjb2xvcjogJyNGMjNDNTAnXG59KTtcblxuY29uc3QgaG9tZV9ibCA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLWJsJyxcbiAgbnVtX3g6IDIsXG4gIG51bV95OiAyLFxuICBwYXR0ZXJuOiAnMSwwLDEsMScsXG4gIGNvbG9yOiAnI0YyM0M1MCdcbn0pO1xuXG5jb25zdCBob21lX2ludHJvID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtaG9tZS1pbnRybycsXG4gIG51bV94OiA2LFxuICBudW1feTogNSxcbiAgY29sb3I6ICcjNTY4YjhlJyxcbiAgc2l6ZTogMTAsXG4gIHBhdHRlcm46IGAwLDAsMSwxLDAsMSxcbiAgICAwLDEsMSwwLDAsMSxcbiAgICAxLDEsMCwwLDAsMSxcbiAgICAwLDEsMSwwLDAsMCxcbiAgICAwLDAsMSwxLDAsMWBcbn0pO1xuXG4vKipcbiAqIFJhbmRvbSBlbW9qaVxuICovXG5cbmZ1bmN0aW9uIGdldFJhbmRvbUVtb2ppKCkge1xuICBjb25zdCBlbW9qaXMgPSBbJ/CfpKQnLCAn8J+QsycsICfwn427JywgJ/CfkYrwn4+7JywgJ/CfjbMnXTtcblxuICBjb25zdCBlbW9qaSA9IGVtb2ppc1tNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoZW1vamlzLmxlbmd0aCAtIDEpKV07XG4gIHJldHVybiBlbW9qaTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1yYW5kb20tZW1vamknKSkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcmFuZG9tLWVtb2ppJykudGV4dENvbnRlbnQgPSBnZXRSYW5kb21FbW9qaSgpO1xufVxuXG4vKipcbiAqIFNtb290aGx5IHNjcm9sbCB0byB0b3BcbiAqL1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNjcm9sbC10b3AnKSkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2Nyb2xsLXRvcCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1sb2dvJykuZm9jdXMoKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlZmV0Y2ggbGlua3MgaW4gbmF2IGZvciBiZXR0ZXIgcGVyY2VpdmVkIHBlcmZvcm1hbmNlXG4gKi9cblxucHJlZmV0Y2hOYXYoKTtcblxuLy8gaGlzdG9yeS5wdXNoU3RhdGUoXG4vLyAgIHsgdGhlbWU6IGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcLy9nLCAnJykgfSxcbi8vICAgbG9jYXRpb24ucGF0aG5hbWUsXG4vLyAgIGxvY2F0aW9uLnBhdGhuYW1lXG4vLyApO1xuXG4vLyBmdW5jdGlvbiBsaW5rUG9zdGxpc3QoKSB7XG4vLyAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4vLyAgIGNvbnN0IGxpbmsgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnYScpO1xuLy8gICBjb25zdCB0aGVtZUNsYXNzID0gYCR7bGluay5kYXRhc2V0LnB1YmxpY2F0aW9ufS0ke2xpbmsuZGF0YXNldC5wb3N0fWA7XG4vLyAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCB0aGVtZUNsYXNzKTtcbi8vICAgaGlzdG9yeS5wdXNoU3RhdGUoeyB0aGVtZTogdGhlbWVDbGFzcyB9LCBsaW5rLmhyZWYsIGxpbmsuaHJlZik7XG4vLyAgIGxvYWRQYWdlKGxpbmsuaHJlZik7XG4vLyB9XG5cbi8vIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0JykpIHtcbi8vICAgZG9jdW1lbnRcbi8vICAgICAucXVlcnlTZWxlY3RvcignLmpzLXBvc3QtbGlzdCcpXG4vLyAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlua1Bvc3RsaXN0KTtcbi8vIH1cblxuLy8gd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbihlKSB7XG4vLyAgIGlmIChlLnN0YXRlKSB7XG4vLyAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIGUuc3RhdGUudGhlbWUpO1xuLy8gICAgIGxvYWRQYWdlKGxvY2F0aW9uLnBhdGhuYW1lKTtcbi8vICAgfVxuLy8gfTtcblxuLy8gZnVuY3Rpb24gbG9hZFBhZ2UodXJsKSB7XG4vLyAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2l0ZS1jb250ZW50Jyk7XG4vLyAgIG1haW4uaW5uZXJIVE1MID0gJyc7XG4vLyAgIG1haW4uY2xhc3NMaXN0LmFkZCgnc2l0ZV9fY29udGVudC0taGlkZGVuJyk7XG5cbi8vICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuLy8gICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG5cbi8vICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbi8vICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuLy8gICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4vLyAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5yZXNwb25zZTtcbi8vICAgICAgIG1haW4uaW5uZXJIVE1MID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaXRlLWNvbnRlbnQnKS5pbm5lckhUTUw7XG4vLyAgICAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoJ3NpdGVfX2NvbnRlbnQtLWhpZGRlbicpO1xuLy8gICAgICAgaWYgKG1haW4ucXVlcnlTZWxlY3RvcignLmpzLXBvc3QtbGlzdCcpKSB7XG4vLyAgICAgICAgIG1haW5cbi8vICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmpzLXBvc3QtbGlzdCcpXG4vLyAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlua1Bvc3RsaXN0KTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgbGF6eUxvYWQobWFpbi5xdWVyeVNlbGVjdG9yQWxsKCdpbWdbZGF0YS1zcmNdJykpO1xuLy8gICAgIH1cbi8vICAgfTtcblxuLy8gICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbi8vICAgICBwYWdlX2NvbnRlbnQuaW5uZXJIVE1MID1cbi8vICAgICAgIFwiRm9yIHNvbWUgcmVhc29uIEkgY291bGRuJ3QgY29ubmVjdCB0byB0aGUgc2VydmVyLCBwbGVhc2UgdHJ5IGxhdGVyIGFnYWluLlwiO1xuLy8gICB9O1xuXG4vLyAgIHJlcXVlc3Quc2VuZCgpO1xuLy8gfVxuXG4vLyBMYXp5IGxvYWQgaW1hZ2VzXG5sYXp5TG9hZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGF6eScpKTtcblxuLyoqIFxuICogRW5oYW5jZSBkZW1vcyB3aXRoIEpTXG4gKiBBZGRzIFwiUmVwbGF5XCIgQnV0dG9uXG4gKiBBZGRzIEludGVyc2VjdGlvbiBPYnNlcnZlciB0byBhdXRvIHBsYXkgYW5pbWF0aW9ucyBcbiAqL1xuZW5oYW5jZURlbW9zKCk7XG5cbi8qKiBcbiAqIE9yZGVyIGRlbW9cbiAqL1xudmFyIGRlbW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWEtZm9jdXMtZGVtbycpO1xudmFyIGFjdGl2ZUxpbmsgPSBbXTtcbmZvciAobGV0IGkgPSAwOyBpIDwgZGVtb3MubGVuZ3RoOyBpKyspIHtcbiAgYWN0aXZlTGluay5wdXNoKDApO1xuXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZGVtbyA9IGRlbW9zW2ldO1xuICAgIHZhciBsaW5rcyA9IGRlbW8ucXVlcnlTZWxlY3RvckFsbCgnYSwgYnV0dG9uJyk7XG4gICAgdmFyIGFuaW1hdGluZyA9IGZhbHNlO1xuICAgIHZhciBmb2N1c0ludGVydmFsO1xuXG4gICAgdmFyIHBsYXlwYXVzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHZhciBwbGF5cGF1c2VfaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgcGxheXBhdXNlLmNsYXNzTGlzdC5hZGQoJ2J0bicpXG4gICAgcGxheXBhdXNlX2lubmVyLmNsYXNzTGlzdC5hZGQoJ2J0bl9faW5uZXInKVxuICAgIHBsYXlwYXVzZS5hcHBlbmRDaGlsZChwbGF5cGF1c2VfaW5uZXIpO1xuXG4gICAgdmFyIGJ1dHRvblRleHRBY3RpdmUgPSAnU3RvcCBhbmltYXRpb24nO1xuICAgIHZhciBidXR0b25UZXh0SW5hY3RpdmUgPSAnUGxheSBhbmltYXRpb24nO1xuXG4gICAgaWYgKGRlbW8uaGFzQXR0cmlidXRlKCdkYXRhLWJ1dHRvbicpKSB7XG4gICAgICBidXR0b25UZXh0SW5hY3RpdmUgPSBkZW1vLmdldEF0dHJpYnV0ZSgnZGF0YS1idXR0b24nKTtcbiAgICB9XG5cbiAgICBzZXRCdXR0b25UZXh0KGJ1dHRvblRleHRJbmFjdGl2ZSk7XG5cbiAgICBkZW1vLmluc2VydEJlZm9yZShwbGF5cGF1c2UsIGRlbW8uZmlyc3RDaGlsZCk7XG5cbiAgICBwbGF5cGF1c2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChhbmltYXRpbmcpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChmb2N1c0ludGVydmFsKVxuICAgICAgICBwbGF5cGF1c2VfaW5uZXIudGV4dENvbnRlbnQgPSBidXR0b25UZXh0SW5hY3RpdmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5rc1thY3RpdmVMaW5rW2ldXS5jbGFzc0xpc3QuYWRkKCdmb2N1cycpO1xuXG4gICAgICAgIGZvY3VzSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZm9jdXNOZXh0LCA3MDApO1xuICAgICAgICBzZXRCdXR0b25UZXh0KGJ1dHRvblRleHRBY3RpdmUpO1xuICAgICAgfSAgXG4gICAgICBcbiAgICAgIGFuaW1hdGluZyA9ICFhbmltYXRpbmc7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBzZXRCdXR0b25UZXh0KHRleHQpIHtcbiAgICAgIHBsYXlwYXVzZV9pbm5lci50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9jdXNOZXh0KCkgeyAgXG4gICAgICBpZiAoYWN0aXZlTGlua1tpXSA8IGxpbmtzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgYWN0aXZlTGlua1tpXSsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlTGlua1tpXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGRlbW8ucXVlcnlTZWxlY3RvcignLmZvY3VzJykuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMnKTtcblxuICAgICAgbGlua3NbYWN0aXZlTGlua1tpXV0uY2xhc3NMaXN0LmFkZCgnZm9jdXMnKTtcbiAgICB9XG4gIH0pKGkpXG59XG5cbi8vIExpZ2h0aG91c2UgZGVtb3NcblxuZnVuY3Rpb24gYWRkRGVtb0xpZ2h0aG91c2VUZXN0KCkge1xuICB2YXIgbGlnaHRob3VzZVRlc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWxpZ2h0aG91c2UtdGVzdCcpO1xuXG4gIGlmKGxpZ2h0aG91c2VUZXN0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlnaHRob3VzZVRlc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGlnaHRob3VzZVRlc3QgPSBsaWdodGhvdXNlVGVzdHNbaV07XG4gICAgY29uc3QgYnV0dG9uID0gbGlnaHRob3VzZVRlc3QucXVlcnlTZWxlY3RvcignLmpzLXJ1bi1saWdodGhvdXNlLXRlc3QnKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBidXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50ID0gXCJSdW5uaW5nIHRlc3Rz4oCmXCI7XG4gICAgICBsaWdodGhvdXNlVGVzdC5xdWVyeVNlbGVjdG9yKCcuanMtbGlnaHRob3VzZS1zdGF0dXMnKS50ZXh0Q29udGVudCA9IFwiUnVubmluZyB0ZXN0c+KAplwiO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBsaWdodGhvdXNlVGVzdC5jbGFzc0xpc3QuYWRkKCdsaWdodGhvdXNlLXRlc3QtLWZpbmlzaGVkJyk7XG4gICAgICAgIGxpZ2h0aG91c2VUZXN0LnF1ZXJ5U2VsZWN0b3IoJy5qcy1saWdodGhvdXNlLXN0YXR1cycpLnRleHRDb250ZW50ID0gXCJUZXN0cyBmaW5pc2hlZC4gQWNjZXNzaWJpbGl0eSBzY29yZTogMTAwLlwiO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfSk7XG4gIFxuICB9XG59XG5cbmFkZERlbW9MaWdodGhvdXNlVGVzdCgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==