!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(3),e.exports=n(2)},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}["interactive","complete"].indexOf(document.readyState)>=0?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function r(){document.addEventListener("mousemove",c),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c),document.addEventListener("pointermove",c),document.addEventListener("pointerdown",c),document.addEventListener("pointerup",c),document.addEventListener("touchmove",c),document.addEventListener("touchstart",c),document.addEventListener("touchend",c)}function c(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",c),document.removeEventListener("pointermove",c),document.removeEventListener("pointerdown",c),document.removeEventListener("pointerup",c),document.removeEventListener("touchmove",c),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",c))}document.addEventListener("keydown",function(t){s(document.activeElement)&&o(document.activeElement),e=!0},!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("focus",function(t){var n,a,r;s(t.target)&&((e||(n=t.target,a=n.type,"INPUT"==(r=n.tagName)&&i[a]&&!n.readOnly||"TEXTAREA"==r&&!n.readOnly||n.isContentEditable))&&o(t.target))},!0),document.addEventListener("blur",function(e){var i;s(e.target)&&((e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(i=e.target).hasAttribute("data-focus-visible-added")&&(i.classList.remove("focus-visible"),i.removeAttribute("data-focus-visible-added"))))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),r())},!0),r(),document.body.classList.add("js-focus-visible")})}()},function(e,t,n){},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.canvas=document.querySelector(t.canvas),this.canvas&&(this.context=this.canvas.getContext("2d"),this.color="red",this.size=this.prop_set(t.size,20),this.num_x=t.num_x,this.num_y=t.num_y,this.init_canvas())}var t,n,s;return t=e,(n=[{key:"init_canvas",value:function(){if(this.prepare_canvas(),this.attach_events(),this.options.pattern&&this.parse_pattern(),this.options.fill){for(var e=Math.round(this.get_parent_width()/this.size/2),t=0;t<e;t++)this.squares.push({x:this.size*(2*t),y:0});this.draw_squares()}}},{key:"attach_events",value:function(){this.place_square=this.place_square.bind(this),this.canvas.addEventListener("click",this.place_square)}},{key:"place_square",value:function(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop,i=t-t%this.size,s=n-n%this.size;s===this.canvas.height&&(s-=this.size),i===this.canvas.width&&(i-=this.size);var o=this.squares.findIndex(function(e){return e.x===i&e.y===s});o>-1?this.squares.splice(o,1):this.squares.push({x:i,y:s}),this.draw_squares(this.context,this.squares)}},{key:"prop_set",value:function(e,t){return e||t}},{key:"prepare_canvas",value:function(){this.canvas.classList.add("square-canvas--visible"),this.canvas.width=this.num_x*this.size,this.canvas.height=this.num_y*this.size,"infinite"===this.num_x&&(this.canvas.width=this.get_parent_width()),this.squares=[]}},{key:"get_parent_width",value:function(){var e=getComputedStyle(this.canvas.parentNode),t=this.canvas.parentNode.clientWidth;return t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}},{key:"parse_pattern",value:function(){for(var e=this.options.pattern.split(","),t=0;t<e.length;t++){var n=parseInt(e[t].trim()),i=Math.floor(t/this.num_x),s=(t+this.num_x)%this.num_x;"infinite"===this.num_x&&(i=0,s=t),n&&this.squares.push({x:this.size*s,y:this.size*i})}this.draw_squares()}},{key:"draw_squares",value:function(){this.context.fillStyle=this.prop_set(this.options.color,"rgba(51, 51, 51, 0.9)");for(var e=0;e<this.squares.length;e++){var t=this.squares[e];this.context.fillRect(t.x,t.y,this.size,this.size)}}}])&&i(t.prototype,n),s&&i(t,s),e}(),o=o||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},a=o;var r,c=function(){navigator.connection&&navigator.connection.saveData&&(navigator.connection.effectiveType.includes("2g")||navigator.connection.saveData)||a(function(){!function(){for(var e,t,n=document.querySelectorAll(".js-nav-main a"),i=0;i<n.length;i++)e=n[i].href,t=void 0,((t=document.createElement("link")).relList||{}).supports&&!t.relList.supports("prefetch")||(t.rel="prefetch",t.href=e,document.head.appendChild(t))}()})};function u(e){var t,n=e.dataset.src;return(t=n,new Promise(function(e,n){var i=new Image;t&&(i.src=t),i.onload=e,i.onerror=n})).then(function(){e.classList.add("lazyloaded"),e.src=n,e.removeAttribute("data-src")})}function d(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.intersectionRatio>0){var i=n.target;u(i),i.classList.remove("lazy"),r.unobserve(i)}}}var l,v=function(e){if(e.length){r=new IntersectionObserver(d,{rootMargin:"100px 0px"});for(var t=0;t<e.length;t++){var n=e[t];n.classList.contains("lazyloaded")||r.observe(n)}}},m=document.querySelectorAll(".js-demo");function h(e){var t=document.createElement("div");t.classList.add("demo__controls");var n=document.createElement("button"),i=document.createElement("span");i.classList.add("btn__inner"),i.textContent="Replay animation",n.appendChild(i),n.classList.add("btn"),n.classList.add("demo__btn"),n.addEventListener("click",function(){e.classList.remove("demo--playing"),setTimeout(function(){e.classList.add("demo--playing")},600)}),t.appendChild(n),e.appendChild(t)}function f(e){for(var t=function(t){var n=e[t];1===n.intersectionRatio&&setTimeout(function(){n.target.classList.add("demo--playing"),l.unobserve(n.target)},400)},n=0;n<e.length;n++)t(n)}var p=function(){if(m.length)for(var e=0;e<m.length;e++){var t=m[e];h(t),l=new IntersectionObserver(f,{threshold:[1]}),t.classList.contains("demo--playing")||l.observe(t)}};n(1),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var y;new s({canvas:".js-sq-tl",num_x:1,num_y:1,pattern:"1",color:"#36B1BF"}),new s({canvas:".js-sq-tr",num_x:2,num_y:1,pattern:"1,1",color:"#36B1BF"}),new s({canvas:".js-sq-br",num_x:1,num_y:2,pattern:"1,1",color:"#F23C50"}),new s({canvas:".js-sq-bl",num_x:2,num_y:2,pattern:"1,0,1,1",color:"#F23C50"}),new s({canvas:".js-sq-home-intro",num_x:6,num_y:5,color:"#568b8e",size:10,pattern:"0,0,1,1,0,1,\n    0,1,1,0,0,1,\n    1,1,0,0,0,1,\n    0,1,1,0,0,0,\n    0,0,1,1,0,1"});document.querySelector(".js-random-emoji")&&(document.querySelector(".js-random-emoji").textContent=(y=["ðŸ¤¤","ðŸ³","ðŸ»","ðŸ‘ŠðŸ»","ðŸ³"])[Math.round(Math.random()*(y.length-1))]),document.querySelector(".js-scroll-top")&&document.querySelector(".js-scroll-top").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".js-logo").focus()}),c(),v(document.querySelectorAll(".lazy")),p();for(var g=document.querySelectorAll(".js-a-focus-demo"),b=[],L=function(e){b.push(0),function(){var t,n=g[e],i=n.querySelectorAll("a, button"),s=!1,o=document.createElement("button"),a=document.createElement("span");o.classList.add("btn"),a.classList.add("btn__inner"),o.appendChild(a);var r="Play animation";function c(e){a.textContent=e}function u(){b[e]<i.length-1?b[e]++:b[e]=0,n.querySelector(".focus").classList.remove("focus"),i[b[e]].classList.add("focus")}n.hasAttribute("data-button")&&(r=n.getAttribute("data-button")),c(r),n.insertBefore(o,n.firstChild),o.addEventListener("click",function(){s?(clearInterval(t),a.textContent=r):(i[b[e]].classList.add("focus"),t=window.setInterval(u,700),c("Stop animation")),s=!s})}()},_=0;_<g.length;_++)L(_)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZvY3VzLXZpc2libGUvZGlzdC9mb2N1cy12aXNpYmxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0aWMvc2NyaXB0cy9zcXVhcmVzLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0aWMvc2NyaXB0cy9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpYy9zY3JpcHRzL3ByZWZldGNoLW5hdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGljL3NjcmlwdHMvbGF6eWxvYWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpYy9zY3JpcHRzL2RlbW8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRpYy9zY3JpcHRzL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZG9jdW1lbnQiLCJjYWxsYmFjayIsImxvYWRlZCIsImxvYWQiLCJpbmRleE9mIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJvbkRPTVJlYWR5IiwiaGFkS2V5Ym9hcmRFdmVudCIsImhhZEZvY3VzVmlzaWJsZVJlY2VudGx5IiwiaGFkRm9jdXNWaXNpYmxlUmVjZW50bHlUaW1lb3V0IiwiaW5wdXRUeXBlc1doaXRlbGlzdCIsInRleHQiLCJzZWFyY2giLCJ1cmwiLCJ0ZWwiLCJlbWFpbCIsInBhc3N3b3JkIiwibnVtYmVyIiwiZGF0ZSIsIm1vbnRoIiwid2VlayIsInRpbWUiLCJkYXRldGltZSIsImRhdGV0aW1lLWxvY2FsIiwiaXNWYWxpZEZvY3VzVGFyZ2V0IiwiZWwiLCJub2RlTmFtZSIsImNsYXNzTGlzdCIsImFkZEZvY3VzVmlzaWJsZUNsYXNzIiwiY29udGFpbnMiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJvblBvaW50ZXJEb3duIiwiZSIsImFkZEluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycyIsIm9uSW5pdGlhbFBvaW50ZXJNb3ZlIiwidGFyZ2V0IiwidG9Mb3dlckNhc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWN0aXZlRWxlbWVudCIsInR5cGUiLCJ0YWdOYW1lIiwicmVhZE9ubHkiLCJpc0NvbnRlbnRFZGl0YWJsZSIsImhhc0F0dHJpYnV0ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ2aXNpYmlsaXR5U3RhdGUiLCJib2R5IiwiZmFjdG9yeSIsIlNxdWFyZXMiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNhbnZhcyIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImNvbG9yIiwic2l6ZSIsInByb3Bfc2V0IiwibnVtX3giLCJudW1feSIsImluaXRfY2FudmFzIiwicHJlcGFyZV9jYW52YXMiLCJhdHRhY2hfZXZlbnRzIiwicGF0dGVybiIsInBhcnNlX3BhdHRlcm4iLCJmaWxsIiwibnVtX2JveGVzIiwiTWF0aCIsInJvdW5kIiwiZ2V0X3BhcmVudF93aWR0aCIsInNxdWFyZXMiLCJwdXNoIiwieCIsInkiLCJkcmF3X3NxdWFyZXMiLCJwbGFjZV9zcXVhcmUiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInhfcmF3IiwicGFnZVgiLCJvZmZzZXRMZWZ0IiwieV9yYXciLCJwYWdlWSIsIm9mZnNldFRvcCIsImluZGV4IiwiZmluZEluZGV4IiwicG9zIiwic3BsaWNlIiwicHJvcCIsInBhcmVudF9zdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyZW50Tm9kZSIsInBhcmVudF93aWR0aCIsImNsaWVudFdpZHRoIiwicGFyc2VGbG9hdCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Iiwic3BsaXQiLCJsZW5ndGgiLCJib3giLCJwYXJzZUludCIsInRyaW0iLCJyb3ciLCJmbG9vciIsImNvbCIsImZpbGxTdHlsZSIsInNxdWFyZSIsImZpbGxSZWN0IiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNiIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZGlkVGltZW91dCIsInRpbWVSZW1haW5pbmciLCJtYXgiLCJwcmVmZXRjaE5hdiIsIm9ic2VydmVyIiwibmF2aWdhdG9yIiwiY29ubmVjdGlvbiIsInNhdmVEYXRhIiwiZWZmZWN0aXZlVHlwZSIsImluY2x1ZGVzIiwibGluayIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImhyZWYiLCJjcmVhdGVFbGVtZW50IiwicmVsTGlzdCIsInN1cHBvcnRzIiwicmVsIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiZ2V0TGlua3MiLCJsb2FkSW1hZ2UiLCJpbWFnZSIsInNyYyIsImRhdGFzZXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsInRoZW4iLCJpbWFnZVZpc2libGUiLCJlbnRyaWVzIiwiZW50cnkiLCJpbnRlcnNlY3Rpb25SYXRpbyIsInVub2JzZXJ2ZSIsImxhenlMb2FkIiwiZGVtb09ic2VydmVyIiwiaW1hZ2VzIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJyb290TWFyZ2luIiwib2JzZXJ2ZSIsImRlbW9zIiwiZGVtb0FkZEJ1dHRvbiIsImRlbW8iLCJjb250cm9scyIsImJ1dHRvbiIsImJ1dHRvbl9pbm5lciIsInRleHRDb250ZW50IiwiZGVtb1Zpc2libGUiLCJfbG9vcCIsImVuaGFuY2VEZW1vcyIsInRocmVzaG9sZCIsInJlcXVpcmUiLCJFbGVtZW50IiwiY2xvc2VzdCIsImRvY3VtZW50RWxlbWVudCIsIm1hdGNoZXMiLCJwYXJlbnRFbGVtZW50Iiwibm9kZVR5cGUiLCJlbW9qaXMiLCJyYW5kb20iLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwiYWN0aXZlTGluayIsImZvY3VzSW50ZXJ2YWwiLCJhbmltYXRpbmciLCJwbGF5cGF1c2UiLCJwbGF5cGF1c2VfaW5uZXIiLCJidXR0b25UZXh0SW5hY3RpdmUiLCJzZXRCdXR0b25UZXh0IiwiZm9jdXNOZXh0IiwiZ2V0QXR0cmlidXRlIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUEsMkRDOUVDLFdBQXFCLGFBaVJ0QixvQkFBQUMsVUF2QkEsU0FBQUMsR0FDQSxJQUFBQyxFQUtBLFNBQUFDLElBQ0FELElBQ0FBLEdBQUEsRUFFQUQsS0FJQSwyQkFBQUcsUUFBQUosU0FBQUssYUFBQSxFQUNBSixLQUVBQyxHQUFBLEVBQ0FGLFNBQUFNLGlCQUFBLG1CQUFBSCxHQUFBLEdBQ0FJLE9BQUFELGlCQUFBLE9BQUFILEdBQUEsSUFLQUssQ0E3UUEsV0FDQSxJQUFBQyxHQUFBLEVBQ0FDLEdBQUEsRUFDQUMsRUFBQSxLQUVBQyxFQUFBLENBQ0FDLE1BQUEsRUFDQUMsUUFBQSxFQUNBQyxLQUFBLEVBQ0FDLEtBQUEsRUFDQUMsT0FBQSxFQUNBQyxVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsTUFBQSxFQUNBQyxPQUFBLEVBQ0FDLE1BQUEsRUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLGtCQUFBLEdBUUEsU0FBQUMsRUFBQUMsR0FDQSxTQUNBQSxHQUNBQSxJQUFBM0IsVUFDQSxTQUFBMkIsRUFBQUMsVUFDQSxTQUFBRCxFQUFBQyxVQUNBLGNBQUFELEdBQ0EsYUFBQUEsRUFBQUUsV0FzQ0EsU0FBQUMsRUFBQUgsR0FDQUEsRUFBQUUsVUFBQUUsU0FBQSxtQkFHQUosRUFBQUUsVUFBQUcsSUFBQSxpQkFDQUwsRUFBQU0sYUFBQSxnQ0FzQ0EsU0FBQUMsRUFBQUMsR0FDQTFCLEdBQUEsRUF3RUEsU0FBQTJCLElBQ0FwQyxTQUFBTSxpQkFBQSxZQUFBK0IsR0FDQXJDLFNBQUFNLGlCQUFBLFlBQUErQixHQUNBckMsU0FBQU0saUJBQUEsVUFBQStCLEdBQ0FyQyxTQUFBTSxpQkFBQSxjQUFBK0IsR0FDQXJDLFNBQUFNLGlCQUFBLGNBQUErQixHQUNBckMsU0FBQU0saUJBQUEsWUFBQStCLEdBQ0FyQyxTQUFBTSxpQkFBQSxZQUFBK0IsR0FDQXJDLFNBQUFNLGlCQUFBLGFBQUErQixHQUNBckMsU0FBQU0saUJBQUEsV0FBQStCLEdBc0JBLFNBQUFBLEVBQUFGLEdBR0EsU0FBQUEsRUFBQUcsT0FBQVYsU0FBQVcsZ0JBSUE5QixHQUFBLEVBekJBVCxTQUFBd0Msb0JBQUEsWUFBQUgsR0FDQXJDLFNBQUF3QyxvQkFBQSxZQUFBSCxHQUNBckMsU0FBQXdDLG9CQUFBLFVBQUFILEdBQ0FyQyxTQUFBd0Msb0JBQUEsY0FBQUgsR0FDQXJDLFNBQUF3QyxvQkFBQSxjQUFBSCxHQUNBckMsU0FBQXdDLG9CQUFBLFlBQUFILEdBQ0FyQyxTQUFBd0Msb0JBQUEsWUFBQUgsR0FDQXJDLFNBQUF3QyxvQkFBQSxhQUFBSCxHQUNBckMsU0FBQXdDLG9CQUFBLFdBQUFILElBcUJBckMsU0FBQU0saUJBQUEsVUFuSUEsU0FBQTZCLEdBQ0FULEVBQUExQixTQUFBeUMsZ0JBQ0FYLEVBQUE5QixTQUFBeUMsZUFHQWhDLEdBQUEsSUE4SEEsR0FDQVQsU0FBQU0saUJBQUEsWUFBQTRCLEdBQUEsR0FDQWxDLFNBQUFNLGlCQUFBLGNBQUE0QixHQUFBLEdBQ0FsQyxTQUFBTSxpQkFBQSxhQUFBNEIsR0FBQSxHQUNBbEMsU0FBQU0saUJBQUEsUUE1R0EsU0FBQTZCLEdBOUVBLElBQUFSLEVBQ0FlLEVBQ0FDLEVBOEVBakIsRUFBQVMsRUFBQUcsV0FJQTdCLElBcEZBa0IsRUFvRkFRLEVBQUFHLE9BbkZBSSxFQUFBZixFQUFBZSxLQUdBLFVBRkFDLEVBQUFoQixFQUFBZ0IsVUFFQS9CLEVBQUE4QixLQUFBZixFQUFBaUIsVUFJQSxZQUFBRCxJQUFBaEIsRUFBQWlCLFVBSUFqQixFQUFBa0IscUJBeUVBZixFQUFBSyxFQUFBRyxXQXFHQSxHQUNBdEMsU0FBQU0saUJBQUEsT0E5RkEsU0FBQTZCLEdBeERBLElBQUFSLEVBeURBRCxFQUFBUyxFQUFBRyxXQUtBSCxFQUFBRyxPQUFBVCxVQUFBRSxTQUFBLGtCQUNBSSxFQUFBRyxPQUFBUSxhQUFBLCtCQU1BcEMsR0FBQSxFQUNBSCxPQUFBd0MsYUFBQXBDLEdBQ0FBLEVBQUFKLE9BQUF5QyxXQUFBLFdBQ0F0QyxHQUFBLEVBQ0FILE9BQUF3QyxhQUFBcEMsSUFDUyxNQTFFVGdCLEVBMkVBUSxFQUFBRyxRQTFFQVEsYUFBQSw4QkFHQW5CLEVBQUFFLFVBQUFvQixPQUFBLGlCQUNBdEIsRUFBQXVCLGdCQUFBLGlDQWlKQSxHQUNBbEQsU0FBQU0saUJBQUEsbUJBbkVBLFNBQUE2QixHQUNBLFVBQUFuQyxTQUFBbUQsa0JBS0F6QyxJQUNBRCxHQUFBLEdBRUEyQixPQTBEQSxHQUNBQSxJQUVBcEMsU0FBQW9ELEtBQUF2QixVQUFBRyxJQUFBLHNCQXRQOERxQixvT0NrSS9DQyxhQWxJYixTQUFBQSxFQUFZQyxnR0FBU0MsQ0FBQUMsS0FBQUgsR0FDbkJHLEtBQUtGLFFBQVVBLEVBRWZFLEtBQUtDLE9BQVMxRCxTQUFTMkQsY0FBY0osRUFBUUcsUUFFeENELEtBQUtDLFNBRVZELEtBQUtHLFFBQVVILEtBQUtDLE9BQU9HLFdBQVcsTUFDdENKLEtBQUtLLE1BQVEsTUFFYkwsS0FBS00sS0FBT04sS0FBS08sU0FBU1QsRUFBUVEsS0FBTSxJQUV4Q04sS0FBS1EsTUFBUVYsRUFBUVUsTUFDckJSLEtBQUtTLE1BQVFYLEVBQVFXLE1BRXJCVCxLQUFLVSw0RUFXTCxHQVBBVixLQUFLVyxpQkFDTFgsS0FBS1ksZ0JBRURaLEtBQUtGLFFBQVFlLFNBQ2ZiLEtBQUtjLGdCQUdIZCxLQUFLRixRQUFRaUIsS0FBTSxDQUdyQixJQUZBLElBQU1DLEVBQVlDLEtBQUtDLE1BQU1sQixLQUFLbUIsbUJBQXFCbkIsS0FBS00sS0FBTyxHQUUxRC9GLEVBQUksRUFBR0EsRUFBSXlHLEVBQVd6RyxJQUM3QnlGLEtBQUtvQixRQUFRQyxLQUFLLENBQUVDLEVBQUd0QixLQUFLTSxNQUFRLEVBQUkvRixHQUFJZ0gsRUFBRyxJQUdqRHZCLEtBQUt3Qix3REFLUHhCLEtBQUt5QixhQUFlekIsS0FBS3lCLGFBQWExRixLQUFLaUUsTUFDM0NBLEtBQUtDLE9BQU9wRCxpQkFBaUIsUUFBU21ELEtBQUt5QixtREFHaEMvQyxHQUNYc0IsS0FBS0csUUFBUXVCLFVBQVUsRUFBRyxFQUFHMUIsS0FBS0MsT0FBTzBCLE1BQU8zQixLQUFLQyxPQUFPMkIsUUFFNUQsSUFBTUMsRUFBUW5ELEVBQUVvRCxNQUFRcEQsRUFBRUcsT0FBT2tELFdBQzNCQyxFQUFRdEQsRUFBRXVELE1BQVF2RCxFQUFFRyxPQUFPcUQsVUFFN0JaLEVBQUlPLEVBQVNBLEVBQVE3QixLQUFLTSxLQUMxQmlCLEVBQUlTLEVBQVNBLEVBQVFoQyxLQUFLTSxLQUUxQmlCLElBQU12QixLQUFLQyxPQUFPMkIsU0FDcEJMLEdBQUt2QixLQUFLTSxNQUVSZ0IsSUFBTXRCLEtBQUtDLE9BQU8wQixRQUNwQkwsR0FBS3RCLEtBQUtNLE1BR1osSUFBTTZCLEVBQVFuQyxLQUFLb0IsUUFBUWdCLFVBQVUsU0FBQUMsR0FBRyxPQUFLQSxFQUFJZixJQUFNQSxFQUFNZSxFQUFJZCxJQUFNQSxJQUVuRVksR0FBUyxFQUNYbkMsS0FBS29CLFFBQVFrQixPQUFPSCxFQUFPLEdBRTNCbkMsS0FBS29CLFFBQVFDLEtBQUssQ0FBRUMsRUFBR0EsRUFBR0MsRUFBR0EsSUFHL0J2QixLQUFLd0IsYUFBYXhCLEtBQUtHLFFBQVNILEtBQUtvQiwwQ0FHOUJtQixFQUFNL0csR0FDYixPQUFPK0csR0FBYy9HLDJDQUlyQndFLEtBQUtDLE9BQU83QixVQUFVRyxJQUFJLDBCQUUxQnlCLEtBQUtDLE9BQU8wQixNQUFRM0IsS0FBS1EsTUFBUVIsS0FBS00sS0FDdENOLEtBQUtDLE9BQU8yQixPQUFTNUIsS0FBS1MsTUFBUVQsS0FBS00sS0FFcEIsYUFBZk4sS0FBS1EsUUFDUFIsS0FBS0MsT0FBTzBCLE1BQVEzQixLQUFLbUIsb0JBRzNCbkIsS0FBS29CLFFBQVUsOENBSWYsSUFBTW9CLEVBQWdCQyxpQkFBaUJ6QyxLQUFLQyxPQUFPeUMsWUFDL0NDLEVBQWUzQyxLQUFLQyxPQUFPeUMsV0FBV0UsWUFLMUMsT0FKQUQsR0FDRUUsV0FBV0wsRUFBY00sYUFDekJELFdBQVdMLEVBQWNPLHNEQVEzQixJQUZBLElBQU1sQyxFQUFVYixLQUFLRixRQUFRZSxRQUFRbUMsTUFBTSxLQUVsQ3pJLEVBQUksRUFBR0EsRUFBSXNHLEVBQVFvQyxPQUFRMUksSUFBSyxDQUN2QyxJQUFNMkksRUFBTUMsU0FBU3RDLEVBQVF0RyxHQUFHNkksUUFDNUJDLEVBQU1wQyxLQUFLcUMsTUFBTS9JLEVBQUl5RixLQUFLUSxPQUMxQitDLEdBQU9oSixFQUFJeUYsS0FBS1EsT0FBU1IsS0FBS1EsTUFFZixhQUFmUixLQUFLUSxRQUNQNkMsRUFBTSxFQUNORSxFQUFNaEosR0FHSjJJLEdBQ0ZsRCxLQUFLb0IsUUFBUUMsS0FBSyxDQUFFQyxFQUFHdEIsS0FBS00sS0FBT2lELEVBQUtoQyxFQUFHdkIsS0FBS00sS0FBTytDLElBSTNEckQsS0FBS3dCLHNEQUlMeEIsS0FBS0csUUFBUXFELFVBQVl4RCxLQUFLTyxTQUM1QlAsS0FBS0YsUUFBUU8sTUFDYix5QkFHRixJQUFLLElBQUk5RixFQUFJLEVBQUdBLEVBQUl5RixLQUFLb0IsUUFBUTZCLE9BQVExSSxJQUFLLENBQzVDLElBQU1rSixFQUFTekQsS0FBS29CLFFBQVE3RyxHQUM1QnlGLEtBQUtHLFFBQVF1RCxTQUFTRCxFQUFPbkMsRUFBR21DLEVBQU9sQyxFQUFHdkIsS0FBS00sS0FBTU4sS0FBS00sNENDOUgxRHFELEVBQ0pBLEdBQ0EsU0FBU0MsR0FDUCxJQUFNQyxFQUFRQyxLQUFLQyxNQUNuQixPQUFPeEUsV0FBVyxXQUNoQnFFLEVBQUcsQ0FDREksWUFBWSxFQUNaQyxjQUFlLFdBQ2IsT0FBT2hELEtBQUtpRCxJQUFJLEVBQUcsSUFBTUosS0FBS0MsTUFBUUYsUUFHekMsSUFHUUYsSUNpQ0FRLElDL0NYQyxFRCtDV0QsRUFqQmYsV0FFTUUsVUFBVUMsWUFBY0QsVUFBVUMsV0FBV0MsV0FFN0NGLFVBQVVDLFdBQVdFLGNBQWNDLFNBQVMsT0FDNUNKLFVBQVVDLFdBQVdDLFdBT3pCWixFQUFvQixZQXJCdEIsV0FJRSxJQUZBLElBaEIwQnJHLEVBQ3BCb0gsRUFlQUMsRUFBUXBJLFNBQVNxSSxpQkFBaUIsa0JBRS9CckssRUFBSSxFQUFHQSxFQUFJb0ssRUFBTTFCLE9BQVExSSxJQWxCUitDLEVBbUJMcUgsRUFBTXBLLEdBQUdzSyxLQWxCeEJILGFBQU9uSSxTQUFTdUksY0FBYyxTQUcxQkMsU0FBVyxJQUFJQyxXQUFhTixFQUFLSyxRQUFRQyxTQUFTLGNBSTVETixFQUFLTyxJQUFNLFdBQ1hQLEVBQUtHLEtBQU92SCxFQUVaZixTQUFTMkksS0FBS0MsWUFBWVQsSUF5QnhCVSxNQ3pDSixTQUFTQyxFQUFVQyxHQUNqQixJQVFrQmhJLEVBUlppSSxFQUFNRCxFQUFNRSxRQUFRRCxJQUMxQixPQU9rQmpJLEVBUEFpSSxFQVFYLElBQUlFLFFBQVEsU0FBQ0MsRUFBU0MsR0FDM0IsSUFBTUwsRUFBUSxJQUFJTSxNQUNkdEksSUFDRmdJLEVBQU1DLElBQU1qSSxHQUVkZ0ksRUFBTU8sT0FBU0gsRUFDZkosRUFBTVEsUUFBVUgsS0FkS0ksS0FBSyxXQUMxQlQsRUFBTWxILFVBQVVHLElBQUksY0FDcEIrRyxFQUFNQyxJQUFNQSxFQUNaRCxFQUFNN0YsZ0JBQWdCLGNBZTFCLFNBQVN1RyxFQUFhQyxHQUNwQixJQUFLLElBQUkxTCxFQUFJLEVBQUdBLEVBQUkwTCxFQUFRaEQsT0FBUTFJLElBQUssQ0FDdkMsSUFBSTJMLEVBQVFELEVBQVExTCxHQUNwQixHQUFJMkwsRUFBTUMsa0JBQW9CLEVBQUcsQ0FDL0IsSUFBTWIsRUFBUVksRUFBTXJILE9BQ3BCd0csRUFBVUMsR0FDVkEsRUFBTWxILFVBQVVvQixPQUFPLFFBRXZCNEUsRUFBU2dDLFVBQVVkLEtBc0JWZSxJQ2pEWEMsRURpRFdELEVBakJmLFNBQWtCRSxHQUNoQixHQUFJQSxFQUFPdEQsT0FBUSxDQUNqQm1CLEVBQVcsSUFBSW9DLHFCQUFxQlIsRUFBYyxDQUNoRFMsV0FBWSxjQUdkLElBQUssSUFBSWxNLEVBQUksRUFBR0EsRUFBSWdNLEVBQU90RCxPQUFRMUksSUFBSyxDQUN0QyxJQUFJK0ssRUFBUWlCLEVBQU9oTSxHQUNmK0ssRUFBTWxILFVBQVVFLFNBQVMsZUFJN0I4RixFQUFTc0MsUUFBUXBCLE1DN0NqQnFCLEVBQVFwSyxTQUFTcUksaUJBQWlCLFlBR3hDLFNBQVNnQyxFQUFjQyxHQUNyQixJQUFNQyxFQUFXdkssU0FBU3VJLGNBQWMsT0FDeENnQyxFQUFTMUksVUFBVUcsSUFBSSxrQkFDdkIsSUFBTXdJLEVBQVN4SyxTQUFTdUksY0FBYyxVQUNoQ2tDLEVBQWV6SyxTQUFTdUksY0FBYyxRQUM1Q2tDLEVBQWE1SSxVQUFVRyxJQUFJLGNBQzNCeUksRUFBYUMsWUFBYyxtQkFDM0JGLEVBQU81QixZQUFZNkIsR0FFbkJELEVBQU8zSSxVQUFVRyxJQUFJLE9BQ3JCd0ksRUFBTzNJLFVBQVVHLElBQUksYUFFckJ3SSxFQUFPbEssaUJBQWlCLFFBQVMsV0FDL0JnSyxFQUFLekksVUFBVW9CLE9BQU8saUJBQ3RCRCxXQUFXLFdBQ1RzSCxFQUFLekksVUFBVUcsSUFBSSxrQkFDbEIsT0FHTHVJLEVBQVMzQixZQUFZNEIsR0FDckJGLEVBQUsxQixZQUFZMkIsR0FHbkIsU0FBU0ksRUFBWWpCLEdBQ25CLElBRDRCLElBQUFrQixFQUFBLFNBQ25CNU0sR0FDUCxJQUFJMkwsRUFBUUQsRUFBUTFMLEdBQ1ksSUFBNUIyTCxFQUFNQyxtQkFDUjVHLFdBQVcsV0FDVDJHLEVBQU1ySCxPQUFPVCxVQUFVRyxJQUFJLGlCQUUzQitILEVBQWFGLFVBQVVGLEVBQU1ySCxTQUM1QixNQVBFdEUsRUFBSSxFQUFHQSxFQUFJMEwsRUFBUWhELE9BQVExSSxJQUFLNE0sRUFBaEM1TSxHQStCSTZNLE1BbkJmLFdBQ0UsR0FBSVQsRUFBTTFELE9BQ1IsSUFBSyxJQUFJMUksRUFBSSxFQUFHQSxFQUFJb00sRUFBTTFELE9BQVExSSxJQUFLLENBQ3JDLElBQU1zTSxFQUFPRixFQUFNcE0sR0FDbkJxTSxFQUFjQyxHQUVkUCxFQUFlLElBQUlFLHFCQUFxQlUsRUFBYSxDQUNuREcsVUFBVyxDQUFDLEtBR1ZSLEVBQUt6SSxVQUFVRSxTQUFTLGtCQUk1QmdJLEVBQWFJLFFBQVFHLEtDbkQzQlMsRUFBUSxHQUVIQyxRQUFRcEwsVUFBVXFMLFVBQ3JCRCxRQUFRcEwsVUFBVXFMLFFBQVUsU0FBU2xMLEdBQ25DLElBQUk0QixFQUFLOEIsS0FDVCxJQUFLekQsU0FBU2tMLGdCQUFnQm5KLFNBQVNKLEdBQUssT0FBTyxLQUNuRCxFQUFHLENBQ0QsR0FBSUEsRUFBR3dKLFFBQVFwTCxHQUFJLE9BQU80QixFQUMxQkEsRUFBS0EsRUFBR3lKLGVBQWlCekosRUFBR3dFLGlCQUNkLE9BQVB4RSxHQUErQixJQUFoQkEsRUFBRzBKLFVBQzNCLE9BQU8sT0FJWCxJQWtEUUMsRUFsRFEsSUFBSWhJLEVBQVEsQ0FDMUJJLE9BQVEsWUFDUk8sTUFBTyxFQUNQQyxNQUFPLEVBQ1BJLFFBQVMsSUFDVFIsTUFBTyxZQUdPLElBQUlSLEVBQVEsQ0FDMUJJLE9BQVEsWUFDUk8sTUFBTyxFQUNQQyxNQUFPLEVBQ1BJLFFBQVMsTUFDVFIsTUFBTyxZQUdPLElBQUlSLEVBQVEsQ0FDMUJJLE9BQVEsWUFDUk8sTUFBTyxFQUNQQyxNQUFPLEVBQ1BJLFFBQVMsTUFDVFIsTUFBTyxZQUdPLElBQUlSLEVBQVEsQ0FDMUJJLE9BQVEsWUFDUk8sTUFBTyxFQUNQQyxNQUFPLEVBQ1BJLFFBQVMsVUFDVFIsTUFBTyxZQUdVLElBQUlSLEVBQVEsQ0FDN0JJLE9BQVEsb0JBQ1JPLE1BQU8sRUFDUEMsTUFBTyxFQUNQSixNQUFPLFVBQ1BDLEtBQU0sR0FDTk8sUUFBTyx3RkFrQkx0RSxTQUFTMkQsY0FBYyxzQkFDekIzRCxTQUFTMkQsY0FBYyxvQkFBb0IrRyxhQVByQ1ksRUFBUyxDQUFDLEtBQU0sS0FBTSxLQUFNLE9BQVEsT0FFckI1RyxLQUFLQyxNQUFNRCxLQUFLNkcsVUFBWUQsRUFBTzVFLE9BQVMsTUFZL0QxRyxTQUFTMkQsY0FBYyxtQkFDekIzRCxTQUFTMkQsY0FBYyxrQkFBa0JyRCxpQkFBaUIsUUFBUyxTQUFBNkIsR0FDakVBLEVBQUVxSixpQkFDRnhMLFNBQVMyRCxjQUFjLFlBQVk4SCxVQVF2QzdELElBaUVBa0MsRUFBUzlKLFNBQVNxSSxpQkFBaUIsVUFPbkN3QyxJQU9BLElBRkEsSUFBSVQsRUFBUXBLLFNBQVNxSSxpQkFBaUIsb0JBQ2xDcUQsRUFBYSxjQUNSMU4sR0FDUDBOLEVBQVc1RyxLQUFLLEdBRWhCLFdBQ0UsSUFHSTZHLEVBSEVyQixFQUFPRixFQUFNcE0sR0FDZm9LLEVBQVFrQyxFQUFLakMsaUJBQWlCLGFBQzlCdUQsR0FBWSxFQUdaQyxFQUFZN0wsU0FBU3VJLGNBQWMsVUFDbkN1RCxFQUFrQjlMLFNBQVN1SSxjQUFjLFFBQzdDc0QsRUFBVWhLLFVBQVVHLElBQUksT0FDeEI4SixFQUFnQmpLLFVBQVVHLElBQUksY0FDOUI2SixFQUFVakQsWUFBWWtELEdBRXRCLElBQ0lDLEVBQXFCLGlCQXdCekIsU0FBU0MsRUFBY25MLEdBQ3JCaUwsRUFBZ0JwQixZQUFjN0osRUFHaEMsU0FBU29MLElBQ0hQLEVBQVcxTixHQUFLb0ssRUFBTTFCLE9BQVMsRUFDakNnRixFQUFXMU4sS0FFWDBOLEVBQVcxTixHQUFLLEVBR2xCc00sRUFBSzNHLGNBQWMsVUFBVTlCLFVBQVVvQixPQUFPLFNBRTlDbUYsRUFBTXNELEVBQVcxTixJQUFJNkQsVUFBVUcsSUFBSSxTQW5DakNzSSxFQUFLeEgsYUFBYSxpQkFDcEJpSixFQUFxQnpCLEVBQUs0QixhQUFhLGdCQUd6Q0YsRUFBY0QsR0FFZHpCLEVBQUs2QixhQUFhTixFQUFXdkIsRUFBSzhCLFlBRWxDUCxFQUFVdkwsaUJBQWlCLFFBQVMsV0FDOUJzTCxHQUNGUyxjQUFjVixHQUNkRyxFQUFnQnBCLFlBQWNxQixJQUU5QjNELEVBQU1zRCxFQUFXMU4sSUFBSTZELFVBQVVHLElBQUksU0FFbkMySixFQUFnQnBMLE9BQU8rTCxZQUFZTCxFQUFXLEtBQzlDRCxFQW5CbUIsbUJBc0JyQkosR0FBYUEsSUFsQ2pCLElBSE81TixFQUFJLEVBQUdBLEVBQUlvTSxFQUFNMUQsT0FBUTFJLElBQUs0TSxFQUE5QjVNIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvZm9jdXMtdmlzaWJsZVxuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgdmFyIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5ID0gZmFsc2U7XG4gICAgdmFyIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCA9IG51bGw7XG5cbiAgICB2YXIgaW5wdXRUeXBlc1doaXRlbGlzdCA9IHtcbiAgICAgIHRleHQ6IHRydWUsXG4gICAgICBzZWFyY2g6IHRydWUsXG4gICAgICB1cmw6IHRydWUsXG4gICAgICB0ZWw6IHRydWUsXG4gICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgIHBhc3N3b3JkOiB0cnVlLFxuICAgICAgbnVtYmVyOiB0cnVlLFxuICAgICAgZGF0ZTogdHJ1ZSxcbiAgICAgIG1vbnRoOiB0cnVlLFxuICAgICAgd2VlazogdHJ1ZSxcbiAgICAgIHRpbWU6IHRydWUsXG4gICAgICBkYXRldGltZTogdHJ1ZSxcbiAgICAgICdkYXRldGltZS1sb2NhbCc6IHRydWVcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBsZWdhY3kgYnJvd3NlcnMgYW5kIGlmcmFtZXMgd2hpY2ggc29tZXRpbWVzIGZvY3VzXG4gICAgICogZWxlbWVudHMgbGlrZSBkb2N1bWVudCwgYm9keSwgYW5kIG5vbi1pbnRlcmFjdGl2ZSBTVkcuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRGb2N1c1RhcmdldChlbCkge1xuICAgICAgaWYgKFxuICAgICAgICBlbCAmJlxuICAgICAgICBlbCAhPT0gZG9jdW1lbnQgJiZcbiAgICAgICAgZWwubm9kZU5hbWUgIT09ICdIVE1MJyAmJlxuICAgICAgICBlbC5ub2RlTmFtZSAhPT0gJ0JPRFknICYmXG4gICAgICAgICdjbGFzc0xpc3QnIGluIGVsICYmXG4gICAgICAgICdjb250YWlucycgaW4gZWwuY2xhc3NMaXN0XG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgd2hldGhlciB0aGUgZ2l2ZW4gZWxlbWVudCBzaG91bGQgYXV0b21hdGljYWxseSB0cmlnZ2VyIHRoZVxuICAgICAqIGBmb2N1cy12aXNpYmxlYCBjbGFzcyBiZWluZyBhZGRlZCwgaS5lLiB3aGV0aGVyIGl0IHNob3VsZCBhbHdheXMgbWF0Y2hcbiAgICAgKiBgOmZvY3VzLXZpc2libGVgIHdoZW4gZm9jdXNlZC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb2N1c1RyaWdnZXJzS2V5Ym9hcmRNb2RhbGl0eShlbCkge1xuICAgICAgdmFyIHR5cGUgPSBlbC50eXBlO1xuICAgICAgdmFyIHRhZ05hbWUgPSBlbC50YWdOYW1lO1xuXG4gICAgICBpZiAodGFnTmFtZSA9PSAnSU5QVVQnICYmIGlucHV0VHlwZXNXaGl0ZWxpc3RbdHlwZV0gJiYgIWVsLnJlYWRPbmx5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFnTmFtZSA9PSAnVEVYVEFSRUEnICYmICFlbC5yZWFkT25seSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsLmlzQ29udGVudEVkaXRhYmxlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgdG8gdGhlIGdpdmVuIGVsZW1lbnQgaWYgaXQgd2FzIG5vdCBhZGRlZCBieVxuICAgICAqIHRoZSBhdXRob3IuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEZvY3VzVmlzaWJsZUNsYXNzKGVsKSB7XG4gICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb2N1cy12aXNpYmxlJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZm9jdXMtdmlzaWJsZScpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnLCAnJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBgZm9jdXMtdmlzaWJsZWAgY2xhc3MgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudCBpZiBpdCB3YXMgbm90XG4gICAgICogb3JpZ2luYWxseSBhZGRlZCBieSB0aGUgYXV0aG9yLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVGb2N1c1Zpc2libGVDbGFzcyhlbCkge1xuICAgICAgaWYgKCFlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtdmlzaWJsZS1hZGRlZCcpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzLXZpc2libGUnKTtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1mb2N1cy12aXNpYmxlLWFkZGVkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJlYXQgYGtleWRvd25gIGFzIGEgc2lnbmFsIHRoYXQgdGhlIHVzZXIgaXMgaW4ga2V5Ym9hcmQgbW9kYWxpdHkuXG4gICAgICogQXBwbHkgYGZvY3VzLXZpc2libGVgIHRvIGFueSBjdXJyZW50IGFjdGl2ZSBlbGVtZW50IGFuZCBrZWVwIHRyYWNrXG4gICAgICogb2Ygb3VyIGtleWJvYXJkIG1vZGFsaXR5IHN0YXRlIHdpdGggYGhhZEtleWJvYXJkRXZlbnRgLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgaWYgKGlzVmFsaWRGb2N1c1RhcmdldChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICBhZGRGb2N1c1Zpc2libGVDbGFzcyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgYXQgYW55IHBvaW50IGEgdXNlciBjbGlja3Mgd2l0aCBhIHBvaW50aW5nIGRldmljZSwgZW5zdXJlIHRoYXQgd2UgY2hhbmdlXG4gICAgICogdGhlIG1vZGFsaXR5IGF3YXkgZnJvbSBrZXlib2FyZC5cbiAgICAgKiBUaGlzIGF2b2lkcyB0aGUgc2l0dWF0aW9uIHdoZXJlIGEgdXNlciBwcmVzc2VzIGEga2V5IG9uIGFuIGFscmVhZHkgZm9jdXNlZFxuICAgICAqIGVsZW1lbnQsIGFuZCB0aGVuIGNsaWNrcyBvbiBhIGRpZmZlcmVudCBlbGVtZW50LCBmb2N1c2luZyBpdCB3aXRoIGFcbiAgICAgKiBwb2ludGluZyBkZXZpY2UsIHdoaWxlIHdlIHN0aWxsIHRoaW5rIHdlJ3JlIGluIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvblBvaW50ZXJEb3duKGUpIHtcbiAgICAgIGhhZEtleWJvYXJkRXZlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbiBgZm9jdXNgLCBhZGQgdGhlIGBmb2N1cy12aXNpYmxlYCBjbGFzcyB0byB0aGUgdGFyZ2V0IGlmOlxuICAgICAqIC0gdGhlIHRhcmdldCByZWNlaXZlZCBmb2N1cyBhcyBhIHJlc3VsdCBvZiBrZXlib2FyZCBuYXZpZ2F0aW9uLCBvclxuICAgICAqIC0gdGhlIGV2ZW50IHRhcmdldCBpcyBhbiBlbGVtZW50IHRoYXQgd2lsbCBsaWtlbHkgcmVxdWlyZSBpbnRlcmFjdGlvblxuICAgICAqICAgdmlhIHRoZSBrZXlib2FyZCAoZS5nLiBhIHRleHQgYm94KVxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbkZvY3VzKGUpIHtcbiAgICAgIC8vIFByZXZlbnQgSUUgZnJvbSBmb2N1c2luZyB0aGUgZG9jdW1lbnQgb3IgSFRNTCBlbGVtZW50LlxuICAgICAgaWYgKCFpc1ZhbGlkRm9jdXNUYXJnZXQoZS50YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhZEtleWJvYXJkRXZlbnQgfHwgZm9jdXNUcmlnZ2Vyc0tleWJvYXJkTW9kYWxpdHkoZS50YXJnZXQpKSB7XG4gICAgICAgIGFkZEZvY3VzVmlzaWJsZUNsYXNzKGUudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbiBgYmx1cmAsIHJlbW92ZSB0aGUgYGZvY3VzLXZpc2libGVgIGNsYXNzIGZyb20gdGhlIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25CbHVyKGUpIHtcbiAgICAgIGlmICghaXNWYWxpZEZvY3VzVGFyZ2V0KGUudGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb2N1cy12aXNpYmxlJykgfHxcbiAgICAgICAgZS50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWZvY3VzLXZpc2libGUtYWRkZWQnKVxuICAgICAgKSB7XG4gICAgICAgIC8vIFRvIGRldGVjdCBhIHRhYi93aW5kb3cgc3dpdGNoLCB3ZSBsb29rIGZvciBhIGJsdXIgZXZlbnQgZm9sbG93ZWRcbiAgICAgICAgLy8gcmFwaWRseSBieSBhIHZpc2liaWxpdHkgY2hhbmdlLlxuICAgICAgICAvLyBJZiB3ZSBkb24ndCBzZWUgYSB2aXNpYmlsaXR5IGNoYW5nZSB3aXRoaW4gMTAwbXMsIGl0J3MgcHJvYmFibHkgYVxuICAgICAgICAvLyByZWd1bGFyIGZvY3VzIGNoYW5nZS5cbiAgICAgICAgaGFkRm9jdXNWaXNpYmxlUmVjZW50bHkgPSB0cnVlO1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCk7XG4gICAgICAgIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5ID0gZmFsc2U7XG4gICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChoYWRGb2N1c1Zpc2libGVSZWNlbnRseVRpbWVvdXQpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgICByZW1vdmVGb2N1c1Zpc2libGVDbGFzcyhlLnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIHVzZXIgY2hhbmdlcyB0YWJzLCBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgb3Igbm90IHRoZSBwcmV2aW91c2x5XG4gICAgICogZm9jdXNlZCBlbGVtZW50IGhhZCAuZm9jdXMtdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25WaXNpYmlsaXR5Q2hhbmdlKGUpIHtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHRhYiBiZWNvbWVzIGFjdGl2ZSBhZ2FpbiwgdGhlIGJyb3dzZXIgd2lsbCBoYW5kbGUgY2FsbGluZyBmb2N1c1xuICAgICAgICAvLyBvbiB0aGUgZWxlbWVudCAoU2FmYXJpIGFjdHVhbGx5IGNhbGxzIGl0IHR3aWNlKS5cbiAgICAgICAgLy8gSWYgdGhpcyB0YWIgY2hhbmdlIGNhdXNlZCBhIGJsdXIgb24gYW4gZWxlbWVudCB3aXRoIGZvY3VzLXZpc2libGUsXG4gICAgICAgIC8vIHJlLWFwcGx5IHRoZSBjbGFzcyB3aGVuIHRoZSB1c2VyIHN3aXRjaGVzIGJhY2sgdG8gdGhlIHRhYi5cbiAgICAgICAgaWYgKGhhZEZvY3VzVmlzaWJsZVJlY2VudGx5KSB7XG4gICAgICAgICAgaGFkS2V5Ym9hcmRFdmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYWRkSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgZ3JvdXAgb2YgbGlzdGVuZXJzIHRvIGRldGVjdCB1c2FnZSBvZiBhbnkgcG9pbnRpbmcgZGV2aWNlcy5cbiAgICAgKiBUaGVzZSBsaXN0ZW5lcnMgd2lsbCBiZSBhZGRlZCB3aGVuIHRoZSBwb2x5ZmlsbCBmaXJzdCBsb2FkcywgYW5kIGFueXRpbWVcbiAgICAgKiB0aGUgd2luZG93IGlzIGJsdXJyZWQsIHNvIHRoYXQgdGhleSBhcmUgYWN0aXZlIHdoZW4gdGhlIHdpbmRvdyByZWdhaW5zXG4gICAgICogZm9jdXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlSW5pdGlhbFBvaW50ZXJNb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Jbml0aWFsUG9pbnRlck1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkluaXRpYWxQb2ludGVyTW92ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgcG9sZnlpbGwgZmlyc3QgbG9hZHMsIGFzc3VtZSB0aGUgdXNlciBpcyBpbiBrZXlib2FyZCBtb2RhbGl0eS5cbiAgICAgKiBJZiBhbnkgZXZlbnQgaXMgcmVjZWl2ZWQgZnJvbSBhIHBvaW50aW5nIGRldmljZSAoZS5nLiBtb3VzZSwgcG9pbnRlcixcbiAgICAgKiB0b3VjaCksIHR1cm4gb2ZmIGtleWJvYXJkIG1vZGFsaXR5LlxuICAgICAqIFRoaXMgYWNjb3VudHMgZm9yIHNpdHVhdGlvbnMgd2hlcmUgZm9jdXMgZW50ZXJzIHRoZSBwYWdlIGZyb20gdGhlIFVSTCBiYXIuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uSW5pdGlhbFBvaW50ZXJNb3ZlKGUpIHtcbiAgICAgIC8vIFdvcmsgYXJvdW5kIGEgU2FmYXJpIHF1aXJrIHRoYXQgZmlyZXMgYSBtb3VzZW1vdmUgb24gPGh0bWw+IHdoZW5ldmVyIHRoZVxuICAgICAgLy8gd2luZG93IGJsdXJzLCBldmVuIGlmIHlvdSdyZSB0YWJiaW5nIG91dCBvZiB0aGUgcGFnZS4gwq9cXF8o44OEKV8vwq9cbiAgICAgIGlmIChlLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaHRtbCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBoYWRLZXlib2FyZEV2ZW50ID0gZmFsc2U7XG4gICAgICByZW1vdmVJbml0aWFsUG9pbnRlck1vdmVMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIG9uRm9jdXMsIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkJsdXIsIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UsIHRydWUpO1xuICAgIGFkZEluaXRpYWxQb2ludGVyTW92ZUxpc3RlbmVycygpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdqcy1mb2N1cy12aXNpYmxlJyk7XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaXB0aW9uIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgZnVuY3Rpb24gb25ET01SZWFkeShjYWxsYmFjaykge1xuICAgIHZhciBsb2FkZWQ7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayB3cmFwcGVyIGZvciBjaGVjayBsb2FkZWQgc3RhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgbG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChbJ2ludGVyYWN0aXZlJywgJ2NvbXBsZXRlJ10uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKSA+PSAwKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkZWQgPSBmYWxzZTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBsb2FkLCBmYWxzZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWQsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIG9uRE9NUmVhZHkoaW5pdCk7XG4gIH1cblxufSkpKTtcbiIsImNsYXNzIFNxdWFyZXMge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmNhbnZhcyk7XG5cbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm47XG5cbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHRoaXMuY29sb3IgPSAncmVkJztcblxuICAgIHRoaXMuc2l6ZSA9IHRoaXMucHJvcF9zZXQob3B0aW9ucy5zaXplLCAyMCk7XG5cbiAgICB0aGlzLm51bV94ID0gb3B0aW9ucy5udW1feDtcbiAgICB0aGlzLm51bV95ID0gb3B0aW9ucy5udW1feTtcblxuICAgIHRoaXMuaW5pdF9jYW52YXMoKTtcbiAgfVxuXG4gIGluaXRfY2FudmFzKCkge1xuICAgIHRoaXMucHJlcGFyZV9jYW52YXMoKTtcbiAgICB0aGlzLmF0dGFjaF9ldmVudHMoKTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucGF0dGVybikge1xuICAgICAgdGhpcy5wYXJzZV9wYXR0ZXJuKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5maWxsKSB7XG4gICAgICBjb25zdCBudW1fYm94ZXMgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0X3BhcmVudF93aWR0aCgpIC8gdGhpcy5zaXplIC8gMik7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX2JveGVzOyBpKyspIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB0aGlzLnNpemUgKiAoMiAqIGkpLCB5OiAwIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRyYXdfc3F1YXJlcygpO1xuICAgIH1cbiAgfVxuXG4gIGF0dGFjaF9ldmVudHMoKSB7XG4gICAgdGhpcy5wbGFjZV9zcXVhcmUgPSB0aGlzLnBsYWNlX3NxdWFyZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wbGFjZV9zcXVhcmUpO1xuICB9XG5cbiAgcGxhY2Vfc3F1YXJlKGUpIHtcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgY29uc3QgeF9yYXcgPSBlLnBhZ2VYIC0gZS50YXJnZXQub2Zmc2V0TGVmdDtcbiAgICBjb25zdCB5X3JhdyA9IGUucGFnZVkgLSBlLnRhcmdldC5vZmZzZXRUb3A7XG5cbiAgICBsZXQgeCA9IHhfcmF3IC0gKHhfcmF3ICUgdGhpcy5zaXplKTtcbiAgICBsZXQgeSA9IHlfcmF3IC0gKHlfcmF3ICUgdGhpcy5zaXplKTtcblxuICAgIGlmICh5ID09PSB0aGlzLmNhbnZhcy5oZWlnaHQpIHtcbiAgICAgIHkgLT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICBpZiAoeCA9PT0gdGhpcy5jYW52YXMud2lkdGgpIHtcbiAgICAgIHggLT0gdGhpcy5zaXplO1xuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zcXVhcmVzLmZpbmRJbmRleChwb3MgPT4gKHBvcy54ID09PSB4KSAmIChwb3MueSA9PT0geSkpO1xuXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMuc3F1YXJlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNxdWFyZXMucHVzaCh7IHg6IHgsIHk6IHkgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3X3NxdWFyZXModGhpcy5jb250ZXh0LCB0aGlzLnNxdWFyZXMpO1xuICB9XG5cbiAgcHJvcF9zZXQocHJvcCwgdmFsdWUpIHtcbiAgICByZXR1cm4gcHJvcCA/IHByb3AgOiB2YWx1ZTtcbiAgfVxuXG4gIHByZXBhcmVfY2FudmFzKCkge1xuICAgIHRoaXMuY2FudmFzLmNsYXNzTGlzdC5hZGQoJ3NxdWFyZS1jYW52YXMtLXZpc2libGUnKTtcblxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5udW1feCAqIHRoaXMuc2l6ZTtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLm51bV95ICogdGhpcy5zaXplO1xuXG4gICAgaWYgKHRoaXMubnVtX3ggPT09ICdpbmZpbml0ZScpIHtcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5nZXRfcGFyZW50X3dpZHRoKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zcXVhcmVzID0gW107XG4gIH1cblxuICBnZXRfcGFyZW50X3dpZHRoKCkge1xuICAgIGNvbnN0IHBhcmVudF9zdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY2FudmFzLnBhcmVudE5vZGUpO1xuICAgIGxldCBwYXJlbnRfd2lkdGggPSB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLmNsaWVudFdpZHRoO1xuICAgIHBhcmVudF93aWR0aCAtPVxuICAgICAgcGFyc2VGbG9hdChwYXJlbnRfc3R5bGVzLnBhZGRpbmdMZWZ0KSArXG4gICAgICBwYXJzZUZsb2F0KHBhcmVudF9zdHlsZXMucGFkZGluZ1JpZ2h0KTtcblxuICAgIHJldHVybiBwYXJlbnRfd2lkdGg7XG4gIH1cblxuICBwYXJzZV9wYXR0ZXJuKCkge1xuICAgIGNvbnN0IHBhdHRlcm4gPSB0aGlzLm9wdGlvbnMucGF0dGVybi5zcGxpdCgnLCcpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXR0ZXJuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBib3ggPSBwYXJzZUludChwYXR0ZXJuW2ldLnRyaW0oKSk7XG4gICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihpIC8gdGhpcy5udW1feCk7XG4gICAgICBsZXQgY29sID0gKGkgKyB0aGlzLm51bV94KSAlIHRoaXMubnVtX3g7XG5cbiAgICAgIGlmICh0aGlzLm51bV94ID09PSAnaW5maW5pdGUnKSB7XG4gICAgICAgIHJvdyA9IDA7XG4gICAgICAgIGNvbCA9IGk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib3gpIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzLnB1c2goeyB4OiB0aGlzLnNpemUgKiBjb2wsIHk6IHRoaXMuc2l6ZSAqIHJvdyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmRyYXdfc3F1YXJlcygpO1xuICB9XG5cbiAgZHJhd19zcXVhcmVzKCkge1xuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnByb3Bfc2V0KFxuICAgICAgdGhpcy5vcHRpb25zLmNvbG9yLFxuICAgICAgJ3JnYmEoNTEsIDUxLCA1MSwgMC45KSdcbiAgICApO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNxdWFyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IHRoaXMuc3F1YXJlc1tpXTtcbiAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdChzcXVhcmUueCwgc3F1YXJlLnksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3F1YXJlcztcbiIsImNvbnN0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgPVxuICByZXF1ZXN0SWRsZUNhbGxiYWNrIHx8XG4gIGZ1bmN0aW9uKGNiKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY2Ioe1xuICAgICAgICBkaWRUaW1lb3V0OiBmYWxzZSxcbiAgICAgICAgdGltZVJlbWFpbmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIDUwIC0gKERhdGUubm93KCkgLSBzdGFydCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCAxKTtcbiAgfTtcblxuZXhwb3J0IGRlZmF1bHQgcmVxdWVzdElkbGVDYWxsYmFjaztcbiIsIi8qKlxuICogSW5zcGlyZWQgYnkgcXVpY2tsaW5rLlxuICogaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZUxhYnMvcXVpY2tsaW5rXG4gKi9cblxuaW1wb3J0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgZnJvbSAnLi9yZXF1ZXN0LWlkbGUtY2FsbGJhY2suanMnO1xuXG5mdW5jdGlvbiBjcmVhdGVQcmVmZXRjaExpbmsodXJsKSB7XG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cbiAgLy8gSWYgcHJlZmV0Y2ggc3VwcG9ydGVkXG4gIGlmICgobGluay5yZWxMaXN0IHx8IHt9KS5zdXBwb3J0cyAmJiAhbGluay5yZWxMaXN0LnN1cHBvcnRzKCdwcmVmZXRjaCcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGluay5yZWwgPSAncHJlZmV0Y2gnO1xuICBsaW5rLmhyZWYgPSB1cmw7XG5cbiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbn1cblxuZnVuY3Rpb24gZ2V0TGlua3MoKSB7XG4gIC8vIEdldCBhbGwgbGlua3MgaW4gbWFpbiBuYXZcbiAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbmF2LW1haW4gYScpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICBjcmVhdGVQcmVmZXRjaExpbmsobGlua3NbaV0uaHJlZik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlZmV0Y2hOYXYoKSB7XG4gIC8vIGRvbid0IHByZWZldGNoIGlmIDJnIGNvbm5lY3Rpb24gb3IgZGF0YS1zYXZlciBlbmFibGVkXG4gIGlmIChuYXZpZ2F0b3IuY29ubmVjdGlvbiAmJiBuYXZpZ2F0b3IuY29ubmVjdGlvbi5zYXZlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIG5hdmlnYXRvci5jb25uZWN0aW9uLmVmZmVjdGl2ZVR5cGUuaW5jbHVkZXMoJzJnJykgfHxcbiAgICAgIG5hdmlnYXRvci5jb25uZWN0aW9uLnNhdmVEYXRhXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gc3RhcnQgYXMgc29vbiBhcyB0aGUgYnJvd3NlciBpc24ndCBidXN5IGFueW1vcmVcbiAgcmVxdWVzdElkbGVDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0TGlua3MoKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByZWZldGNoTmF2O1xuIiwibGV0IG9ic2VydmVyO1xuXG5mdW5jdGlvbiBsb2FkSW1hZ2UoaW1hZ2UpIHtcbiAgY29uc3Qgc3JjID0gaW1hZ2UuZGF0YXNldC5zcmM7XG4gIHJldHVybiBmZXRjaEltYWdlKHNyYykudGhlbigoKSA9PiB7XG4gICAgaW1hZ2UuY2xhc3NMaXN0LmFkZCgnbGF6eWxvYWRlZCcpO1xuICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICBpbWFnZS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmZXRjaEltYWdlKHVybCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgaWYgKHVybCkge1xuICAgICAgaW1hZ2Uuc3JjID0gdXJsO1xuICAgIH1cbiAgICBpbWFnZS5vbmxvYWQgPSByZXNvbHZlO1xuICAgIGltYWdlLm9uZXJyb3IgPSByZWplY3Q7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbWFnZVZpc2libGUoZW50cmllcykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgZW50cnkgPSBlbnRyaWVzW2ldO1xuICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApIHtcbiAgICAgIGNvbnN0IGltYWdlID0gZW50cnkudGFyZ2V0O1xuICAgICAgbG9hZEltYWdlKGltYWdlKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2xhenknKTtcblxuICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGltYWdlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbGF6eUxvYWQoaW1hZ2VzKSB7XG4gIGlmIChpbWFnZXMubGVuZ3RoKSB7XG4gICAgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoaW1hZ2VWaXNpYmxlLCB7XG4gICAgICByb290TWFyZ2luOiAnMTAwcHggMHB4J1xuICAgIH0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpbWFnZSA9IGltYWdlc1tpXTtcbiAgICAgIGlmIChpbWFnZS5jbGFzc0xpc3QuY29udGFpbnMoJ2xhenlsb2FkZWQnKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShpbWFnZSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGxhenlMb2FkO1xuIiwiLy8gRGVtb3NcblxuY29uc3QgZGVtb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZGVtbycpO1xubGV0IGRlbW9PYnNlcnZlcjtcblxuZnVuY3Rpb24gZGVtb0FkZEJ1dHRvbihkZW1vKSB7XG4gIGNvbnN0IGNvbnRyb2xzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRyb2xzLmNsYXNzTGlzdC5hZGQoJ2RlbW9fX2NvbnRyb2xzJyk7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBjb25zdCBidXR0b25faW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIGJ1dHRvbl9pbm5lci5jbGFzc0xpc3QuYWRkKCdidG5fX2lubmVyJyk7XG4gIGJ1dHRvbl9pbm5lci50ZXh0Q29udGVudCA9ICdSZXBsYXkgYW5pbWF0aW9uJztcbiAgYnV0dG9uLmFwcGVuZENoaWxkKGJ1dHRvbl9pbm5lcik7XG5cbiAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xuICBidXR0b24uY2xhc3NMaXN0LmFkZCgnZGVtb19fYnRuJyk7XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgZGVtby5jbGFzc0xpc3QucmVtb3ZlKCdkZW1vLS1wbGF5aW5nJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZW1vLmNsYXNzTGlzdC5hZGQoJ2RlbW8tLXBsYXlpbmcnKTtcbiAgICB9LCA2MDApO1xuICB9KTtcblxuICBjb250cm9scy5hcHBlbmRDaGlsZChidXR0b24pO1xuICBkZW1vLmFwcGVuZENoaWxkKGNvbnRyb2xzKTtcbn1cblxuZnVuY3Rpb24gZGVtb1Zpc2libGUoZW50cmllcykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgZW50cnkgPSBlbnRyaWVzW2ldO1xuICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA9PT0gMSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdkZW1vLS1wbGF5aW5nJyk7XG5cbiAgICAgICAgZGVtb09ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xuICAgICAgfSwgNDAwKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZW5oYW5jZURlbW9zKCkge1xuICBpZiAoZGVtb3MubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZW1vcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGVtbyA9IGRlbW9zW2ldO1xuICAgICAgZGVtb0FkZEJ1dHRvbihkZW1vKTtcblxuICAgICAgZGVtb09ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGRlbW9WaXNpYmxlLCB7XG4gICAgICAgIHRocmVzaG9sZDogWzFdXG4gICAgICB9KTtcblxuICAgICAgaWYgKGRlbW8uY2xhc3NMaXN0LmNvbnRhaW5zKCdkZW1vLS1wbGF5aW5nJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGRlbW9PYnNlcnZlci5vYnNlcnZlKGRlbW8pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBlbmhhbmNlRGVtb3M7XG4iLCJpbXBvcnQgU3F1YXJlcyBmcm9tICcuL3NxdWFyZXMnO1xuaW1wb3J0IHByZWZldGNoTmF2IGZyb20gJy4vcHJlZmV0Y2gtbmF2JztcbmltcG9ydCBsYXp5TG9hZCBmcm9tICcuL2xhenlsb2FkJztcbmltcG9ydCBlbmhhbmNlRGVtb3MgZnJvbSAnLi9kZW1vJztcbnJlcXVpcmUoJ2ZvY3VzLXZpc2libGUnKTtcblxuaWYgKCFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0KSB7XG4gIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbihzKSB7XG4gICAgdmFyIGVsID0gdGhpcztcbiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsO1xuICAgIGRvIHtcbiAgICAgIGlmIChlbC5tYXRjaGVzKHMpKSByZXR1cm4gZWw7XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZTtcbiAgICB9IHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59XG5cbmNvbnN0IGhvbWVfdGwgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS10bCcsXG4gIG51bV94OiAxLFxuICBudW1feTogMSxcbiAgcGF0dGVybjogJzEnLFxuICBjb2xvcjogJyMzNkIxQkYnXG59KTtcblxuY29uc3QgaG9tZV90ciA9IG5ldyBTcXVhcmVzKHtcbiAgY2FudmFzOiAnLmpzLXNxLXRyJyxcbiAgbnVtX3g6IDIsXG4gIG51bV95OiAxLFxuICBwYXR0ZXJuOiAnMSwxJyxcbiAgY29sb3I6ICcjMzZCMUJGJ1xufSk7XG5cbmNvbnN0IGhvbWVfYnIgPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1icicsXG4gIG51bV94OiAxLFxuICBudW1feTogMixcbiAgcGF0dGVybjogJzEsMScsXG4gIGNvbG9yOiAnI0YyM0M1MCdcbn0pO1xuXG5jb25zdCBob21lX2JsID0gbmV3IFNxdWFyZXMoe1xuICBjYW52YXM6ICcuanMtc3EtYmwnLFxuICBudW1feDogMixcbiAgbnVtX3k6IDIsXG4gIHBhdHRlcm46ICcxLDAsMSwxJyxcbiAgY29sb3I6ICcjRjIzQzUwJ1xufSk7XG5cbmNvbnN0IGhvbWVfaW50cm8gPSBuZXcgU3F1YXJlcyh7XG4gIGNhbnZhczogJy5qcy1zcS1ob21lLWludHJvJyxcbiAgbnVtX3g6IDYsXG4gIG51bV95OiA1LFxuICBjb2xvcjogJyM1NjhiOGUnLFxuICBzaXplOiAxMCxcbiAgcGF0dGVybjogYDAsMCwxLDEsMCwxLFxuICAgIDAsMSwxLDAsMCwxLFxuICAgIDEsMSwwLDAsMCwxLFxuICAgIDAsMSwxLDAsMCwwLFxuICAgIDAsMCwxLDEsMCwxYFxufSk7XG5cbi8qKlxuICogUmFuZG9tIGVtb2ppXG4gKi9cblxuZnVuY3Rpb24gZ2V0UmFuZG9tRW1vamkoKSB7XG4gIGNvbnN0IGVtb2ppcyA9IFsn8J+kpCcsICfwn5CzJywgJ/CfjbsnLCAn8J+RivCfj7snLCAn8J+NsyddO1xuXG4gIGNvbnN0IGVtb2ppID0gZW1vamlzW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChlbW9qaXMubGVuZ3RoIC0gMSkpXTtcbiAgcmV0dXJuIGVtb2ppO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXJhbmRvbS1lbW9qaScpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1yYW5kb20tZW1vamknKS50ZXh0Q29udGVudCA9IGdldFJhbmRvbUVtb2ppKCk7XG59XG5cbi8qKlxuICogU21vb3RobHkgc2Nyb2xsIHRvIHRvcFxuICovXG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2Nyb2xsLXRvcCcpKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zY3JvbGwtdG9wJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWxvZ28nKS5mb2N1cygpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQcmVmZXRjaCBsaW5rcyBpbiBuYXYgZm9yIGJldHRlciBwZXJjZWl2ZWQgcGVyZm9ybWFuY2VcbiAqL1xuXG5wcmVmZXRjaE5hdigpO1xuXG4vLyBoaXN0b3J5LnB1c2hTdGF0ZShcbi8vICAgeyB0aGVtZTogbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvL2csICcnKSB9LFxuLy8gICBsb2NhdGlvbi5wYXRobmFtZSxcbi8vICAgbG9jYXRpb24ucGF0aG5hbWVcbi8vICk7XG5cbi8vIGZ1bmN0aW9uIGxpbmtQb3N0bGlzdCgpIHtcbi8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgY29uc3QgbGluayA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdhJyk7XG4vLyAgIGNvbnN0IHRoZW1lQ2xhc3MgPSBgJHtsaW5rLmRhdGFzZXQucHVibGljYXRpb259LSR7bGluay5kYXRhc2V0LnBvc3R9YDtcbi8vICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIHRoZW1lQ2xhc3MpO1xuLy8gICBoaXN0b3J5LnB1c2hTdGF0ZSh7IHRoZW1lOiB0aGVtZUNsYXNzIH0sIGxpbmsuaHJlZiwgbGluay5ocmVmKTtcbi8vICAgbG9hZFBhZ2UobGluay5ocmVmKTtcbi8vIH1cblxuLy8gaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3N0LWxpc3QnKSkge1xuLy8gICBkb2N1bWVudFxuLy8gICAgIC5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0Jylcbi8vICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaW5rUG9zdGxpc3QpO1xuLy8gfVxuXG4vLyB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGUpIHtcbi8vICAgaWYgKGUuc3RhdGUpIHtcbi8vICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgZS5zdGF0ZS50aGVtZSk7XG4vLyAgICAgbG9hZFBhZ2UobG9jYXRpb24ucGF0aG5hbWUpO1xuLy8gICB9XG4vLyB9O1xuXG4vLyBmdW5jdGlvbiBsb2FkUGFnZSh1cmwpIHtcbi8vICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaXRlLWNvbnRlbnQnKTtcbi8vICAgbWFpbi5pbm5lckhUTUwgPSAnJztcbi8vICAgbWFpbi5jbGFzc0xpc3QuYWRkKCdzaXRlX19jb250ZW50LS1oaWRkZW4nKTtcblxuLy8gICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4vLyAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcblxuLy8gICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuLy8gICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4vLyAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbi8vICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLnJlc3BvbnNlO1xuLy8gICAgICAgbWFpbi5pbm5lckhUTUwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmpzLXNpdGUtY29udGVudCcpLmlubmVySFRNTDtcbi8vICAgICAgIG1haW4uY2xhc3NMaXN0LnJlbW92ZSgnc2l0ZV9fY29udGVudC0taGlkZGVuJyk7XG4vLyAgICAgICBpZiAobWFpbi5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0JykpIHtcbi8vICAgICAgICAgbWFpblxuLy8gICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuanMtcG9zdC1saXN0Jylcbi8vICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaW5rUG9zdGxpc3QpO1xuLy8gICAgICAgfVxuXG4vLyAgICAgICBsYXp5TG9hZChtYWluLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZ1tkYXRhLXNyY10nKSk7XG4vLyAgICAgfVxuLy8gICB9O1xuXG4vLyAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuLy8gICAgIHBhZ2VfY29udGVudC5pbm5lckhUTUwgPVxuLy8gICAgICAgXCJGb3Igc29tZSByZWFzb24gSSBjb3VsZG4ndCBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIsIHBsZWFzZSB0cnkgbGF0ZXIgYWdhaW4uXCI7XG4vLyAgIH07XG5cbi8vICAgcmVxdWVzdC5zZW5kKCk7XG4vLyB9XG5cbi8vIExhenkgbG9hZCBpbWFnZXNcbmxhenlMb2FkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sYXp5JykpO1xuXG4vKiogXG4gKiBFbmhhbmNlIGRlbW9zIHdpdGggSlNcbiAqIEFkZHMgXCJSZXBsYXlcIiBCdXR0b25cbiAqIEFkZHMgSW50ZXJzZWN0aW9uIE9ic2VydmVyIHRvIGF1dG8gcGxheSBhbmltYXRpb25zIFxuICovXG5lbmhhbmNlRGVtb3MoKTtcblxuLyoqIFxuICogT3JkZXIgZGVtb1xuICovXG52YXIgZGVtb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYS1mb2N1cy1kZW1vJyk7XG52YXIgYWN0aXZlTGluayA9IFtdO1xuZm9yIChsZXQgaSA9IDA7IGkgPCBkZW1vcy5sZW5ndGg7IGkrKykge1xuICBhY3RpdmVMaW5rLnB1c2goMCk7XG5cbiAgKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkZW1vID0gZGVtb3NbaV07XG4gICAgdmFyIGxpbmtzID0gZGVtby5xdWVyeVNlbGVjdG9yQWxsKCdhLCBidXR0b24nKTtcbiAgICB2YXIgYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgdmFyIGZvY3VzSW50ZXJ2YWw7XG5cbiAgICB2YXIgcGxheXBhdXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgdmFyIHBsYXlwYXVzZV9pbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBwbGF5cGF1c2UuY2xhc3NMaXN0LmFkZCgnYnRuJylcbiAgICBwbGF5cGF1c2VfaW5uZXIuY2xhc3NMaXN0LmFkZCgnYnRuX19pbm5lcicpXG4gICAgcGxheXBhdXNlLmFwcGVuZENoaWxkKHBsYXlwYXVzZV9pbm5lcik7XG5cbiAgICB2YXIgYnV0dG9uVGV4dEFjdGl2ZSA9ICdTdG9wIGFuaW1hdGlvbic7XG4gICAgdmFyIGJ1dHRvblRleHRJbmFjdGl2ZSA9ICdQbGF5IGFuaW1hdGlvbic7XG5cbiAgICBpZiAoZGVtby5oYXNBdHRyaWJ1dGUoJ2RhdGEtYnV0dG9uJykpIHtcbiAgICAgIGJ1dHRvblRleHRJbmFjdGl2ZSA9IGRlbW8uZ2V0QXR0cmlidXRlKCdkYXRhLWJ1dHRvbicpO1xuICAgIH1cblxuICAgIHNldEJ1dHRvblRleHQoYnV0dG9uVGV4dEluYWN0aXZlKTtcblxuICAgIGRlbW8uaW5zZXJ0QmVmb3JlKHBsYXlwYXVzZSwgZGVtby5maXJzdENoaWxkKTtcblxuICAgIHBsYXlwYXVzZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGFuaW1hdGluZykge1xuICAgICAgICBjbGVhckludGVydmFsKGZvY3VzSW50ZXJ2YWwpXG4gICAgICAgIHBsYXlwYXVzZV9pbm5lci50ZXh0Q29udGVudCA9IGJ1dHRvblRleHRJbmFjdGl2ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmtzW2FjdGl2ZUxpbmtbaV1dLmNsYXNzTGlzdC5hZGQoJ2ZvY3VzJyk7XG5cbiAgICAgICAgZm9jdXNJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmb2N1c05leHQsIDcwMCk7XG4gICAgICAgIHNldEJ1dHRvblRleHQoYnV0dG9uVGV4dEFjdGl2ZSk7XG4gICAgICB9ICBcbiAgICAgIFxuICAgICAgYW5pbWF0aW5nID0gIWFuaW1hdGluZztcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNldEJ1dHRvblRleHQodGV4dCkge1xuICAgICAgcGxheXBhdXNlX2lubmVyLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb2N1c05leHQoKSB7ICBcbiAgICAgIGlmIChhY3RpdmVMaW5rW2ldIDwgbGlua3MubGVuZ3RoIC0gMSkge1xuICAgICAgICBhY3RpdmVMaW5rW2ldKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmVMaW5rW2ldID0gMDtcbiAgICAgIH1cblxuICAgICAgZGVtby5xdWVyeVNlbGVjdG9yKCcuZm9jdXMnKS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1cycpO1xuXG4gICAgICBsaW5rc1thY3RpdmVMaW5rW2ldXS5jbGFzc0xpc3QuYWRkKCdmb2N1cycpO1xuICAgIH1cbiAgfSkoaSlcbn1cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9