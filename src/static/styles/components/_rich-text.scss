.rich-text {
  --rich-text-margin: #{$spacing / 1.8};
  --rich-text-margin-large: #{$spacing};

  @include mq(xwide) {
    --rich-text-margin: #{$spacing / 1.4};
    --rich-text-margin-large: #{$spacing * 1.5};
  }
}

.rich-text {
  h2 {
    @include heading-2;
    margin: 0 0 $spacing / 2;

    &:not(:first-child) {
      margin-top: $spacing * 1.5;
    }
  }

  h3 {
    margin-top: $spacing;
    margin-bottom: $spacing / 3;
    line-height: 1.3;
  }

  h4 {
    margin-top: $spacing;
    margin-bottom: 0;
  }

  li {
    margin-bottom: $spacing / 3;

    &:last-child {
      margin-bottom: 0;
    }
  }

  p {
    margin-top: 0;

    @supports (font-size: var(--test)) {
      max-width: 60ch;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  & > * + * {
    margin-bottom: var(--rich-text-margin);
  }

  & > ul {
    margin-bottom: var(--rich-text-margin-large);
  }

  a {
    @include link {
      @include underline(3px, currentColor);

      color: $c-sec-dark;
      text-decoration: none;
      transition: color 0.2s cubic-bezier(0.47, 0, 0.74, 0.71), font-size 0.2s cubic-bezier(0.47, 0, 0.74, 0.71);
    }

    &:hover {
      @include underline(3px, $c-highlight);

      color: $c-highlight;
    }

    @include link-focus;

    &.no-line {
      box-shadow: none;
    }
  }

  p + .h2 {
    margin-top: $spacing * 1.5;
    margin-bottom: $spacing / 2.5;
  }

  pre {
    overflow: auto;
  }

  .code-label {
    margin-bottom: -4rem;
  }

  *:target {
    transition: background 0.2s;
    animation: target-highlight 1.2s ease-in-out;
    position: relative;
  }
  
  *:target::after {
    position: absolute;
    width: 1rem;
    height: 3rem;
    content: "";
    background: #f23c50;
    left: -2rem;
    top: 0.4rem;
    display: block;
  }
  
  @keyframes target-highlight {
    50% { background: #f23c50; }
    100% { background: none; }
  }
}

// Lighthouse article

.lighthouse-test {
  position: relative;

  button {
    position: absolute;
    z-index: 111;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    margin: auto;
    max-height: 5.3rem;
  }

  img {
    opacity: 0;
    transition: opacity 0.3s;
  }

  .content__image-wrapper::before,
  .content__image-wrapper::after {
    display: none;
  }

  &--finished {
    button {
      display: none;
    }

    img {
      opacity: 1;
    }
  }
}
